---
layout: post
title:  "iOS 编译运行部署和发布部署的一个差异"
date:   2014-06-17 13:00:00 +0800
categories: 技术
tags: [XCode,iOS]
---
 
不知道我标题说明白了没有，编译运行部署就是使用xcode直接build and run将程序编译后直接运行到手机上，这样可以调试。发布部署就是使用achive打包一个ipa再将ipa安装到手机上。

我这里就只说一个问题，不过我觉得肯定还有其它的差异。这个问题还挺烦人的。

假如旧版中有一个文件X被复制进入mainBundle中，但是在新版中我不期望再使用这个文件X了，因此在工程中将其删除，重新编译后去查看了生成的app文件，里面没有X,然后run到手机上，悲剧的发现此时文件X还在，它仍然存在手机app目录中。可以通过读取文件去验证，也可以通过一些软件去查看app的mainBundle都能证明这个X它确实还存在。
 
但是如果你用achive打包，得到一个ipa，将这个ipa覆盖安装到手机上，你会发现这个X会被干掉，ios这个时候就是替换掉了整个mainBundle。
      
Apple你要不要这样，这样我们开发者很困扰诶。比如我的某个API是从mainBundle里面找寻所有的某类文件，然后进行处理，以前有X，现在我不想要了，结果我debug发现这个X一直在，除非我删掉以前的app重新run，但是我就是要测试覆盖安装行为啊。。。咋整，我能想到的就是在run之前用一些第三方软件比如iFunBox，pp助手等将新版中要删除的文件提前删掉。
      
这不科学！Apple完全可以将debug和achive关于这种文件X的行为统一, 毕竟用户使用的achive的包，他们不会存在这样的问题，那为什么开发者需要来处理这种根本不需要处理的问题呢？

希望大家都注意一下，避免出现一些无法理解的现象。