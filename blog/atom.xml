<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>kaizeiã¨yimi</title>
  
  <link href="/blog/atom.xml" rel="self"/>
  
  <link href="/"/>
  <updated>2016-04-17T03:34:24.000Z</updated>
  <id>/</id>
  
  <author>
    <name>kaizei</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>make AutoLayout X</title>
    <link href="/2016/04/17/make-AutoLayout-X/"/>
    <id>/2016/04/17/make-AutoLayout-X/</id>
    <published>2016-04-17T03:34:24.000Z</published>
    <updated>2016-04-17T03:34:24.000Z</updated>
    
    <content type="html">&lt;p&gt;å…¶å®æŒºä¸å¥½æ„æ€çš„, 2å¹´å‰çš„çŸ¥è¯†, åŠå¹´å‰çš„åº“, ç°åœ¨æ‰å†™ä¸‹æ¥. sigh...&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;h2 id=&quot;é™ˆå¹´æ—§äº‹&quot;&gt;&lt;a href=&quot;#é™ˆå¹´æ—§äº‹&quot; class=&quot;headerlink&quot; title=&quot;é™ˆå¹´æ—§äº‹&quot;&gt;&lt;/a&gt;é™ˆå¹´æ—§äº‹&lt;/h2&gt;&lt;p&gt;ä»¥å‰æˆ‘åæ§½äº†çº¦æŸå†™èµ·æ¥å¤ªè´¹åŠ², å¸ƒå±€å¾ˆæ‰‹åŠ¨åŒ–, å‡ ä¹éœ€è¦éå¸¸è¯¦ç»†åœ°æŒ‡æ˜æ¯ä¸€ä¸ªçº¦æŸçš„æ¯ä¸€ä¸ªæ¡ä»¶. è€Œè¿™æ ·çš„ç»“æœå°±æ˜¯ä»£ç éå¸¸é•¿, é˜…è¯»å’Œç†è§£éƒ½å¥½å›°éš¾, çœ‹ç€æ‰“çŒç¡. VFL? no kidding me again. &lt;/p&gt;
&lt;p&gt;åæ­£å¥½éº»çƒ¦, ç„¶åå¼€æºç¤¾åŒºå‡ºç°äº†ä¸€ä¸ªåº“&lt;strong&gt;Masonry&lt;/strong&gt;, ç›®çš„æ˜¯ç®€åŒ–ä»£ç å†™çº¦æŸ, æä¾›äº†é“¾å¼è¯­æ³•ä»¥åŠä¸€äº›helperæ–¹æ³•. å½“ç„¶æœ¬æ–‡ä¸æ˜¯è¦ä»‹ç»å®ƒ, ä¹Ÿä¸æ˜¯è¦æ‰¹è¯„å®ƒ, åªæ˜¯åæ§½è€Œå·², åæ–‡å†è¯´. æœ¬æ–‡ä¸»è¦æ˜¯ä»‹ç»æˆ‘å†™çš„&lt;strong&gt;XAutoLayout&lt;/strong&gt;ğŸ˜ƒ. &lt;/p&gt;
&lt;h2 id=&quot;demo-code&quot;&gt;&lt;a href=&quot;#demo-code&quot; class=&quot;headerlink&quot; title=&quot;demo code&quot;&gt;&lt;/a&gt;demo code&lt;/h2&gt;&lt;p&gt;ä½¿ç”¨èµ·æ¥è¿˜æ˜¯æ¯”è¾ƒæ–¹ä¾¿çš„. æˆ‘å®šä¹‰äº†å‡ ä¸ªæ“ä½œç¬¦&lt;code&gt;=/&lt;/code&gt;,&lt;code&gt;&amp;lt;=/&lt;/code&gt;å’Œ&lt;code&gt;&amp;gt;=/&lt;/code&gt;, åˆ†åˆ«ä¸&lt;strong&gt;Equal&lt;/strong&gt;, &lt;strong&gt;lessOrEqual&lt;/strong&gt;, &lt;strong&gt;greaterOrEqual&lt;/strong&gt;è¿™å‡ ä¸ªæ–¹æ³•ç­‰ä»·, arrayä»…æ”¯æŒ&lt;code&gt;=/&lt;/code&gt;, å¯¹åº”çš„æ–¹æ³•æ˜¯&lt;code&gt;compositeEqual&lt;/code&gt; å†…éƒ¨å®ç°éƒ½æ²¡æœ‰ä½¿ç”¨é‡è½½çš„æ“ä½œç¬¦.&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;swift hljs&quot;&gt;xmakeConstraints(.&lt;span class=&quot;hljs-type&quot;&gt;RightToLeft&lt;/span&gt;, autoActive = &lt;span class=&quot;hljs-literal&quot;&gt;true&lt;/span&gt;) {  &lt;span class=&quot;hljs-comment&quot;&gt;// autoActive has a default value true&lt;/span&gt;
    v1.xEdge =/ [&lt;span class=&quot;hljs-number&quot;&gt;10&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;5&lt;/span&gt;,-&lt;span class=&quot;hljs-number&quot;&gt;10&lt;/span&gt;,-&lt;span class=&quot;hljs-number&quot;&gt;20&lt;/span&gt;] &lt;span class=&quot;hljs-comment&quot;&gt;// can directly use number, the second view will be superview&lt;/span&gt;
    v2.xSize =/ [&lt;span class=&quot;hljs-number&quot;&gt;50&lt;/span&gt;, view.heightAnchor.&lt;span class=&quot;hljs-built_in&quot;&gt;c&lt;/span&gt;(-&lt;span class=&quot;hljs-number&quot;&gt;50&lt;/span&gt;)] &lt;span class=&quot;hljs-comment&quot;&gt;// can use iOS9 API&lt;/span&gt;

    &lt;span class=&quot;hljs-comment&quot;&gt;// [v2.xTop, v2.xLeading] =/ [20, 10]  same as the below two lines&lt;/span&gt;
    v2.xTop =/ &lt;span class=&quot;hljs-number&quot;&gt;20&lt;/span&gt;
    v2.xLeading =/ &lt;span class=&quot;hljs-number&quot;&gt;20&lt;/span&gt;
}&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&quot;é¢å‘æ¥å£ç¼–ç¨‹&quot;&gt;&lt;a href=&quot;#é¢å‘æ¥å£ç¼–ç¨‹&quot; class=&quot;headerlink&quot; title=&quot;é¢å‘æ¥å£ç¼–ç¨‹&quot;&gt;&lt;/a&gt;é¢å‘æ¥å£ç¼–ç¨‹&lt;/h2&gt;&lt;p&gt;è¿™ä¸ªåº”è¯¥æ˜¯swiftæœ€å¼ºè°ƒçš„äº†. é¢å‘æ¥å£ç¼–ç¨‹æ˜¯å¤§å®¶éƒ½æ‡‚, ä½†åˆä¸€èˆ¬ä¸è¿™ä¹ˆå¹²çš„ä¸€ä¸ªç¼–ç¨‹å‡†åˆ™. swift2ä»¥åç»™protocolåŠ ä¸Šäº†extensionæä¾›é»˜è®¤å®ç°çš„èƒ½åŠ›, è®©é¢å‘æ¥å£ç¼–ç¨‹æ›´åŠ å¼ºå¤§. åŠ ä¸Šå¯¹ä¹‹å‰å†™è¿‡çš„é‚£ä¸ªåº“ä¸æ»¡æ„, äºæ˜¯å†³å®šå……åˆ†åˆ©ç”¨è¯­è¨€èƒ½åŠ›ç”¨çº¯swifté‡å†™ä¸€ä¸ª. &lt;/p&gt;
&lt;p&gt;iOS9æ–°å¢äº†ä¸€äº›&lt;code&gt;topAnchor&lt;/code&gt;è¿™æ ·çš„API, ç”¨æ¥å°è£…&lt;code&gt;item&lt;/code&gt;å’Œ&lt;code&gt;attr&lt;/code&gt;, ç”¨èµ·æ¥æ¯”ä»¥å‰ç›´è§‚ä¸€äº›. ä½†æ˜¯ç°åœ¨å¸‚é¢ä¸Šæ›´å¤šçš„æ˜¯baseåˆ°iOS7, æœ‰äº›æ˜¯åˆ°iOS8, è¿™æ ·çš„APIå°±åªèƒ½è¿œè§‚äº†. è™½ç„¶æ–¹ä¾¿äº†ä¸€äº›, ä½†æ˜¯å› ä¸ºè¿™äº›ä¸œè¥¿è¿˜è¦è€ƒè™‘OC, å¯¼è‡´å®é™…ä½¿ç”¨æ—¶çœ‹èµ·æ¥ä»ç„¶æ¯”è¾ƒå†—é•¿.&lt;/p&gt;
&lt;h4 id=&quot;æƒ³æ³•çš„å»ºç«‹&quot;&gt;&lt;a href=&quot;#æƒ³æ³•çš„å»ºç«‹&quot; class=&quot;headerlink&quot; title=&quot;æƒ³æ³•çš„å»ºç«‹&quot;&gt;&lt;/a&gt;æƒ³æ³•çš„å»ºç«‹&lt;/h4&gt;&lt;p&gt;ä¸€ä¸ªçº¦æŸåˆ°åº•è¦è¡¨è¾¾ä»€ä¹ˆ? æ–‡æ¡£ä¸­çš„ç­‰å¼æ˜¯è¿™æ ·:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;null hljs&quot;&gt;  &lt;span class=&quot;hljs-built_in&quot;&gt;first&lt;/span&gt;.&lt;span class=&quot;hljs-built_in&quot;&gt;attr&lt;/span&gt; = second.&lt;span class=&quot;hljs-built_in&quot;&gt;attr&lt;/span&gt; * m + c&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;å¯ä»¥è¿™æ ·å»æ‹†åˆ†:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;firstItem, firstAttribute&lt;/li&gt;
&lt;li&gt;secondItem, secondAttribute&lt;/li&gt;
&lt;li&gt;relation &lt;/li&gt;
&lt;li&gt;multiplier &amp;amp; constant &amp;amp; priority&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;å¯¹äºå€æ•°,åç§»é‡å’Œä¼˜å…ˆçº§éƒ½é»˜è®¤çš„æƒ…å†µå¯ä»¥è¿™æ ·ä¹¦å†™:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;null hljs&quot;&gt;  &lt;span class=&quot;hljs-selector-tag&quot;&gt;first&lt;/span&gt;&lt;span class=&quot;hljs-selector-class&quot;&gt;.attr&lt;/span&gt;&lt;span class=&quot;hljs-selector-class&quot;&gt;.relation&lt;/span&gt;(&lt;span class=&quot;hljs-selector-tag&quot;&gt;second&lt;/span&gt;&lt;span class=&quot;hljs-selector-class&quot;&gt;.attr&lt;/span&gt;)&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;å¦‚æœéœ€è¦é…ç½®ä¸Šè¿°4é‡Œé¢çš„å†…å®¹æ€ä¹ˆä¹¦å†™å‘¢? æœ‰ä¸¤ç§æƒ³æ³•:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;null hljs&quot;&gt;  &lt;span class=&quot;hljs-comment&quot;&gt;// first type&lt;/span&gt;
  &lt;span class=&quot;hljs-built_in&quot;&gt;first&lt;/span&gt;.&lt;span class=&quot;hljs-built_in&quot;&gt;attr&lt;/span&gt;.relation(second.&lt;span class=&quot;hljs-built_in&quot;&gt;attr&lt;/span&gt;).m(&lt;span class=&quot;hljs-number&quot;&gt;1.2&lt;/span&gt;).c(&lt;span class=&quot;hljs-number&quot;&gt;10&lt;/span&gt;).p(&lt;span class=&quot;hljs-number&quot;&gt;750&lt;/span&gt;)&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è¿™æ ·å†™çœ‹èµ·æ¥ä¸é”™. ä½†æ˜¯æœ‰ä¸¤ä¸ªé—®é¢˜:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;é“¾å¼è¡¨è¾¾å¼å¯¼è‡´æœ€ç»ˆè¿”å›çš„ä»ç„¶æ˜¯ä¸€ä¸ªæˆ‘ä»¬è‡ªå®šä¹‰çš„å¯¹è±¡, æƒ³è¦æ‹¿åˆ°&lt;code&gt;NSLayoutConstraint&lt;/code&gt;å¯¹è±¡è¿˜éœ€è¦å†&lt;code&gt;.constraint&lt;/code&gt;ä¸€ä¸‹.&lt;/li&gt;
&lt;li&gt;å¯¹å¤åˆç±»å‹ä¸å‹å¥½. å°±æ˜¯demoä¸­çœ‹åˆ°çš„å¯¹Arrayä½¿ç”¨&lt;code&gt;=/&lt;/code&gt;çš„æƒ…å†µ. ä¸¤ä¸ªarrayæ˜¯zipèµ·æ¥åéå†åˆ›å»ºçº¦æŸ, è¿™æ—¶å€™åªæœ‰ä¸¤ä¸ªå‚æ•°, ä¸å¥½é…ç½®m, c, p.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å› æ­¤å°±å˜é€šäº†ä¸€ä¸‹ä¹¦å†™æ–¹æ³•:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;null hljs&quot;&gt;  &lt;span class=&quot;hljs-comment&quot;&gt;// second type&lt;/span&gt;
  first&lt;span class=&quot;hljs-selector-class&quot;&gt;.attr&lt;/span&gt;&lt;span class=&quot;hljs-selector-class&quot;&gt;.relation&lt;/span&gt;(second&lt;span class=&quot;hljs-selector-class&quot;&gt;.attr&lt;/span&gt;&lt;span class=&quot;hljs-selector-class&quot;&gt;.m&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;1.2&lt;/span&gt;).c(&lt;span class=&quot;hljs-number&quot;&gt;10&lt;/span&gt;).p(&lt;span class=&quot;hljs-number&quot;&gt;750&lt;/span&gt;))&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ä¹Ÿå°±æ˜¯æŠŠç¬¬4é¡¹çš„m, c, p å’Œ ç¬¬äºŒé¡¹çš„itemå’Œattributeç»“åˆåœ¨ä¸€èµ·. è¿™æ ·å°±æ¼”å˜æˆäº†&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;null hljs&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;A&lt;/span&gt; relation B&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è¿™é‡Œåˆæœ‰ä¸¤ç§åšæ³•:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Aå’ŒBåˆ†åˆ«æ˜¯ä¸¤ä¸ªç±»å‹, Aå¯ä»¥åšå·¦å€¼å’Œå³å€¼, Båªåšå³å€¼. æ¯•ç«ŸBå¸¦ç€m, c, på»åšå·¦å€¼ç¡®å®ä¸å¤ªå¥½. ä½†æ˜¯è¿™æ ·å°±æœ‰ä¸ªé—®é¢˜, æƒ³è¦æ”¯æŒç›´æ¥ç”¨æ•°å­—é…ç½®çš„æ—¶å€™, Bæ€ä¹ˆè¡¨è¾¾? ç”¨AnyObjectä¹ˆ? &lt;/li&gt;
&lt;li&gt;Aå’ŒBåˆ†åˆ«æ˜¯ä¸¤ä¸ªprotocol, è¿™æ ·é¿å…äº†AnyObjectçš„é—®é¢˜, å¹¶ä¸”èƒ½å¯¹å‚æ•°è¿›è¡Œçº¦æŸ. åŠ ä¸Šswiftä¹Ÿæ˜¯å¯ä»¥ç»™å·²æœ‰ç±»å‹å†™extensionçš„, æ‰€ä»¥ç”¨protocolæŠ½è±¡æ¯”è¾ƒå¥½, å‚æ•°ä¸ç”¨æ˜¯AnyObjecté‚£ä¹ˆå®½æ³›.&lt;/li&gt;
&lt;/ol&gt;
&lt;h4 id=&quot;æ¥å£çš„è§„åˆ’&quot;&gt;&lt;a href=&quot;#æ¥å£çš„è§„åˆ’&quot; class=&quot;headerlink&quot; title=&quot;æ¥å£çš„è§„åˆ’&quot;&gt;&lt;/a&gt;æ¥å£çš„è§„åˆ’&lt;/h4&gt;&lt;p&gt;&lt;code&gt;RelationMakeable&lt;/code&gt;å’Œ&lt;code&gt;AttributeContainer&lt;/code&gt;å°±åˆ†åˆ«æ˜¯Aå’ŒB, å¹¶ä¸”Aç»§æ‰¿B. &lt;code&gt;RelationMakeable&lt;/code&gt;æœ‰equal, lessOrEqual å’Œ greatOrEqualæ–¹æ³•. &lt;code&gt;AttributeContainer&lt;/code&gt;æœ‰ m, c, pçš„æ–¹æ³•, å¹¶ä¸”æœ‰ä¸€ä¸ª&lt;code&gt;generateX&lt;/code&gt;æ–¹æ³•æ¥ç”Ÿæˆä¸€ä¸ªçœŸæ­£ä¿å­˜ä¿¡æ¯çš„æ•°æ®&lt;code&gt;XAttributeX&lt;/code&gt;æ¥å‚ä¸ç”Ÿæˆçº¦æŸ. &lt;/p&gt;
&lt;p&gt;è°ƒç”¨m, c, p, ä»¥åŠå»ºç«‹å…³ç³»çš„è¡Œä¸ºå¯ä»¥ç”¨protocolé»˜è®¤å®ç°æ¥ç®€åŒ–å…¶ä»–ç±»å‹çš„extension. è¿™æ ·ä¸€ä¸ªç±»å‹ä»…éœ€å£°æ˜ä¸€ä¸‹extension, å†æ·»åŠ &lt;code&gt;generateX&lt;/code&gt;æ–¹æ³•å°±å¯ä»¥åŠ å…¥è¿™ä¸ªä½“ç³»äº†, æ¯”å¦‚iOSæä¾›çš„&lt;code&gt;NSLayoutAnchor&lt;/code&gt;.&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;swift hljs&quot;&gt;&lt;span class=&quot;hljs-meta&quot;&gt;@available&lt;/span&gt;(iOS &lt;span class=&quot;hljs-number&quot;&gt;9.0&lt;/span&gt;, *)
&lt;span class=&quot;hljs-class&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;extension&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;NSLayoutAnchor&lt;/span&gt;: &lt;span class=&quot;hljs-title&quot;&gt;RelationMakeable&lt;/span&gt; &lt;/span&gt;{
    &lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;generateX&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;()&lt;/span&gt;&lt;/span&gt; -&amp;gt; &lt;span class=&quot;hljs-type&quot;&gt;XAttributeX&lt;/span&gt; {
        &lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; item = valueForKey(&lt;span class=&quot;hljs-string&quot;&gt;&quot;item&quot;&lt;/span&gt;)!
        &lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; attr = &lt;span class=&quot;hljs-type&quot;&gt;NSLayoutAttribute&lt;/span&gt;(rawValue: valueForKey(&lt;span class=&quot;hljs-string&quot;&gt;&quot;attr&quot;&lt;/span&gt;) &lt;span class=&quot;hljs-keyword&quot;&gt;as&lt;/span&gt;! &lt;span class=&quot;hljs-type&quot;&gt;Int&lt;/span&gt;)!
        &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-type&quot;&gt;XAttributeX&lt;/span&gt;(item: item, attr: attr)
    }
}

v1.xTop =/ v2.bottomAnchor.&lt;span class=&quot;hljs-built_in&quot;&gt;c&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;10&lt;/span&gt;)&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ç„¶åUIViewè¿™æ ·çš„ä¸»è§’éœ€è¦çš„æ˜¯ä¸€äº›propertyæ¥è¡¨è¾¾&lt;code&gt;item + attr&lt;/code&gt;:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;swift hljs&quot;&gt;&lt;span class=&quot;hljs-class&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;extension&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;UIView&lt;/span&gt; &lt;/span&gt;{
    &lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; xLeft: &lt;span class=&quot;hljs-type&quot;&gt;XAttribute&lt;/span&gt; { &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-type&quot;&gt;XAttribute&lt;/span&gt;(item: &lt;span class=&quot;hljs-keyword&quot;&gt;self&lt;/span&gt;, attr: .&lt;span class=&quot;hljs-type&quot;&gt;Left&lt;/span&gt;) }
    &lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; xRight: &lt;span class=&quot;hljs-type&quot;&gt;XAttribute&lt;/span&gt; { &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-type&quot;&gt;XAttribute&lt;/span&gt;(item: &lt;span class=&quot;hljs-keyword&quot;&gt;self&lt;/span&gt;, attr: .&lt;span class=&quot;hljs-type&quot;&gt;Right&lt;/span&gt;) }
    ... some more
}&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ç„¶å&lt;code&gt;UILayoutSupport&lt;/code&gt;ä¹Ÿå¯ä»¥è½»æ¾åŠ å…¥:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;swift hljs&quot;&gt;&lt;span class=&quot;hljs-class&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;extension&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;UILayoutSupport&lt;/span&gt; &lt;/span&gt;{
    &lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; xTop: &lt;span class=&quot;hljs-type&quot;&gt;XAttribute&lt;/span&gt; { &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-type&quot;&gt;XAttribute&lt;/span&gt;(item: &lt;span class=&quot;hljs-keyword&quot;&gt;self&lt;/span&gt;, attr: .&lt;span class=&quot;hljs-type&quot;&gt;Top&lt;/span&gt;) }
    &lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; xBottom: &lt;span class=&quot;hljs-type&quot;&gt;XAttribute&lt;/span&gt; { &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-type&quot;&gt;XAttribute&lt;/span&gt;(item: &lt;span class=&quot;hljs-keyword&quot;&gt;self&lt;/span&gt;, attr: .&lt;span class=&quot;hljs-type&quot;&gt;Bottom&lt;/span&gt;) }
    &lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; xHeight: &lt;span class=&quot;hljs-type&quot;&gt;XAttribute&lt;/span&gt; { &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-type&quot;&gt;XAttribute&lt;/span&gt;(item: &lt;span class=&quot;hljs-keyword&quot;&gt;self&lt;/span&gt;, attr: .&lt;span class=&quot;hljs-type&quot;&gt;Height&lt;/span&gt;) }
}&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;å› ä¸ºä¸€å¼€å§‹å°±è€ƒè™‘äº†è¦æ”¯æŒArray, æ‰€ä»¥ç»™UIViewä¹ŸåŠ ä¸Šäº†å‡ ä¸ªå¤åˆå±æ€§:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;swift hljs&quot;&gt;&lt;span class=&quot;hljs-class&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;extension&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;UIView&lt;/span&gt; &lt;/span&gt;{
    &lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; xSize: [&lt;span class=&quot;hljs-type&quot;&gt;RelationMakeable&lt;/span&gt;] {
        &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; [xWidth, xHeight]
    }
    &lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; xCenter: [&lt;span class=&quot;hljs-type&quot;&gt;RelationMakeable&lt;/span&gt;] {
        &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; [xCenterX, xCenterY]
    }
    ... some more
}&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ä½†å…¶å®å¯ä»¥éšæ„ç»„åˆ, æ¯”å¦‚:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;swift hljs&quot;&gt;[v.xTop,v.xLeading] =/ [&lt;span class=&quot;hljs-number&quot;&gt;10&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;20&lt;/span&gt;]&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;arrayé‡Œé¢ä¹Ÿèƒ½å†™nil, è¡¨è¾¾è¿™ä¸ªä½ç½®ä¸è¿›è¡Œé…ç½®, æ¯”å¦‚:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;swift hljs&quot;&gt;v.xEdge =/ [&lt;span class=&quot;hljs-literal&quot;&gt;nil&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;] 
v.xHeight =/ &lt;span class=&quot;hljs-number&quot;&gt;200&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è¿™æ ·å°±è¡¨è¾¾äº†å·¦ä¸‹å³ä¸‰è¾¹ç´§è´´çˆ¶view, topä¸é…ç½®. ç„¶åå†ç»™vè®¾ç½®é«˜åº¦ä¸º200.&lt;/p&gt;
&lt;h2 id=&quot;åµŒå¥—ä¹¦å†™&quot;&gt;&lt;a href=&quot;#åµŒå¥—ä¹¦å†™&quot; class=&quot;headerlink&quot; title=&quot;åµŒå¥—ä¹¦å†™&quot;&gt;&lt;/a&gt;åµŒå¥—ä¹¦å†™&lt;/h2&gt;&lt;p&gt;ç”¨&lt;code&gt;xmakeConstraint&lt;/code&gt;åˆ›å»ºçº¦æŸæ—¶, åˆ›å»ºçš„è¯­å¥æ˜¯å†™åœ¨é—­åŒ…é‡Œé¢, å¹¶ä¸”è¿˜å¯ä»¥æ§åˆ¶å¸ƒå±€æ–¹å‘å’Œæ˜¯å¦è‡ªåŠ¨æ¿€æ´». ä¹Ÿå°±æ˜¯è¯´é—­åŒ…é‡Œé¢çš„çº¦æŸæ˜¯åŒä¸€ç»„, æ¥å—åŒæ ·çš„é…ç½®. but how? &lt;/p&gt;
&lt;p&gt;æŒ æŒ å¤´, å› ä¸ºåˆ›å»ºçº¦æŸçš„è¿‡ç¨‹æ˜¯å†…éƒ¨æ§åˆ¶, æˆ‘èƒ½å‡†ç¡®åœ°çŸ¥é“åˆ›å»ºçš„æ—¶æœº, å› æ­¤æˆ‘åˆ›å»ºäº†ä¸€ä¸ªç§æœ‰ä¸Šä¸‹æ–‡å¯¹è±¡, è®°å½•ä¸€ç»„çº¦æŸçš„é…ç½®ä¿¡æ¯, é—­åŒ…é‡Œé¢çš„çº¦æŸéƒ½åœ¨è¿™ä¸ªä¸Šä¸‹æ–‡å†…æ ¹æ®æ–¹å‘å»åˆ›å»º, å¹¶å†³å®šæ˜¯å¦ç›´æ¥æ¿€æ´». &lt;/p&gt;
&lt;p&gt;å› ä¸ºé—­åŒ…é‡Œé¢è¿˜å¯ä»¥ç»§ç»­åµŒå¥—è°ƒç”¨&lt;code&gt;xmakeConstraint&lt;/code&gt;, å› æ­¤, ä¸Šä¸‹æ–‡éœ€è¦åšæˆæ ˆ, æ¯ä¸€æ¬¡è°ƒç”¨å°±pushä¸€ä¸ªæ–°çš„ä¸Šä¸‹æ–‡, è°ƒç”¨ç»“æŸå°±popæ‰.&lt;/p&gt;
&lt;p&gt;ç³»ç»Ÿåˆ›å»ºçš„çº¦æŸé»˜è®¤æ˜¯ä¸æ¿€æ´»çš„, å› æ­¤, æ ˆé‡Œé¢é»˜è®¤æœ‰ä¸€ä¸ªæ–¹å‘æ˜¯&lt;strong&gt;LeadingToTrailing&lt;/strong&gt;, é»˜è®¤ä¸è‡ªåŠ¨æ¿€æ´»çš„ä¸Šä¸‹æ–‡. ä¸åœ¨&lt;code&gt;xmakeConstraint&lt;/code&gt;çš„é—­åŒ…é‡Œ, è€Œæ˜¯ç›´æ¥è£¸å†™çš„çº¦æŸæ‰ä¼šä½¿ç”¨è¿™ä¸ªä¸Šä¸‹æ–‡. ä½†è¿™æ ·å¸¦æ¥ä¸€ä¸ªå°é—®é¢˜, å¦‚æœåœ¨é—­åŒ…ä¸­è°ƒç”¨äº†ä¸€ä¸ªæ–¹æ³•, æ–¹æ³•å†…éƒ¨æœ‰è£¸å†™çš„çº¦æŸ, åˆ™å…¶å®è¿™äº›çœ‹èµ·æ¥è£¸å†™çš„çº¦æŸä¹Ÿè¿˜æ˜¯å¤„åœ¨åŒä¸€ä¸ªä¸Šä¸‹æ–‡ä¸­. å› æ­¤æœ€å¥½éƒ½è°ƒç”¨&lt;code&gt;xmakeConstraint&lt;/code&gt;æ¥å†™çº¦æŸ. &lt;/p&gt;
&lt;h2 id=&quot;æ–¹å‘&quot;&gt;&lt;a href=&quot;#æ–¹å‘&quot; class=&quot;headerlink&quot; title=&quot;æ–¹å‘&quot;&gt;&lt;/a&gt;æ–¹å‘&lt;/h2&gt;&lt;p&gt;äººç±»çš„è¯­è¨€æœ‰ä»å·¦åˆ°å³, ä»å³åˆ°å·¦, ç«–ç›´æ–¹å‘è¿˜å¥½éƒ½æ˜¯ä»ä¸Šåˆ°ä¸‹. æ‰€ä»¥è‹¹æœç»™äº†3ä¸ªæ–¹å‘çš„é€‰æ‹©: åˆ†åˆ«æ˜¯LeadingToTrailing, LeftToRightå’ŒRightToLeft, è¡¨è¾¾æ˜¯å¦ç”±ç³»ç»Ÿè¯­è¨€æ¥å†³å®šå¸ƒå±€æ–¹å‘. è¿™ä¸ªå‚æ•°æ˜¯åœ¨VFLä¸­ä½¿ç”¨, è€ŒéVFLä¸­æ˜¯æ²¡æ³•ä½¿ç”¨çš„. &lt;/p&gt;
&lt;h4 id=&quot;å­˜åœ¨çš„é—®é¢˜-1&quot;&gt;&lt;a href=&quot;#å­˜åœ¨çš„é—®é¢˜-1&quot; class=&quot;headerlink&quot; title=&quot;å­˜åœ¨çš„é—®é¢˜&quot;&gt;&lt;/a&gt;å­˜åœ¨çš„é—®é¢˜&lt;/h4&gt;&lt;p&gt;æåˆ°æ–¹å‘å°±ä¸å¾—ä¸å¤šèŠå‡ å¥. VFLé‡Œé¢æŒ‡å®šæ–¹å‘ä¸ºæ˜ç¡®çš„å·¦åˆ°å³æˆ–è€…å³åˆ°å·¦æ—¶, åˆ›å»ºå‡ºæ¥çš„çº¦æŸä¸­, Leadingå’ŒTrailingä¼šæ ¹æ®æ–¹å‘è¢«ç›´æ¥è½¬æ¢ä¸º&lt;strong&gt;Left&lt;/strong&gt;æˆ–è€…&lt;strong&gt;Right&lt;/strong&gt;. è¿˜æœ‰ä¸€ä¸ªå°é—®é¢˜, è™½ç„¶è½¬æ¢äº†æ–¹å‘, åœ¨è®¡ç®—åæ ‡æ—¶ä»ç„¶æ˜¯ä»å·¦å‘å³, ä»ä¸Šåˆ°ä¸‹. å¹³æ—¶ä½¿ç”¨æ—¶ä¸€èˆ¬å€æ•°éƒ½æ˜¯1, æ‰€ä»¥ä¸ä¼šæœ‰å•¥å½±å“, åªæœ‰å€æ•°ä¸ä¸º1æ—¶æ‰æœ‰ç‚¹å„¿ç§€é€—. ä¸»è¦åŸå› æ˜¯ä½ç½®è®¡ç®—å‘ç”Ÿåœ¨firstItemå’ŒsecondItemçš„æœ€ä½å…¬å…±çˆ¶viewçš„åæ ‡ç³»ä¸­, å±‚çº§å…³ç³»ä¸åŒå¯èƒ½å¯¼è‡´å‚ç…§ç³»ä¸åŒ, æ¥ç€å¯¼è‡´è®¡ç®—å€æ•°æ—¶çš„åŸºå‡†å€¼ä¸åŒ. ä¸è¿‡ä¸€èˆ¬ä¸å»ºè®®ç»™ä½ç½®è¿™æ ·çš„attributeè®¾ç½®å€æ•°, å¦åˆ™ç»“æœå¯èƒ½å®Œå…¨ä¸æ˜¯ä½ æƒ³è±¡çš„.&lt;/p&gt;
&lt;p&gt;è¿˜æœ‰ä¸€ä¸ªå˜åŒ–æ˜¯iOS9ä¸­å¯¹æ°´å¹³æ–¹å‘çš„attributeåšäº†é™åˆ¶. çœ‹ä¸€ä¸‹exceptionçš„ä¿¡æ¯:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt; constraint cannot be made between a leading/trailing attribute and a right/left attribute. Use leading/trailing for both or neither.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;ä¹Ÿæ­£å¦‚å®ƒæ‰€è¯´, åªcheckæ°´å¹³æ–¹å‘çš„, è¦ä¹ˆéƒ½æ˜¯leading/trailing, è¦ä¹ˆéƒ½æ˜¯left/right. å¦‚æœæ˜¯leadingå’Œtopä¹‹ç±»çš„å®ƒå°±ä¸ç®¡... ä¸è¿‡è®²çœŸ, æ‹¿æ°´å¹³æ–¹å‘å’Œå‚ç›´æ–¹å‘çš„ä½ç½®å±æ€§åšçº¦æŸè¿˜æ˜¯æœ‰ç‚¹å„¿é‚£å•¥...&lt;/p&gt;
&lt;h4 id=&quot;å±æ€§è½¬æ¢&quot;&gt;&lt;a href=&quot;#å±æ€§è½¬æ¢&quot; class=&quot;headerlink&quot; title=&quot;å±æ€§è½¬æ¢&quot;&gt;&lt;/a&gt;å±æ€§è½¬æ¢&lt;/h4&gt;&lt;p&gt;&lt;code&gt;xmakeConstraint&lt;/code&gt;æ–¹æ³•æœ‰directionå‚æ•°, è¡¨è¾¾è¿™ä¸€ç»„çº¦æŸçš„æ–¹å‘ä¿¡æ¯. ä»€ä¹ˆæ—¶å€™ç”Ÿæ•ˆå‘¢? éµå¾ªVFLçš„åšæ³•, ä»…å½“æ–¹å‘ä¸ä¸º&lt;strong&gt;LeadingToTrailing&lt;/strong&gt;å¹¶ä¸”attributeæ˜¯Leadingæˆ–è€…Trailingæ—¶æ‰ä¼šå°†attributeè½¬æ¢ä¸ºLeftæˆ–è€…Right.&lt;/p&gt;
&lt;p&gt;å½“ç„¶ä¹Ÿä¸æ˜¯é‡åˆ°å°±è½¬æ¢, æ¡ä»¶è¿˜æ˜¯æœ‰çš„. å†çœ‹çœ‹ç³»ç»Ÿå¯èƒ½çš„è¡Œä¸º: VFLå¯ä»¥æŒ‡å®šæ–¹å‘, ä½†æ˜¯å—å½±å“çš„çº¦æŸçš„ä¸¤ä¸ªattributeè‚¯å®šæ˜¯æ°´å¹³æ–¹å‘çš„Leading/Trailing. ä¸ç”¨VFLæ—¶, å¯ä»¥éšæ„ä¸€äº›, æ°´å¹³æ–¹å‘çš„å±æ€§å¯ä»¥å’Œå‚ç›´æ–¹å‘çš„æˆ–è€…centerç­‰åšçº¦æŸ. ä¹Ÿå°±æ˜¯ä¸ç”¨éƒ½æ˜¯æ°´å¹³æ–¹å‘çš„å±æ€§. åŒæ—¶iOSé’ˆå¯¹äº†å°‘é‡çš„å‡ ç§ä¸é…å¯¹æƒ…å†µæŠ›å‡ºå¼‚å¸¸.&lt;/p&gt;
&lt;p&gt;ä¸ºäº†æœ€å¤§ç¨‹åº¦å’Œç³»ç»Ÿè¡Œä¸ºä¸€è‡´, åˆ›å»ºçº¦æŸæ—¶è¦å…ˆæ£€æŸ¥attributeæ˜¯å¦èƒ½é…å¯¹, libé‡Œé¢ä¸»åŠ¨æŠ›å‡ºçš„å¼‚å¸¸å°±ä¸€ä¸ª, å°±æ˜¯æ–¹å‘ä¸ä¸ºLeadingToTrailingå¹¶ä¸”åªæœ‰ä¸€ä¸ªå±æ€§æ˜¯leading/trailing, å¦ä¸€ä¸ªä¸æ˜¯æ°´å¹³æ–¹å‘å±æ€§. è¿™ç§æƒ…å†µä¸‹æˆ‘ä¸çŸ¥é“è¯¥ä¸è¯¥è½¬æ¢, è€Œä¸”è¿™ç§æƒ…å†µç”¨åŸç”ŸAPIæ˜¯æ„é€ ä¸å‡ºæ¥çš„. å…¶ä»–ä¸é…å¯¹çš„æƒ…å†µlibä¸å¤„ç†, ç•™ç»™iOSæ¥è®©æŠ›å¼‚å¸¸æé†’ä½ å§.&lt;/p&gt;
&lt;p&gt;å¦‚æœé…å¯¹æ£€æŸ¥è¿‡äº†, å—RightToLeftæ–¹å‘å½±å“çš„çº¦æŸéœ€è¦æŠŠconstant ä¹˜ -1. &lt;/p&gt;
&lt;h2 id=&quot;æ‰©å±•æ•°å­—ç±»å‹&quot;&gt;&lt;a href=&quot;#æ‰©å±•æ•°å­—ç±»å‹&quot; class=&quot;headerlink&quot; title=&quot;æ‰©å±•æ•°å­—ç±»å‹&quot;&gt;&lt;/a&gt;æ‰©å±•æ•°å­—ç±»å‹&lt;/h2&gt;&lt;p&gt;ä¸ºäº†æ–¹ä¾¿, åœ¨è®¾ç½®ä½ç½®ç±»å‹çš„å±æ€§æ—¶, å¯ä»¥ç›´æ¥è®¾ç½®æ•°å­—, è¿™æ ·secondItemå°±é»˜è®¤æ˜¯firstItemçš„superView, åªè¦firstItemæ˜¯ä¸€ä¸ªUIviewçš„è¯. è¿™å°±æ„å‘³ç€æ•°å­—ä¹Ÿæ˜¯&lt;code&gt;AttributeContainer&lt;/code&gt;. &lt;/p&gt;
&lt;p&gt;swifté‡Œé¢æœ‰å¾ˆå¤šç§æ•°å­—ç±»å‹, æˆ‘ä¸å¾—ä¸å¯¹æ¯ä¸€ç§éƒ½å£°æ˜extension. å£°æ˜ä¸€ä¸ªextensionå°±éœ€è¦å†™ä¸€æ¬¡&lt;code&gt;generateX&lt;/code&gt;æ–¹æ³•, çœ‹èµ·æ¥å¥½ç¹ç. äºæ˜¯æ²¿ç€è¿™äº›æ•°å­—å®ç°çš„åè®®é“¾å¾€ä¸Šæ‰¾, æœ€ç»ˆé€‰æ‹©äº†æ‰©å±•&lt;code&gt;SignedNumberType&lt;/code&gt; å’Œ &lt;code&gt;UnsignedIntegerType&lt;/code&gt;æ¥å®ç°&lt;code&gt;generateX&lt;/code&gt;. è¿™æ ·æ‰€æœ‰çš„æ•°å­—ç±»å‹å°±éƒ½æœ‰äº†&lt;code&gt;generateX&lt;/code&gt;å®ç°. &lt;/p&gt;
&lt;h2 id=&quot;åæ§½Masonry&quot;&gt;&lt;a href=&quot;#åæ§½Masonry&quot; class=&quot;headerlink&quot; title=&quot;åæ§½Masonry&quot;&gt;&lt;/a&gt;åæ§½Masonry&lt;/h2&gt;&lt;p&gt;è¯´å®è¯, ç¬¬ä¸€æ¬¡çœ‹è¿™ä¸ªåº“å°±è§‰å¾—åšå¤æ‚äº†. è€Œä¸”ä¸€äº›æƒ³æ³•æŒºå¥‡æ€ªçš„, ä»£ç ä¸­è¿˜æœ‰ä¸€äº›æ¬ è€ƒè™‘çš„åœ°æ–¹, åˆ†åˆ†é’Ÿå‡ºbug.&lt;/p&gt;
&lt;p&gt;å®ƒåˆ›å»ºçº¦æŸçš„åˆ†ç»„æƒ³æ³•å’Œæˆ‘ä¸ä¸€æ ·, å®ƒæ˜¯é’ˆå¯¹æ¯ä¸ªviewå»å†™ä¸€ç»„è¿™ä¸ªviewä½œä¸ºfirstItemçš„çº¦æŸ, å¹¶ä¸”åˆ¶çº¦äº†è£¸å†™çº¦æŸçš„å¯èƒ½æ€§, è¿™æ ·çš„å¥½å¤„æ˜¯ä¸ç”¨careåµŒå¥—çš„é—®é¢˜, ä½†æ˜¯ä¼šå¯¼è‡´ä¹¦å†™çš„é—­åŒ…å¾ˆå¤š.&lt;/p&gt;
&lt;p&gt;å®ƒæœ‰ä¸ª&lt;code&gt;MASLayoutConstraint&lt;/code&gt;çš„ç±»ç»§æ‰¿è‡ª&lt;code&gt;NSLayoutConstraint&lt;/code&gt;,  makeæ—¶ç”Ÿæˆçš„çº¦æŸå…¨éƒ½æ˜¯è¿™ä¸ªå­ç±». updateå’Œremakeæ–¹æ³•éƒ½åªè·Ÿè‡ªå·±çš„ä½“ç³»ç©å„¿, è¿™äº›æ“ä½œåªè®¤è¿™ä¸ªç±», ä¹Ÿå°±æ˜¯è¯´é™¤éä½ å…³äºè¿™ä¸ªviewçš„æ‰€æœ‰çº¦æŸéƒ½æ˜¯ç”¨Masonryåš, å¦åˆ™updateå’Œremakeæ–¹æ³•æ²¡ç”¨. å¯¹äºæœ‰ç”¨åˆ°storyboardè€Œåªæƒ³ç”¨ä¸€ä¸ªlibæ¥ç®€åŒ–éƒ¨åˆ†çº¦æŸç¼–å†™çš„äººæ¥è¯´, åªæœ‰makeé‚£ä¸ªæ–¹æ³•æ•¢ç”¨. &lt;/p&gt;
&lt;p&gt;updateè¿™ä¸ªæ–¹æ³•ä¼šå»æŸ¥è¯¢&lt;strong&gt;ç›¸ä¼¼&lt;/strong&gt;çš„çº¦æŸ, ç„¶åæ›´æ–°è¿™ä¸ªç›¸ä¼¼çº¦æŸçš„constantè€Œä¸æ˜¯æ¿€æ´»æ–°çš„çº¦æŸ. çœ‹Masonryçš„é€»è¾‘, å®ƒæŠŠè¿™ä¸ªæ¦‚å¿µå®šä¹‰ä¸ºé™¤äº†constantä»¥å¤–å…¶ä»–å±æ€§å…¨éƒ½ç›¸åŒçš„ä¸¤ä¸ªçº¦æŸæ˜¯ç›¸ä¼¼çš„. ä½†æ˜¯åœ¨AutoLayouté‡Œé¢æ ¹æœ¬å°±æ²¡æœ‰ç›¸ä¼¼è¿™ä¸ªæ¦‚å¿µ, æ‰€ä»¥æˆ‘è§‰å¾—ä¸åº”è¯¥ç”Ÿé€ å‡ºè¿™ä¹ˆä¸ªæ¦‚å¿µ. è€Œä¸”çº¦æŸæ˜¯åŒå‘å½±å“, ä¸‹é¢çš„ä¸¤ä¸ªçº¦æŸæ˜¯å®Œå…¨ç­‰ä»·çš„:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;swift hljs&quot;&gt;v1.xTop =/ v2.xBottom.&lt;span class=&quot;hljs-built_in&quot;&gt;c&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;10&lt;/span&gt;)
v2.xBottom =/ v1.xTop(-&lt;span class=&quot;hljs-number&quot;&gt;10&lt;/span&gt;)&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è¿™åœ¨Masonryé‡Œé¢å´ä¼šè¢«åˆ¤å®šä¸º&lt;strong&gt;ä¸ç›¸ä¼¼&lt;/strong&gt;çš„çº¦æŸ.&lt;/p&gt;
&lt;p&gt; å®ƒçš„ReadMeé‡Œé¢æœ‰è¿™ä¹ˆä¸€å¥è¯:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Alternatively if you are only updating the constant value of the constraint you can use the convience method mas_updateConstraints instead of mas_makeConstraints.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;å®é™…çŠ¶å†µæ˜¯, å¦‚æœåœ¨ä¸€ä¸ªåœ°æ–¹åˆ›å»º, åœ¨å¦ä¸€ä¸ªåœ°æ–¹update, è¿™ä¸¤å¤„çš„firstå’Œsecondå¿…é¡»å†™å¾—ä¸€æ ·æ‰è¡Œ. å¦åˆ™å“ªæ€•æˆ‘åªæ˜¯æ›´æ–°constant, å°±ä¼šå› ä¸ºçº¦æŸç”¨äº†å¦ä¸€ä¸ªç­‰ä»·å½¢å¼å°±ä¼šæ¿€æ´»æ–°çš„çº¦æŸä¸æ—§çš„å¹¶å­˜. ä¸€èˆ¬æƒ…å†µä¸‹è¿™æ ·éƒ½ä¼šå¯¼è‡´çº¦æŸå†²çª, å¦‚æœä¸èƒ½è‡ªåŠ¨è§£å†³å°±crashäº†, ä½†ä¸ç®¡æ€æ ·éƒ½ä¸æ˜¯å¼€å‘è€…æƒ³çœ‹åˆ°çš„.&lt;/p&gt;
&lt;p&gt;è€Œä¸”æŸ¥æ‰¾ç›¸ä¼¼è¿™ä¸ªå·¥ä½œæœ¬æ¥åº”è¯¥æ˜¯è¦é€’å½’åˆ°windowå»çš„, å› ä¸ºçº¦æŸä¸æ˜¯å¿…é¡»æ”¾åœ¨æœ€ä½å…¬å…±çˆ¶viewä¸Š. ä¸çŸ¥é“æ˜¯ä¸æ˜¯å› ä¸ºè€ƒè™‘åˆ°äº†è¿™ä¸ªæ•ˆç‡é—®é¢˜, æ‰å†³å®šåªè·Ÿè‡ªå·±ç©å„¿, è‡ªå·±åˆ›å»ºçš„çº¦æŸ, è‡ªå·±æ‰¾æœ€ä½å…¬å…±çˆ¶viewæ¥æ¿€æ´», è®°å½•ä¸‹installed view, ç„¶åæ›´æ–°çš„æ—¶å€™åªåœ¨è¿™ä¸ªviewä¸Šæ‰¾ç›¸ä¼¼.&lt;/p&gt;
&lt;p&gt;remakeæ–¹æ³•æ˜¯åˆ æ‰æœ‰è¿™ä¸ªviewå‚ä¸çš„çº¦æŸç„¶åæ¿€æ´»é—­åŒ…é‡Œçš„çº¦æŸ. å®é™…ä½¿ç”¨èµ·æ¥ä¼šéå¸¸æ£è‚˜. åŸå› ä¸»è¦ä¹Ÿæ˜¯å› ä¸ºMasonryåªè·Ÿè‡ªå·±ç©å„¿.&lt;/p&gt;
&lt;p&gt;Masonryä¸ºäº†èƒ½å¤Ÿæ”¯æŒå„ä¸ªç±»å‹çš„å‚æ•°, å¼„äº†ä¸€ä¸ª&lt;code&gt;_MASBoxValue&lt;/code&gt;çš„å®, åˆ©ç”¨encodingæ¥å¯¹å€¼è¿›è¡ŒåŒ…è£…å¹¶è¿”å›idç±»å‹. è¿˜ç”¨äº†é»‘é­”æ³•æ¥æ”¹å˜å»ºç«‹å…³ç³»çš„æ–¹æ³•. æœ‰äººè§‰å¾—æŒºç‰›é€¼çš„, æˆ‘è§‰å¾—æŒºä¸å¥½çš„. è§ä»è§æ™º?&lt;/p&gt;
&lt;p&gt;ç„¶åå¯¹äºå¤åˆå±æ€§çš„æ”¯æŒä¹Ÿä¸æ€ä¹ˆå‹å¥½, å†…éƒ¨å®ç°ä¸­å¼„äº†ä¸ªdelegateæ¥æŠŠä¸€ä¸ªå¤åˆå˜æˆå¤šä¸ªçº¦æŸ, çœŸå¿ƒå¤ªå¤æ‚äº†. &lt;/p&gt;
&lt;p&gt;æ€»ä¹‹æ˜¯è§‰å¾—Masonryæƒ³çš„å¤ªå¤š, åšå¾—ä¸å¥½. ä¸è¿‡æœ‰äº›æ€è·¯è¿˜æ˜¯å¯ä»¥å€Ÿé‰´çš„, æ¯”å¦‚åˆ©ç”¨ç¼–è¯‘å™¨æ¥å—æ— å‚æ•°æœ‰è¿”å›å€¼çš„æ–¹æ³•å½“readonlyçš„propertyçš„getterè°ƒç”¨è¿™ä¸ªtrickyçš„åœ°æ–¹, ç”¨åœ†æ‹¬å·å’Œ&lt;code&gt;.&lt;/code&gt;å®ç°äº†é“¾å¼è°ƒç”¨è¯­æ³•.&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;objc hljs&quot;&gt;&lt;span class=&quot;hljs-comment&quot;&gt;// no property named test&lt;/span&gt;
-(BlockType)test;

&lt;span class=&quot;hljs-comment&quot;&gt;// can be called like readonly property&lt;/span&gt;
xxx.test();&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;BlockTypeå¦‚æœæœ‰å‚æ•°å’Œè¿”å›å€¼, è¿™ä¸ª&lt;code&gt;.()&lt;/code&gt;è°ƒç”¨çš„æ“ä½œå°±èƒ½ç»§ç»­ä¸‹å». ä¸è¿‡ä¾èµ–è¿™ç§ç¼–è¯‘å™¨çš„trickyç‰¹æ€§æ€»è§‰å¾—ä¸å®‰å…¨.&lt;/p&gt;
&lt;p&gt;ä»ç„¶åªæ”¯æŒiOS7, å¯¼è‡´ä¸èƒ½ç”¨8æ‰æœ‰çš„activeå±æ€§æ¥æ¿€æ´»çº¦æŸ. ä¸è¿‡çœ‹Masonryçš„å®ç°, ä½“ç³»é‡Œé¢å¯¹æœ€ä½å…¬å…±çˆ¶viewä¾èµ–æ¯”è¾ƒå¤š, å°±ç®—åˆ°8ä¹Ÿçœä¸äº†å¤šå°‘ä»£ç .&lt;/p&gt;
&lt;h2 id=&quot;å†™åœ¨æœ€å&quot;&gt;&lt;a href=&quot;#å†™åœ¨æœ€å&quot; class=&quot;headerlink&quot; title=&quot;å†™åœ¨æœ€å&quot;&gt;&lt;/a&gt;å†™åœ¨æœ€å&lt;/h2&gt;&lt;p&gt;æˆ‘çš„æƒ³æ³•ä¹Ÿä¸ä¸€å®šå¯¹, ä¸ä¸€å®šå¥½. æˆ‘åªæ˜¯å®¢è§‚åœ°åˆ†æäº†Masonry, åæ§½ä¸å¯¹çš„åœ°æ–¹è¿˜è¯·çœ‹å®¢è°…è§£. æˆ‘è‡ªå·±çš„åº“ä¹Ÿä¸ä¸€å®šå¾ˆå¥½ç”¨, è™½ç„¶æˆ‘è‡ªå·±ä¸€ç›´åœ¨ç”¨~ &lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;å…¶å®æŒºä¸å¥½æ„æ€çš„, 2å¹´å‰çš„çŸ¥è¯†, åŠå¹´å‰çš„åº“, ç°åœ¨æ‰å†™ä¸‹æ¥. sigh...&lt;/p&gt;
    
    </summary>
    
      <category term="æŠ€æœ¯" scheme="/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
      <category term="iOS" scheme="/tags/iOS/"/>
    
      <category term="swift" scheme="/tags/swift/"/>
    
  </entry>
  
  <entry>
    <title>æ”¹ç”¨hexoäº†!</title>
    <link href="/2016/04/13/%E6%94%B9%E7%94%A8hexo%E4%BA%86/"/>
    <id>/2016/04/13/æ”¹ç”¨hexoäº†/</id>
    <published>2016-04-13T13:12:36.000Z</published>
    <updated>2016-04-14T12:23:40.000Z</updated>
    
    <content type="html">&lt;p&gt;æ€é‡å†ä¸‰, è¿˜æ˜¯ä¸ç”¨jekylläº†. Rubyä»€ä¹ˆçš„ç´¯è§‰ä¸çˆ±, æœ€å…³é”®çš„æ˜¯æˆ‘åˆšè£…ä¸Šæœ€æ–°ç‰ˆå°±ç›´æ¥ä¸èƒ½å¯åŠ¨... &lt;/p&gt;
&lt;p&gt;ä»€ä¹ˆ? &lt;span style=&quot;color:rgb(179,62,170)&quot;&gt;&lt;strong&gt;æ²¡æœ‰ç»™ç©ºå®šä¹‰matchæ–¹æ³•&lt;/strong&gt;&lt;/span&gt;. å–‚, è¿˜èƒ½å†è¯¦ç»†ç‚¹å„¿ä¹ˆ? è®©æˆ‘æ€ä¹ˆæ’æŸ¥é—®é¢˜?&lt;/p&gt;
&lt;p&gt;æ­£å¥½å¬æœ‹å‹è¯´&lt;strong&gt;hexo&lt;/strong&gt;, å»ä–äº†ä¸€çœ¼, ç”¨Nodeåšçš„. æ–‡æ¡£çœŸçš„æ˜¯...(çœç•¥åæ§½æ— æ•°). æ“¦æ“¦å˜´, å–å£æ°´. å…¶å®åšå¾—æŒºä¸é”™çš„, é™¤äº†é»˜è®¤ä¸»é¢˜æœ‰ç‚¹å„¿ä¸‘å¤–åŠ æ–‡æ¡£å¾ˆçƒ‚ä»¥å¤–. &lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;p&gt;æŠ˜è…¾äº†å‡ å¤©, åŸºäºä¸€ä¸ªä¸»é¢˜&lt;a href=&quot;https://github.com/pagecho/maupassant&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;maupassant&lt;/a&gt;è¿›è¡Œäº†ä¸å°‘ä¿®æ”¹, åˆ é™¤äº†å¤§é‡æˆ‘ä¸éœ€è¦çš„åŠŸèƒ½, ç„¶åå¤§æ”¹css, markdownè§£æä»¥åŠé«˜äº®. æœ€åé™¤äº†é¡µé¢ç»“æ„å·®ä¸å¤š, å…¶ä»–çš„éƒ½å·®å¾ˆå¤š.&lt;/p&gt;
&lt;p&gt;æˆ‘è¿™ä¹Ÿç®—æ˜¯è‡ªå·±å¼„äº†ä¸ªä¸»é¢˜? &lt;/p&gt;
&lt;p&gt;æˆ‘è§‰å¾—hexoä¸é”™ä¹Ÿè®¸æ˜¯å› ä¸ºæˆ‘æ²¡æœ‰å‘ç°jekyllå¥½ç”¨. åæ­£æˆ‘æš‚æ—¶ä¸ä¼šç”¨jekylläº†. åˆšå¼€å§‹downä¸‹æ¥é»˜è®¤æ¨¡æ¿çš„æ—¶å€™, çœ‹äº†ä¸€ä¸‹package, å¸¦äº†ä¸€äº›category, tagä¹‹ç±»çš„ç”Ÿæˆå™¨, ä¸€ä¸ªmarkdownè§£æå™¨ç”¨çš„marked, ç„¶åè¿˜æœ‰ä¸ªsassè§£æå™¨çš„æ ·å­. é«˜äº®æ˜¯ç”¨çš„&lt;strong&gt;highlight.js&lt;/strong&gt;, è¿™ä¸ªå·²ç»è¢«hexoå†…ç½®äº†.&lt;/p&gt;
&lt;h2 id=&quot;å…¶å®æˆ‘è¿˜æ˜¯è¦åæ§½çš„&quot;&gt;&lt;a href=&quot;#å…¶å®æˆ‘è¿˜æ˜¯è¦åæ§½çš„&quot; class=&quot;headerlink&quot; title=&quot;å…¶å®æˆ‘è¿˜æ˜¯è¦åæ§½çš„!!&quot;&gt;&lt;/a&gt;å…¶å®æˆ‘è¿˜æ˜¯è¦åæ§½çš„!!&lt;/h2&gt;&lt;p&gt;ä¸è¿‡æ§½ç‚¹å¹¶ä¸æ˜¯å¾ˆå¤š, å—¯.&lt;/p&gt;
&lt;h3 id=&quot;é…ç½®æ–‡ä»¶&quot;&gt;&lt;a href=&quot;#é…ç½®æ–‡ä»¶&quot; class=&quot;headerlink&quot; title=&quot;é…ç½®æ–‡ä»¶&quot;&gt;&lt;/a&gt;é…ç½®æ–‡ä»¶&lt;/h3&gt;&lt;p&gt;å…¶å®æˆ‘å¾ˆå–œæ¬¢&lt;code&gt;gulp&lt;/code&gt;çš„æƒ³æ³•. æ‰”æ‰é”®å€¼å¯¹çš„é…ç½®æ–‡ä»¶, ç›´æ¥ç”¨ä»£ç æ¥é…ç½®. hexoå®Œå…¨åŸºäºNode, æ‰€ä»¥ä¸ºä»€ä¹ˆä¸ç›´æ¥ç”¨ä»£ç æ¥é…ç½®? è®²çœŸ, ç¿»çœ‹æºç çš„æ—¶å€™çœ‹åˆ°äº†ä¸€ä¸ªç”¨ä»£ç å†™å¥½çš„default configçš„Object, hexoçš„é€»è¾‘æ˜¯å…ˆåŠ è½½default config, ç„¶ååŠ è½½æˆ‘ä»¬çš„ymlå†™çš„configæ–‡ä»¶å»è¦†ç›–. çœŸçš„, è®©æˆ‘ä»¬ç›´æ¥å†™jså§, æœ€ååå‡ºä¸€ä¸ªObjectå°±è¡Œäº†, è¿™æ ·å°±èƒ½å®Œç¾è§£å†³æ’ä»¶é…ç½®çš„é—®é¢˜.&lt;/p&gt;
&lt;h3 id=&quot;marked&quot;&gt;&lt;a href=&quot;#marked&quot; class=&quot;headerlink&quot; title=&quot;marked&quot;&gt;&lt;/a&gt;marked&lt;/h3&gt;&lt;p&gt;é¦–å…ˆæ˜¯markdownè§£æ. å¥½å§, æœ¬æ¥ç”¨markedæŒºå¥½, å¯æ˜¯å‘¢, markedéœ€è¦é…ç½®å•Š, é»˜è®¤çš„è¡Œä¸ºå½“ç„¶ä¸æ˜¯æˆ‘æƒ³è¦çš„, æˆ‘éœ€è¦ä¿®æ”¹å®ƒå¯¹head, table, codeç­‰çš„è§£æ. ä½†æ˜¯è¿™äº›ä¿®æ”¹éœ€è¦ä¿®æ”¹rendererçš„æ–¹æ³•, å¾ˆæ˜¾ç„¶, è¿™éœ€è¦code. markedæ’ä»¶çš„æºç æˆ‘ä¹Ÿè¯»äº†ä¸€ä¸‹, å®ƒä¼šå»configå¯¹è±¡ä¸Šè·å–éå¸¸ç®€å•çš„èƒ½å¤Ÿç”¨é”®å€¼å¯¹é…ç½®çš„ä¿¡æ¯, å¯¹äºä¿®æ”¹rendereræ— èƒ½ä¸ºåŠ›. å› ä¸ºhexoçš„åšæ³•ç›´æ¥å±è”½äº†è¿™ç§å¯èƒ½æ€§.&lt;/p&gt;
&lt;p&gt;äºæ˜¯, æˆ‘è‡ªå·±å†™äº†æ’ä»¶... sigh. æ²¡æœ‰åšæˆnpmåŒ…çš„å½¢å¼, è€Œæ˜¯ç›´æ¥åœ¨&lt;code&gt;scripts&lt;/code&gt;æ–‡ä»¶å¤¹é‡Œé¢å†™äº†ä¸€ä¸ªç®€å•çš„js. hexoè¯´è¿™é‡Œçš„è„šæœ¬ä¼šåœ¨hexoå¯åŠ¨çš„æ—¶å€™æ‰§è¡Œ.&lt;/p&gt;
&lt;h3 id=&quot;highlight-js&quot;&gt;&lt;a href=&quot;#highlight-js&quot; class=&quot;headerlink&quot; title=&quot;highlight.js&quot;&gt;&lt;/a&gt;highlight.js&lt;/h3&gt;&lt;p&gt;çœŸæ˜¯æ¬²å“­æ— æ³ª, æ²¡æœ‰ä½ è¿™ä¹ˆå†…ç½®çš„!! æˆ‘éƒ½åªèƒ½ç”¨éå¸¸è§„æ‰‹æ®µå»requireäººå®¶åŸå§‹çš„åŒ…äº†. hexoå†…ç½®å, ä¹Ÿåªèƒ½é…ç½®éå¸¸å°‘çš„é«˜äº®ä¿¡æ¯, å¯¹äºéœ€è¦ä»£ç é…ç½®çš„ä»ç„¶åªèƒ½å¹²çªçœ¼. äºæ˜¯, æˆ‘ç¦æ‰äº†é…ç½®æ–‡ä»¶é‡Œé¢çš„é«˜äº®, åœ¨æˆ‘çš„ç®€å•çš„å°è„šæœ¬é‡Œé¢(æ˜¯çš„, è¿˜æ˜¯é‚£é‡Œ)åœ¨markedè§£æcodeæ—¶å°±æŠŠé«˜äº®äº†ä¸€èµ·è§£æäº†. äºæ˜¯, é¡µé¢ç»ˆäºèƒ½å¤Ÿæ­£å¸¸å¤„ç†markdownäº†.&lt;/p&gt;
&lt;h3 id=&quot;ç¼“å­˜&quot;&gt;&lt;a href=&quot;#ç¼“å­˜&quot; class=&quot;headerlink&quot; title=&quot;ç¼“å­˜&quot;&gt;&lt;/a&gt;ç¼“å­˜&lt;/h3&gt;&lt;p&gt;æˆ‘... æèµ·è¿™ä¸ªæˆ‘æ— è¯­å‡å™. è¿™ç¼“å­˜åšå¾—, çœŸæ˜¯ç»äº†. åæ­£æˆ‘åˆå†™äº†ä¸ªå°è„šæœ¬åœ¨hexoè¦å¤„ç†æ–‡ä»¶çš„æ—¶å€™åˆ è¿™ä¸ªç¼“å­˜, è¿™æ¬¡æ²¡æœ‰æ”¾åœ¨ä¸»é¢˜é‡Œé¢è€Œæ˜¯æ”¾åœ¨hexoä¸»ç›®å½•é‡Œé¢, å› ä¸ºæˆ‘è§‰å¾—æœ‰ä¸€å¤©åº”è¯¥ä¼šå¤„ç†æ‰è¿™ä¸ªé—®é¢˜, è¿™ä¸ªå°è„šæœ¬ä¸åº”è¯¥æ˜¯ä¸»é¢˜çš„ä¸€éƒ¨åˆ†.&lt;/p&gt;
&lt;p&gt;å½“æ—¶æ˜¯è¿™æ ·çš„. å†™äº†ä¸€ç‚¹å„¿å†…å®¹, æ”¹äº†ç‚¹å„¿cssçš„æˆ‘å…´å†²å†²åœ°è°ƒç”¨äº†ä¸€æŠŠ&lt;code&gt;hexo s -l&lt;/code&gt;. oh, yeah! é¡µé¢! ç„¶åæˆ‘åˆæ”¹äº†ä¸€ç‚¹å„¿å†…å®¹, åˆ·æ–°. åˆ·æ–°? åˆ·æ–°??? ä¸ºæ¯›çº¿æ²¡æœ‰å˜å‘¢? çœ‹æ—¥å¿—æ˜¯æœ‰è¯·æ±‚çš„. äºæ˜¯æˆ‘é‡æ–°å¯åŠ¨äº†server, è¿˜æ˜¯æ²¡å˜!! ä»€ä¹ˆæƒ…å†µ, ä¸æ˜çœŸç›¸çš„æˆ‘çœ‹äº†çœ‹æ–‡æ¡£, è¯´æœ‰ç¼“å­˜, åˆ æ‰è¯•è¯•? ç„¶åå°±å¥½äº†. è¿‡äº†ä¸€ä¼šå„¿æˆ‘å†æ”¹, åˆä¸ç»™åŠ›äº†. çœŸçš„æ˜¯å¾ˆæ— å¥ˆ, æˆ‘å¹¶æ²¡è§‰å¾—é‚£ä¸ªç¼“å­˜æœ‰ä»€ä¹ˆå¸®åŠ©, åˆ ! &lt;/p&gt;
&lt;h2 id=&quot;ä¼‘æ¯ä¸€ä¸‹-åƒæ ¹é¦™è•‰&quot;&gt;&lt;a href=&quot;#ä¼‘æ¯ä¸€ä¸‹-åƒæ ¹é¦™è•‰&quot; class=&quot;headerlink&quot; title=&quot;ä¼‘æ¯ä¸€ä¸‹, åƒæ ¹é¦™è•‰&quot;&gt;&lt;/a&gt;ä¼‘æ¯ä¸€ä¸‹, åƒæ ¹é¦™è•‰&lt;/h2&gt;&lt;p&gt;hexoæ˜¯ä¸ªNodeçš„ç¨‹åº, é‚£å°±æ„å‘³ç€Nodeçš„è¾£ä¹ˆå¤šåŒ…éƒ½æ˜¯å¯ä»¥æèµ·çš„, è™½ç„¶æˆ‘ä¸ä¼š. çœ‹èµ·æ¥hexoçš„æ¶æ„è®¾è®¡å¾—è¿˜ä¸é”™, æ²¡æœ‰ä»”ç»†ç ”ç©¶, å®ƒå¤§æ¦‚æ˜¯æŠŠäº‹æƒ…åˆ†æˆäº†å¥½å‡ éƒ¨, å¤„ç†æ–‡ä»¶, æ¸²æŸ“post, ç”Ÿæˆå„ä¸ªé¡µé¢ç­‰, è¿˜æœ‰filterç¥é©¬çš„æ²¡ä»”ç»†çœ‹. æ¯ä¸ªæ­¥éª¤éƒ½å¯ä»¥å……åˆ†å‘æŒ¥ä½ çš„æƒ³è±¡å»åšäº‹æƒ…, åªè¦ç¬¦åˆè§„èŒƒå°±å¥½. è€Œä¸”å®ƒå¯ä»¥å¾ˆå¥½åœ°å‘æŒ¥Nodeçš„å¼‚æ­¥ç‰¹æ€§, è®©é¡µé¢å¹¶è¡Œç”Ÿæˆ.&lt;/p&gt;
&lt;p&gt;ç›®å‰æˆ‘çš„æ¨¡æ¿æ˜¯ç”¨çš„jade, cssç”¨çš„scssæ¥å†™, postå½“ç„¶æ˜¯markdownå•¦.&lt;/p&gt;
&lt;p&gt;æˆ‘çš„ä¾§è¾¹æ å’ŒåŸç‰ˆçš„ä¸ä¸€æ ·å“¦, ä¸ä¼šæ»šå‡ºå±å¹•å“¦, ä¸ä¼šçœ‹åˆ°æ–‡ç« åè¾¹çš„æ—¶å€™è§‰å¾—é¡µé¢ç©ºç©ºçš„, ä¹Ÿä¸æ˜¯å•çº¯çš„å¸é¡¶, è¦è€ƒè™‘å†…å®¹é•¿è¿‡çª—å£é«˜åº¦çš„æƒ…å†µ. åæ­£æ˜¯è´¹äº†ç‚¹å„¿åŠŸå¤«, ä»£ç å¾ˆç®€å•, ä¹Ÿå·²ç»æŠŠè¿™ä¸ªåšæˆäº†ä¸€ä¸ªå¯å¼€å…³çš„åŠŸèƒ½.&lt;/p&gt;
&lt;p&gt;åˆ†äº«çš„é‚£ä¸ªå°å¼¹çª—è§‰å¾—åŸç‰ˆåšå¾—ä¸åˆç†, äºæ˜¯ä¹Ÿæ”¹äº†ä¸€ä¸‹, å¸ƒå±€æ–¹å¼æ”¹äº†, å¹¶ä¸”æŠŠé‡Œé¢çš„é¡¹ç›®åšæˆäº†å¯é…ç½®. å…¶ä»–è¿˜æœ‰ä¸å°‘æ”¹åŠ¨ä¸»è¦æ˜¯æ”¹è¿›ä¸€ä¸‹å¸ƒå±€æ–¹å¼å’Œåˆ äº†ä¸å°‘ä»£ç .&lt;/p&gt;
&lt;h2 id=&quot;æ€»ä¹‹&quot;&gt;&lt;a href=&quot;#æ€»ä¹‹&quot; class=&quot;headerlink&quot; title=&quot;æ€»ä¹‹&quot;&gt;&lt;/a&gt;æ€»ä¹‹&lt;/h2&gt;&lt;p&gt;æˆ‘è§‰å¾—ä¸€å®šæ˜¯æˆ‘æ²¡æœ‰å¼„æ˜ç™½äººå®¶çš„ç‰›é€¼ä¹‹å¤„, è¿˜åè¿™ä¹ˆå¤šæ§½, ç¬¨æ­»äº†ğŸ™.&lt;/p&gt;
&lt;p&gt;å…¶å®ä¸å°±æ˜¯ä¸ªé™æ€åšå®¢ç³»ç»Ÿä¹ˆ?! å¯æ˜¯æŠ˜è…¾çš„å¤©æ€§åŠ ä¸ŠNodeè®©æˆ‘å¾ˆå¾ˆçœ‹å¥½hexo, æ˜¯ä¸æ˜¯&lt;strong&gt;github page&lt;/strong&gt;ä¹Ÿæ”¯æŒä¸€ä¸‹hexo? å“ˆå“ˆ, è¿™æ ·æˆ‘å°±ä¸ç”¨æ¯æ¬¡éƒ½è¦å…ˆgenerateå†æäº¤äº†. å¤§å®¶ä¹Ÿæ¥ç”¨ä¸€ä¸‹å“‡~&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;æ€é‡å†ä¸‰, è¿˜æ˜¯ä¸ç”¨jekylläº†. Rubyä»€ä¹ˆçš„ç´¯è§‰ä¸çˆ±, æœ€å…³é”®çš„æ˜¯æˆ‘åˆšè£…ä¸Šæœ€æ–°ç‰ˆå°±ç›´æ¥ä¸èƒ½å¯åŠ¨... &lt;/p&gt;
&lt;p&gt;ä»€ä¹ˆ? &lt;span style=&quot;color:rgb(179,62,170)&quot;&gt;&lt;strong&gt;æ²¡æœ‰ç»™ç©ºå®šä¹‰matchæ–¹æ³•&lt;/strong&gt;&lt;/span&gt;. å–‚, è¿˜èƒ½å†è¯¦ç»†ç‚¹å„¿ä¹ˆ? è®©æˆ‘æ€ä¹ˆæ’æŸ¥é—®é¢˜?&lt;/p&gt;
&lt;p&gt;æ­£å¥½å¬æœ‹å‹è¯´&lt;strong&gt;hexo&lt;/strong&gt;, å»ä–äº†ä¸€çœ¼, ç”¨Nodeåšçš„. æ–‡æ¡£çœŸçš„æ˜¯...(çœç•¥åæ§½æ— æ•°). æ“¦æ“¦å˜´, å–å£æ°´. å…¶å®åšå¾—æŒºä¸é”™çš„, é™¤äº†é»˜è®¤ä¸»é¢˜æœ‰ç‚¹å„¿ä¸‘å¤–åŠ æ–‡æ¡£å¾ˆçƒ‚ä»¥å¤–. &lt;/p&gt;
    
    </summary>
    
      <category term="æŠ€æœ¯" scheme="/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
      <category term="JS" scheme="/tags/JS/"/>
    
  </entry>
  
  <entry>
    <title>swift AnyObject little tips</title>
    <link href="/2016/04/13/swift-AnyObject-little-tips/"/>
    <id>/2016/04/13/swift-AnyObject-little-tips/</id>
    <published>2016-04-13T02:44:37.000Z</published>
    <updated>2016-04-13T13:09:30.000Z</updated>
    
    <content type="html">&lt;p&gt;&lt;code&gt;AnyObject&lt;/code&gt;åœ¨swifté‡Œé¢æ¯”è¾ƒç‰¹åˆ«. å®ƒæ˜¯æ‰€æœ‰ç±»éƒ½éšå¼å®ç°çš„ä¸€ä¸ª&lt;code&gt;protocol&lt;/code&gt;. Appleçš„æ³¨é‡Šé‡Œé¢å†™ç€å½“è¢«ç”¨ä½œä¸€ä¸ªå…·ä½“ç±»å‹æ—¶, 
æ‰€æœ‰&lt;code&gt;@objc&lt;/code&gt;çš„æ–¹æ³•å’Œå±æ€§éƒ½è¢«ç¼–è¯‘å™¨è®¤ä¸ºå¯ä»¥è®¿é—®, å¹¶ä¸”éƒ½è¢«æ ‡è®°ä¸ºéšå¼è§£åŒ…ç±»å‹. &lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;blockquote&gt;
&lt;p&gt;The protocol to which all classes implicitly conform.&lt;/p&gt;
&lt;p&gt;When used as a concrete type, all known &lt;strong&gt;@objc&lt;/strong&gt; methods and
 properties are available, as implicitly-unwrapped-optional methods
 and properties respectively, on each instance of &lt;strong&gt;AnyObject&lt;/strong&gt;. &lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;å› æ­¤, åœ¨å¼ºç±»å‹ä¸­å°±æ··å…¥äº†å¼±ç±»å‹çš„ä¸å®‰å®šå› ç´ .&lt;/p&gt;
&lt;h2 id=&quot;Property&quot;&gt;&lt;a href=&quot;#Property&quot; class=&quot;headerlink&quot; title=&quot;Property&quot;&gt;&lt;/a&gt;Property&lt;/h2&gt;&lt;pre&gt;&lt;code class=&quot;swift hljs&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; value: &lt;span class=&quot;hljs-type&quot;&gt;AnyObject&lt;/span&gt; = &lt;span class=&quot;hljs-string&quot;&gt;&quot;abc&quot;&lt;/span&gt;
&lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; frame = value.frame&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;code&gt;value&lt;/code&gt;å…¶å®æ˜¯&lt;code&gt;String&lt;/code&gt;ç±»å‹, è¿™é‡Œå£°æ˜ä¸º&lt;code&gt;AnyObject&lt;/code&gt;, ç„¶åå°±å¯ä»¥å°è¯•è®¿é—®&lt;code&gt;frame&lt;/code&gt;è¿™ä¸ª&lt;code&gt;String&lt;/code&gt;æ²¡æœ‰çš„property. ç„¶å&lt;code&gt;frame&lt;/code&gt;ä¼šæ˜¯&lt;code&gt;CGRect!&lt;/code&gt;ç±»å‹å¹¶ä¸”å€¼ä¸º&lt;code&gt;nil&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;å¦‚æœè¦é“¾å¼è®¿é—®, å®‰å…¨çš„åšæ³•ç”¨&lt;strong&gt;?&lt;/strong&gt; :&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;swift hljs&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; minX = value.frame?.minX  &lt;span class=&quot;hljs-comment&quot;&gt;// will be &#39;CGFloat?&#39;&lt;/span&gt;

&lt;span class=&quot;hljs-comment&quot;&gt;// not safe&lt;/span&gt;
&lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; minX = value.frame.minX  &lt;span class=&quot;hljs-comment&quot;&gt;// will be &#39;CGFloat!&#39;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&quot;method&quot;&gt;&lt;a href=&quot;#method&quot; class=&quot;headerlink&quot; title=&quot;method&quot;&gt;&lt;/a&gt;method&lt;/h2&gt;&lt;p&gt;æ–¹æ³•å’Œå±æ€§å…¶å®æ˜¯ä¸€æ ·çš„. åªä¸è¿‡å¯ä»¥è¢«è°ƒç”¨è€Œå·². å› æ­¤codeä¹Ÿå‡ ä¹ä¸€æ ·:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;swift hljs&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; result = value.stringByAppendingString?(&lt;span class=&quot;hljs-string&quot;&gt;&quot;test&quot;&lt;/span&gt;)  &lt;span class=&quot;hljs-comment&quot;&gt;// will be &#39;String?&#39;&lt;/span&gt;

&lt;span class=&quot;hljs-comment&quot;&gt;// not safe&lt;/span&gt;
&lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; result = value.stringByAppendingString(&lt;span class=&quot;hljs-string&quot;&gt;&quot;test&quot;&lt;/span&gt;)  &lt;span class=&quot;hljs-comment&quot;&gt;// will be &#39;String&#39;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&quot;å¤„ç†JSON&quot;&gt;&lt;a href=&quot;#å¤„ç†JSON&quot; class=&quot;headerlink&quot; title=&quot;å¤„ç†JSON&quot;&gt;&lt;/a&gt;å¤„ç†JSON&lt;/h2&gt;&lt;p&gt;ç»å¸¸æˆ‘ä»¬ä»HTTPè¯·æ±‚æ‹¿åˆ°çš„æ˜¯JSON, è½¬æ¢æˆ&lt;code&gt;NSDictionary&lt;/code&gt;æˆ–è€…&lt;code&gt;NSArray&lt;/code&gt;å†ä¼ é€’ç»™åº”ç”¨é€»è¾‘. ç°åœ¨å‡è®¾æˆ‘ä»¬è¦è·å–JSONé‡Œé¢çš„ä¿¡æ¯.&lt;/p&gt;
&lt;h3 id=&quot;ä½¿ç”¨-valueForKey&quot;&gt;&lt;a href=&quot;#ä½¿ç”¨-valueForKey&quot; class=&quot;headerlink&quot; title=&quot;ä½¿ç”¨ valueForKey&quot;&gt;&lt;/a&gt;ä½¿ç”¨ valueForKey&lt;/h3&gt;&lt;pre&gt;&lt;code class=&quot;swift hljs&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; name = value.valueForKey?(&lt;span class=&quot;hljs-string&quot;&gt;&quot;name&quot;&lt;/span&gt;)&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ä½†æ˜¯, å¦‚æœvalueä¸æ˜¯Dict, æˆ–è€…valueæ˜¯Arrayä½†æ˜¯é‡Œé¢çš„å…ƒç´ ä¸æ˜¯Object, è¿™æ ·å°±æœ‰å¯èƒ½å¼•å‘ &lt;code&gt;valueForUndefinedKey:&lt;/code&gt;, æŠ›å‡ºexception. å½“ç„¶, &lt;code&gt;valueForKeyPath&lt;/code&gt;ä¹Ÿæ˜¯ä¸€æ ·çš„. &lt;/p&gt;
&lt;h3 id=&quot;ä½¿ç”¨-objectForKey&quot;&gt;&lt;a href=&quot;#ä½¿ç”¨-objectForKey&quot; class=&quot;headerlink&quot; title=&quot;ä½¿ç”¨ objectForKey&quot;&gt;&lt;/a&gt;ä½¿ç”¨ objectForKey&lt;/h3&gt;&lt;p&gt;æ‰€ä»¥å‘€, æ—¢ç„¶è®¤ä¸ºvalueæ˜¯JSONä¸­çš„Object, ä¸ºä»€ä¹ˆä¸ç”¨æ›´åŠ è‡ªç„¶çš„&lt;code&gt;objectForKey&lt;/code&gt;å‘¢? &lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;swift hljs&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; name = value.objectForKey?(&lt;span class=&quot;hljs-string&quot;&gt;&quot;name&quot;&lt;/span&gt;)&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è¿™æ ·å½“valueä¸æ˜¯dict, ä¹Ÿå°±æ²¡æœ‰objectForKeyè¿™ä¸ªæ–¹æ³•, ä¹Ÿå°±ä¸ä¼šcrashäº†. ç„¶ånameä»ç„¶æ˜¯Optional. 
è¿™æ ·çš„å‡å®šåœ¨å¤„ç†JSONæ—¶æ—¶æœ‰æ•ˆçš„, å› ä¸ºJSONæ”¯æŒçš„æ•°æ®ç±»å‹ä¸­åªæœ‰objectæ‰æœ‰è¿™ä¸ªæ–¹æ³•, å…¶ä»–çš„array, boolean, number, stringå’Œnulléƒ½æ²¡æœ‰.&lt;/p&gt;
&lt;h3 id=&quot;ä½¿ç”¨-ä¸‹æ ‡è¯­æ³•&quot;&gt;&lt;a href=&quot;#ä½¿ç”¨-ä¸‹æ ‡è¯­æ³•&quot; class=&quot;headerlink&quot; title=&quot;ä½¿ç”¨ ä¸‹æ ‡è¯­æ³•&quot;&gt;&lt;/a&gt;ä½¿ç”¨ ä¸‹æ ‡è¯­æ³•&lt;/h3&gt;&lt;p&gt;å¯¹äºç”¨keyæ¥è®¿é—®è¿˜æœ‰ä¸ªååƒ»çš„å°è·¯å¯ä»¥èµ°ä¸€ä¸‹:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;swift hljs&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; name = value[&lt;span class=&quot;hljs-string&quot;&gt;&quot;name&quot;&lt;/span&gt;] &lt;span class=&quot;hljs-comment&quot;&gt;// will be `AnyObject?!`&lt;/span&gt;

&lt;span class=&quot;hljs-comment&quot;&gt;// or do this tricky way&lt;/span&gt;
&lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; name = value[&lt;span class=&quot;hljs-string&quot;&gt;&quot;name&quot;&lt;/span&gt;]?.flatMap{$&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;} &lt;span class=&quot;hljs-comment&quot;&gt;// will be &#39;AnyObject?&#39;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è¿™é‡Œç”¨&lt;code&gt;flatMap&lt;/code&gt;åªæ˜¯ä¸€ç§å¯¹ä¸¤å±‚&lt;code&gt;Optional&lt;/code&gt;å‰¥å£³çš„æ‰‹æ®µ, ç”¨ &lt;code&gt;xx ?? nil&lt;/code&gt; ä¹Ÿèƒ½å‰¥å£³. å‰¥å£³è™½ç„¶æ¯”è¾ƒä¸‘, ä½†æ˜¯å´ä¸ä¼šå¼•èµ·å´©æºƒ.&lt;/p&gt;
&lt;p&gt;å¦‚æœè¦ç»§ç»­æ·±å…¥keyPathçš„è¯......&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;swift hljs&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; content = value[&lt;span class=&quot;hljs-string&quot;&gt;&quot;person&quot;&lt;/span&gt;]?.flatMap({$&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;})?[&lt;span class=&quot;hljs-string&quot;&gt;&quot;id&quot;&lt;/span&gt;]?.flatMap({$&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;}) &lt;span class=&quot;hljs-comment&quot;&gt;// will be &#39;AnyObject?&#39;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ä¸è¿‡æˆ‘è§‰å¾—æœ€å¥½è¿˜æ˜¯ç”¨&lt;code&gt;objectForKey&lt;/code&gt;æ¥ä»JSONè·å–ä¿¡æ¯, å¹¶åšå¥½ç±»å‹æ£€æŸ¥.&lt;/p&gt;
&lt;h2 id=&quot;æ€»ç»“-6&quot;&gt;&lt;a href=&quot;#æ€»ç»“-6&quot; class=&quot;headerlink&quot; title=&quot;æ€»ç»“&quot;&gt;&lt;/a&gt;æ€»ç»“&lt;/h2&gt;&lt;p&gt;å‘µå‘µå“’... æ€»ç»“å°±æ˜¯ä¸è¦ä¹±ç”¨, å°‘å¹´, é™¤éä½ çœŸçš„çŸ¥é“è‡ªå·±åœ¨åšä»€ä¹ˆ&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;code&gt;AnyObject&lt;/code&gt;åœ¨swifté‡Œé¢æ¯”è¾ƒç‰¹åˆ«. å®ƒæ˜¯æ‰€æœ‰ç±»éƒ½éšå¼å®ç°çš„ä¸€ä¸ª&lt;code&gt;protocol&lt;/code&gt;. Appleçš„æ³¨é‡Šé‡Œé¢å†™ç€å½“è¢«ç”¨ä½œä¸€ä¸ªå…·ä½“ç±»å‹æ—¶, 
æ‰€æœ‰&lt;code&gt;@objc&lt;/code&gt;çš„æ–¹æ³•å’Œå±æ€§éƒ½è¢«ç¼–è¯‘å™¨è®¤ä¸ºå¯ä»¥è®¿é—®, å¹¶ä¸”éƒ½è¢«æ ‡è®°ä¸ºéšå¼è§£åŒ…ç±»å‹. &lt;/p&gt;
    
    </summary>
    
      <category term="æŠ€æœ¯" scheme="/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
      <category term="iOS" scheme="/tags/iOS/"/>
    
      <category term="swift" scheme="/tags/swift/"/>
    
  </entry>
  
  <entry>
    <title>é›†æˆNativeScript iOSRuntimeåˆ°å·²æœ‰å·¥ç¨‹</title>
    <link href="/2016/04/11/nativescript/"/>
    <id>/2016/04/11/nativescript/</id>
    <published>2016-04-11T04:50:49.000Z</published>
    <updated>2016-04-12T12:22:44.000Z</updated>
    
    <content type="html">&lt;p&gt;&lt;a href=&quot;https://www.nativescript.org/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;NativeScript&lt;/a&gt;æ˜¯ä¸€ä¸ªä¿åŠ åˆ©äºšå…¬å¸&lt;strong&gt;Telerik&lt;/strong&gt;å¼€å‘çš„, å…¶ç›®æ ‡æ¯”è¾ƒå—äº‰è®®: &lt;code&gt;write once, run everywhere&lt;/code&gt;. å®ƒæä¾›äº†Android, Windows Phoneå’ŒiOSçš„JS Runtime, ä»¥åŠä¸€äº›å‘¨è¾¹æ¯”å¦‚csså’Œhtmlçš„è§£æ, ä¸€äº›wrapçš„æ¨¡å—æ¥æ¶ˆé™¤ä¸åŒå¹³å°çš„å·®å¼‚. ä½†æ˜¯æˆ‘ä»¬åªéœ€è¦å®ƒæä¾›çš„Runtimeæ¥ç”¨JSå¼€å‘åŸç”Ÿåº”ç”¨å°±å¥½, å› ä¸ºå†™èµ·æ¥è¿˜ä¸é”™.&lt;/p&gt;
&lt;h2 id=&quot;iOS-Runtime&quot;&gt;&lt;a href=&quot;#iOS-Runtime&quot; class=&quot;headerlink&quot; title=&quot;iOS Runtime&quot;&gt;&lt;/a&gt;iOS Runtime&lt;/h2&gt;&lt;p&gt;å…³äºNativeScriptçš„ä»‹ç»å¯ä»¥å»Googleä¸€ä¸‹, å¾ˆå¤šäººæ‹¿æ¥å’Œ&lt;a href=&quot;https://facebook.github.io/react-native/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;react-native&lt;/a&gt;æ¯”è¾ƒ, ä¸€èˆ¬å¯¹æ¯”æ¯”è¾ƒå¤šçš„æ˜¯å¦‚ä½•ç¼–å†™é¡µé¢è¿™ä¸€å—. å½“ç„¶è¿™ä¸æ˜¯è¿™ç¯‡æ–‡ç« çš„ç›®çš„, æˆ‘åªæ˜¯æ¯”è¾ƒåœ¨æ„NativeScriptçš„Runtime, å®ƒæä¾›äº†jsåˆ°åŸç”Ÿçš„è°ƒç”¨è½¬æ¢, è€Œä¸”çœ‹èµ·æ¥æŒºä¸é”™. Androidå’ŒWindows Phoneæ²¡æœ‰ç ”ç©¶è¿‡, è¿™é‡ŒåªèŠèŠiOS Runtime. åæ–‡æåˆ°runtimeå¦‚æ— ç‰¹æ®Šè¯´æ˜éƒ½æ˜¯æŒ‡iOS Runtime.
å…ˆçœ‹çœ‹code:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;js hljs&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; vc = UIView.alloc().init();
&lt;span class=&quot;hljs-comment&quot;&gt;// var vc = new UIViewController(); // same as last line&lt;/span&gt;

vc.view.backgroundColor = UIColor.redColor();

&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; nav = &lt;span class=&quot;hljs-comment&quot;&gt;/* some navigation controller */&lt;/span&gt;;

nav.pushViewControllerAnimated(vc, &lt;span class=&quot;hljs-literal&quot;&gt;true&lt;/span&gt;);

&lt;span class=&quot;hljs-built_in&quot;&gt;console&lt;/span&gt;.log(&lt;span class=&quot;hljs-string&quot;&gt;&#39;hello world&#39;&lt;/span&gt;);&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;çœ‹èµ·æ¥çœŸçš„æŒºä¸é”™çš„. &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;åˆ›å»º&lt;code&gt;UIViewController&lt;/code&gt; å¯ä»¥ç”¨ &lt;code&gt;new&lt;/code&gt;å…³é”®å­—, ä¹Ÿå¯ä»¥ä½¿ç”¨æ–¹æ³•è°ƒç”¨çš„å½¢å¼.&lt;/li&gt;
&lt;li&gt;ç›´æ¥ä½¿ç”¨&lt;strong&gt;property&lt;/strong&gt;.&lt;/li&gt;
&lt;li&gt;è°ƒç”¨å¤šä¸ªå‚æ•°çš„APIæ—¶, æ˜¯æŠŠæ‰€æœ‰çš„å‚æ•°labeléƒ½æ‹¼åˆ°äº†ä¸€èµ·, æ‰€ä»¥&lt;code&gt;pushViewController:Animated:&lt;/code&gt;è½¬æ¢æˆäº†&lt;code&gt;pushViewControllerAnimated&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;æ‰“æ—¥å¿—è¿˜æ˜¯&lt;code&gt;console.log&lt;/code&gt;.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æ›´å¤šç‰¹æ€§å’Œé™åˆ¶çœ‹å®˜ç½‘doc. ç°åœ¨è¿˜æ”¯æŒäº†JS6, çœ‹å®˜æ–¹è¯´æ˜ä¹Ÿæ”¯æŒTypeScript, è€Œä¸”åœ¨å’ŒAngular teamåˆä½œ, å¯ä»¥æ”¯æŒAngular2çš„æ ·å­.&lt;/p&gt;
&lt;p&gt;å¯¹äº†, è¿™è´§å¼€æº, Githubä¸Šè¿˜æäº†ä¸€å˜´:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;The iOS runtime is written in a fun mix of C++, Objective-C, and more&lt;/strong&gt;. &lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;ç„¶åè¿˜æœ‰ä¸€ä¸ª&lt;strong&gt;NativeScript Member&lt;/strong&gt; PanayotCankov å¯¹issueçš„&lt;a href=&quot;https://github.com/NativeScript/NativeScript/issues/1121&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;å›å¤&lt;/a&gt;:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;In the long term you may consider the ios-runtime is doing with JavaScript something similar to what Swift is doing.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;å‘µå‘µ...&lt;/p&gt;
&lt;h2 id=&quot;é›†æˆåˆ°ç°æœ‰å·¥ç¨‹&quot;&gt;&lt;a href=&quot;#é›†æˆåˆ°ç°æœ‰å·¥ç¨‹&quot; class=&quot;headerlink&quot; title=&quot;é›†æˆåˆ°ç°æœ‰å·¥ç¨‹&quot;&gt;&lt;/a&gt;é›†æˆåˆ°ç°æœ‰å·¥ç¨‹&lt;/h2&gt;&lt;p&gt;å…³äºå¦‚ä½•å®Œå…¨ç”¨&lt;strong&gt;NativeScript&lt;/strong&gt;å†™åº”ç”¨, å¯ä»¥å»å®˜ç½‘çœ‹æ•™ç¨‹. æˆ‘è¿™é‡Œå°±åªè®°å½•ä¸€ä¸‹é›†æˆRuntimeåˆ°å·²æœ‰å·¥ç¨‹çš„æ­¥éª¤. &lt;strong&gt;NativeScript&lt;/strong&gt;åœ¨åˆ›å»ºä¸€ä¸ªæ–°åº”ç”¨æ—¶ä¼šç”ŸæˆiOSå·¥ç¨‹ç›®å½•.
é‡Œé¢æœ‰ä¸€ä¸ªå«åš&amp;#39;internal&amp;#39;çš„æ–‡ä»¶å¤¹. æ‰€æœ‰çš„ä¸œè¥¿éƒ½åœ¨é‡Œé¢äº†.&lt;/p&gt;
&lt;h4 id=&quot;é…ç½®Build-Phases&quot;&gt;&lt;a href=&quot;#é…ç½®Build-Phases&quot; class=&quot;headerlink&quot; title=&quot;é…ç½®Build Phases&quot;&gt;&lt;/a&gt;é…ç½®Build Phases&lt;/h4&gt;&lt;p&gt;Runtimeéœ€è¦æ·»åŠ 3ä¸ª&lt;code&gt;run script&lt;/code&gt;. å¯ä»¥ç…§ç€æ ·ä¾‹å·¥ç¨‹é‡Œé¢æ¥copy, åªè¦è·¯å¾„æ­£ç¡®å³å¯. 3ä¸ª&lt;code&gt;run script&lt;/code&gt;åˆ†åˆ«æ˜¯:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;code&gt;nativescript-pre-build&lt;/code&gt; æ·»åŠ åœ¨&lt;strong&gt;Target Dependencies&lt;/strong&gt;åé¢.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;nativescript-pre-link&lt;/code&gt; æ·»åŠ åœ¨&lt;strong&gt;Compile Sources&lt;/strong&gt;åé¢.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;nativescript-post-build&lt;/code&gt; æ·»åŠ åœ¨æœ€å, è¿™ä¸ªæ˜¯ä¸ºäº†æ¸…é™¤æ‰æ¨¡æ‹Ÿå™¨ç›¸å…³çš„åˆ‡ç‰‡, ä¸ç„¶Appleä¼šæ‹’.&lt;/li&gt;
&lt;/ol&gt;
&lt;h4 id=&quot;é…ç½®Build-Settings&quot;&gt;&lt;a href=&quot;#é…ç½®Build-Settings&quot; class=&quot;headerlink&quot; title=&quot;é…ç½®Build Settings&quot;&gt;&lt;/a&gt;é…ç½®Build Settings&lt;/h4&gt;&lt;p&gt;&lt;strong&gt;internal&lt;/strong&gt;é‡Œé¢å¥½å‡ ä¸ªxcconfig, å…¶å®å¾ˆç®€å•çš„, åªç”¨åˆ°äº†ä¸€ä¸ª&lt;code&gt;nativescript-build.xconfig&lt;/code&gt;, è‡³äºæ˜¯ç”¨xcconfigè¿˜æ˜¯ç›´æ¥è£¸å†™åœ¨settingé‡Œé¢, çœ‹è‡ªå·±çš„éœ€æ±‚. 
æ–‡ä»¶é‡Œé¢é…ç½®äº†&lt;code&gt;HEADER_SEARCH_PATHS&lt;/code&gt;, &lt;code&gt;OTHER_LDFLAGS&lt;/code&gt;ä»¥åŠ&lt;code&gt;FRAMEWORK_SEARCH_PATHS&lt;/code&gt;. è¿™äº›å€¼é‡Œé¢æœ‰äº›æ˜¯ç›¸å¯¹è·¯å¾„, è‡ªå·±è°ƒæ•´æ­£ç¡®å°±å¥½. &lt;/p&gt;
&lt;p&gt;é»˜è®¤é…ç½®çš„æ˜¯ç”¨&lt;code&gt;.a&lt;/code&gt;, å¦‚æœè¦æ”¹æˆç”¨framework, å…ˆåœ¨&lt;code&gt;OTHER_LDFLAGS&lt;/code&gt;é‡Œé¢å»æ‰å¯¹&lt;code&gt;.a&lt;/code&gt;çš„å¼•ç”¨&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;null hljs&quot;&gt;-lNativeScript -L$(SRCROOT)/internal/NativeScript/&lt;span class=&quot;hljs-class&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;lib&lt;/span&gt; //å¼•ç”¨çš„æ˜¯.&lt;span class=&quot;hljs-title&quot;&gt;a&lt;/span&gt;, åˆ æ‰è¿™ä¸ª&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ç„¶åæŠŠ&lt;code&gt;NativeScript.framework&lt;/code&gt;æ‹–æ‹½åˆ°è‡ªå·±åº”ç”¨çš„Targetçš„&lt;strong&gt;Embedded Binaries&lt;/strong&gt;é‡Œé¢, è¿™ä¸ªframeworkæ˜¯iOS8ä»¥åæ”¯æŒçš„dynamic framework. 
è¿˜éœ€è¦åœ¨è¿™ä¸ªframeworkçš„æ ¹ç›®å½•ä¸‹æ·»åŠ ä¸€ä¸ª&lt;strong&gt;Modules&lt;/strong&gt;æ–‡ä»¶å¤¹, åœ¨æ–‡ä»¶å¤¹é‡Œé¢åˆ›å»ºmodule.modulemapæ–‡ä»¶, å…¶å†…å®¹å¦‚ä¸‹:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;null hljs&quot;&gt;framework &lt;span class=&quot;hljs-keyword&quot;&gt;module&lt;/span&gt; NativeScript {
  umbrella header &lt;span class=&quot;hljs-string&quot;&gt;&quot;NativeScript.h&quot;&lt;/span&gt;

  &lt;span class=&quot;hljs-keyword&quot;&gt;export&lt;/span&gt; *
  &lt;span class=&quot;hljs-keyword&quot;&gt;module&lt;/span&gt; * { &lt;span class=&quot;hljs-keyword&quot;&gt;export&lt;/span&gt; * }
}&lt;/code&gt;&lt;/pre&gt;&lt;h4 id=&quot;ä¿®æ”¹ç¨‹åºå…¥å£&quot;&gt;&lt;a href=&quot;#ä¿®æ”¹ç¨‹åºå…¥å£&quot; class=&quot;headerlink&quot; title=&quot;ä¿®æ”¹ç¨‹åºå…¥å£&quot;&gt;&lt;/a&gt;ä¿®æ”¹ç¨‹åºå…¥å£&lt;/h4&gt;&lt;p&gt;çœ‹äº†ä¸€ä¸‹æ ·ä¾‹å·¥ç¨‹, æ‰’å‡ºæ¥è¿™å‡ è¡Œå…³é”®&lt;strong&gt;OC&lt;/strong&gt;ä»£ç . swiftæ€ä¹ˆå¼„ä¸ä¼š, æ‰€ä»¥æ˜¯OCå“¦.&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;objc hljs&quot;&gt;&lt;span class=&quot;hljs-meta&quot;&gt;#import &lt;span class=&quot;hljs-meta-string&quot;&gt;&amp;lt;NativeScript/NativeScript.h&amp;gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;hljs-comment&quot;&gt;// #import &quot;YourTarget-swift.h&quot; å¦‚æœç”¨AppDelegateæ˜¯swiftç±»&lt;/span&gt;

&lt;span class=&quot;hljs-keyword&quot;&gt;extern&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;char&lt;/span&gt; startOfMetadataSection __&lt;span class=&quot;hljs-keyword&quot;&gt;asm&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;section$start$__DATA$__TNSMetadata&quot;&lt;/span&gt;);    &lt;span class=&quot;hljs-comment&quot;&gt;//æŠ„è¿‡æ¥çš„...&lt;/span&gt;

&lt;span class=&quot;hljs-keyword&quot;&gt;int&lt;/span&gt; main(&lt;span class=&quot;hljs-keyword&quot;&gt;int&lt;/span&gt; argc, &lt;span class=&quot;hljs-keyword&quot;&gt;char&lt;/span&gt; * argv[])
{
    &lt;span class=&quot;hljs-keyword&quot;&gt;@autoreleasepool&lt;/span&gt; {
        [T&lt;span class=&quot;hljs-built_in&quot;&gt;NSRuntime&lt;/span&gt; initializeMetadata:&amp;amp;startOfMetadataSection];
        [T&lt;span class=&quot;hljs-built_in&quot;&gt;NSRuntimeInspector&lt;/span&gt; setLogsToSystemConsole:&lt;span class=&quot;hljs-literal&quot;&gt;YES&lt;/span&gt;];    &lt;span class=&quot;hljs-comment&quot;&gt;// å¯ä»¥è‡ªå·±æ·»åŠ æ¡ä»¶ç¼–è¯‘, åœ¨releaseä¸‹æ‰”æ‰&lt;/span&gt;
        &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;UIApplicationMain&lt;/span&gt;(argc, argv, &lt;span class=&quot;hljs-literal&quot;&gt;nil&lt;/span&gt;, &lt;span class=&quot;hljs-built_in&quot;&gt;NSStringFromClass&lt;/span&gt;([AppDelegate class]));
    }
}&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;å¦‚æœ&lt;code&gt;APPDelegate&lt;/code&gt;æ˜¯&lt;strong&gt;swift&lt;/strong&gt;å†™çš„, éœ€è¦æ·»åŠ &lt;strong&gt;Bridging Header&lt;/strong&gt;(é¿å…build error), å¹¶importä¸€ä¸‹swiftåˆ°OCçš„è½¬æ¢å¤´æ–‡ä»¶, ä¸æ˜¯é‚£ä¸ªbridging header, è€Œæ˜¯&lt;code&gt;YourTarget-swift.h&lt;/code&gt;é‚£ä¸ªæ–‡ä»¶. è¯¦æƒ…æŸ¥é˜…&lt;a href=&quot;https://developer.apple.com/library/ios/documentation/Swift/Conceptual/BuildingCocoaApps/MixandMatch.html#//apple_ref/doc/uid/TP40014216-CH10-ID122&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Appleæ–‡æ¡£&lt;/a&gt;.&lt;/p&gt;
&lt;h4 id=&quot;ä½¿ç”¨&quot;&gt;&lt;a href=&quot;#ä½¿ç”¨&quot; class=&quot;headerlink&quot; title=&quot;ä½¿ç”¨&quot;&gt;&lt;/a&gt;ä½¿ç”¨&lt;/h4&gt;&lt;p&gt;å¦‚æœæ²¡å•¥é—®é¢˜çš„è¯, åº”è¯¥å°±èƒ½buildè¿‡äº†. æ¥ä¸‹æ¥ç®€å•é…ç½®ä¸€ä¸‹, åˆ›å»ºä¸€ä¸ªç›®å½•æ¯”å¦‚&lt;code&gt;JS&lt;/code&gt;, ä»¥æ–‡ä»¶å¤¹å¼•ç”¨çš„æ–¹å¼å¼•å…¥, å¹¶å°†å…¶è®¾ç½®ä¸ºcopyåˆ°mainBundle. æ–‡ä»¶å¤¹å†…æ·»åŠ ä¸€ä¸ª&lt;code&gt;app.js&lt;/code&gt;æ–‡ä»¶, éšä¾¿å†™ç‚¹å„¿logç¥é©¬çš„.&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;swift hljs&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; runtime = &lt;span class=&quot;hljs-type&quot;&gt;TNSRuntime&lt;/span&gt;(applicationPath: appPath)    &lt;span class=&quot;hljs-comment&quot;&gt;// æŒ‡å‘æ–‡ä»¶å¤¹&lt;/span&gt;
runtime.scheduleInRunLoop(&lt;span class=&quot;hljs-type&quot;&gt;NSRunLoop&lt;/span&gt;.mainRunLoop(), forMode: &lt;span class=&quot;hljs-type&quot;&gt;NSRunLoopCommonModes&lt;/span&gt;)

runtime.executeModule(&lt;span class=&quot;hljs-string&quot;&gt;&quot;./&quot;&lt;/span&gt;)     &lt;span class=&quot;hljs-comment&quot;&gt;// æ‰§è¡Œapp.js&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&quot;å­˜åœ¨çš„é—®é¢˜&quot;&gt;&lt;a href=&quot;#å­˜åœ¨çš„é—®é¢˜&quot; class=&quot;headerlink&quot; title=&quot;å­˜åœ¨çš„é—®é¢˜&quot;&gt;&lt;/a&gt;å­˜åœ¨çš„é—®é¢˜&lt;/h2&gt;&lt;p&gt;ç›®å‰ä¹Ÿåªæ˜¯åˆšæ‰’å‡ºæ¥, ç½‘ä¸Šçš„èµ„æ–™æ¯”è¾ƒå°‘, å¯¹&lt;strong&gt;JavaScriptCore&lt;/strong&gt;ä¹Ÿä¸æ˜¯å¾ˆäº†è§£, å¼„èµ·æ¥æ¯”è¾ƒè´¹åŠ². ç›®å‰å­˜åœ¨ä¸€äº›é—®é¢˜:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;TNSRuntime&lt;/code&gt;å¯¹è±¡æœ‰ä¸ª&lt;code&gt;globalContext&lt;/code&gt;æ–¹æ³•è¿”å›&lt;code&gt;JSGlobalContextRef&lt;/code&gt;, ä½†æ˜¯æ‹¿å»åˆ›å»º&lt;code&gt;JSContext&lt;/code&gt;å°±ä¼šå´©æºƒ, æŠ¥&lt;strong&gt;WTFCrash&lt;/strong&gt;... ä¸è¿‡ç›´æ¥ç”¨Cçš„APIå»æ‰§è¡ŒJSè²Œä¼¼æ²¡äº‹. åªè¦æƒ³è¦retain, æˆ–è€…copyNameéƒ½ä¼šå¯¼è‡´crash. ä¸çŸ¥é“åŸå› .&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;æ¯æ¬¡buildéƒ½è¦æ¶ˆè€—ä¸€å®šæ—¶é—´å»generate metadata. SSDå¤§æ¦‚åå‡ ç§’çš„æ ·å­?&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;æä¾›äº†ä¸€å¤§å †module, ç”¨å¾—ä¸Šçš„æ²¡å‡ ä¸ª. ä»£ç æ˜¯ç›´æ¥å¤åˆ¶åˆ°app bundle, ç­‰äºå¼€æºäº†, å½“ç„¶å¤„ç†ä¸€ä¸‹ä¹Ÿæ˜¯å¯ä»¥çš„.&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&quot;ä¼˜ç‚¹&quot;&gt;&lt;a href=&quot;#ä¼˜ç‚¹&quot; class=&quot;headerlink&quot; title=&quot;ä¼˜ç‚¹&quot;&gt;&lt;/a&gt;ä¼˜ç‚¹&lt;/h2&gt;&lt;p&gt;å…¶å®ç ”ç©¶ä¸€ä¸‹å®ƒä¸»è¦æ˜¯çœ‹ä¸­å®ƒJSç¼–å†™åŸç”Ÿé¡µé¢çš„èƒ½åŠ›, codingèµ·æ¥è·Ÿå†™OCæˆ–è€…swiftå¾ˆåƒ, è€Œä¸”å¯ä»¥å®Œå…¨ä¸ç†ä¼šå®ƒæä¾›çš„åŒ…, ä¾ç„¶ç”¨è‡ªå·±ç†Ÿæ‚‰çš„æ–¹å¼å¼€å‘. å­¦ä¹ æˆæœ¬å‡ ä¹ä¸º0å•Š. æ„Ÿè§‰å¦‚æœè®¤çœŸç ”ç©¶ä¸€ä¸‹, é…ç½®æˆè¿œç«¯ä¸‹è½½è„šæœ¬åˆ°æœ¬åœ°æ‰§è¡Œåº”è¯¥æ˜¯æ²¡æœ‰é—®é¢˜(å¯èƒ½æœ‰ä¸å°‘å‘). è¿™æ ·çƒ­æ›´æ–°åº”ç”¨, ç”šè‡³å»æ‰h5, æ”¹ç”¨NativeScriptæ¥æä¾›é¡µé¢éƒ½å¯ä»¥å°è¯•, åŸç”Ÿæ•ˆæœè‚¯å®šæ¯”h5å¥½å•Š.&lt;/p&gt;
&lt;p&gt;è¿˜æœ‰å®ƒéµå¾ª&lt;strong&gt;CommonJS&lt;/strong&gt;, å¯ä»¥æ‰“åŒ…ä¸€äº›jsçš„åº“æ¥ç”¨, æŒºæ–¹ä¾¿çš„. &lt;/p&gt;
&lt;p&gt;æœ€é‡è¦çš„ä¸€ç‚¹æœ€åè¯´: å®ƒæ˜¯åœ¨ç¼–è¯‘çš„æ—¶å€™è°ƒç”¨generate metadataå»ç”ŸæˆAPIçš„æ˜ å°„, åœ¨æ‰§è¡Œjsä¹‹å‰ä¼šloadå‡ ä¸ªå¸¸ç”¨æ¨¡å—æ¯”å¦‚UIKit, Foundation, ç„¶åæœ‰äº›æ¨¡å—ä¼šåœ¨ç¬¬ä¸€æ¬¡è°ƒç”¨çš„æ—¶å€™load. å¦‚æœiOSæ›´æ–°äº†, ä½ ä¸éœ€è¦æ›´æ–°NativeScript, å³å¯ç«‹å³å¼€å§‹ä½¿ç”¨æ–°API, å› ä¸ºä½ ç¼–è¯‘çš„æ—¶å€™æ–°çš„APIå°±ä¼šè¢«æ£€ç´¢, è¢«æ”¾åˆ°metadataé‡Œé¢. &lt;/p&gt;
&lt;p&gt;å…¶ä»–çš„æ¯”å¦‚&lt;strong&gt;Xamarin&lt;/strong&gt;å°±å¿…é¡»ç­‰SDKæ›´æ–°æ‰èƒ½æœ‰æœºä¼šè°ƒç”¨æ–°çš„API, è€Œ&lt;strong&gt;React-Native&lt;/strong&gt; ç›®å‰åªèƒ½é€šè¿‡å†™æ¨¡å—æ¥å’Œnativeé€šä¿¡, ä¸å…·å¤‡ç›´æ¥è°ƒç”¨çš„èƒ½åŠ›.&lt;/p&gt;
&lt;p&gt;å¦‚æœå†æœ‰å…¶ä»–è¿›å±•, å†ç»§ç»­æ›´æ–°æœ¬æ–‡.&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;a href=&quot;https://www.nativescript.org/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;NativeScript&lt;/a&gt;æ˜¯ä¸€ä¸ªä¿åŠ åˆ©äºšå…¬å¸&lt;strong&gt;Telerik&lt;/strong&gt;å¼€å‘çš„, å…¶ç›®æ ‡æ¯”è¾ƒå—äº‰è®®: &lt;c
    
    </summary>
    
      <category term="æŠ€æœ¯" scheme="/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
      <category term="iOS" scheme="/tags/iOS/"/>
    
      <category term="NativeScript" scheme="/tags/NativeScript/"/>
    
  </entry>
  
  <entry>
    <title>swift 2.2 ç±»å‹è½¬æ¢å°å‘</title>
    <link href="/2016/03/28/swift_type_convert/"/>
    <id>/2016/03/28/swift_type_convert/</id>
    <published>2016-03-28T06:00:00.000Z</published>
    <updated>2016-04-17T03:36:09.000Z</updated>
    
    <content type="html">&lt;p&gt;XCodeå‡çº§åˆ°äº†7.3, swiftåˆ°äº†2.2. ä¹‹å‰å‘ç°çš„å‘åœ¨è¿™é‡ŒéªŒè¯äº†ä¸€ä¸‹, ä¾ç„¶æ²¡å•¥å˜åŒ–. ç‰¹æ­¤è®°å½•ä¸€ä¸‹.&lt;/p&gt;
&lt;p&gt;æœ¬æ–‡ä¸»è¦å¡«ä¸€ä¸‹ç±»å‹è½¬æ¢çš„å‘, åŒ…æ‹¬ &lt;code&gt;=&lt;/code&gt;, &lt;code&gt;as&lt;/code&gt;, &lt;code&gt;is&lt;/code&gt;, &lt;code&gt;Optional&lt;/code&gt;, &lt;code&gt;å‡½æ•°å‚æ•°&lt;/code&gt;,&lt;code&gt;é—­åŒ…&lt;/code&gt; ä»¥åŠ&lt;code&gt;Tuple&lt;/code&gt;. æ€»ä¹‹, &lt;code&gt;class&lt;/code&gt;å’Œ&lt;code&gt;éclass&lt;/code&gt;çš„å¾…é‡æ˜¯ä¸ä¸€æ ·çš„, Anyå’ŒAnyObjectçš„åŒºåˆ«ä¹Ÿæ˜¯å¾ˆé‡è¦çš„.
&lt;code&gt;=&lt;/code&gt;, &lt;code&gt;as&lt;/code&gt;, &lt;code&gt;is&lt;/code&gt;ä¸»è¦æ˜¯é’ˆå¯¹Arrayç±»å‹, å…¶ä»–&lt;code&gt;CollectionType&lt;/code&gt;ä¹Ÿç±»ä¼¼.&lt;/p&gt;
&lt;p&gt;æœ¬æ–‡ä»£ç ä¸­çš„é€šç”¨å®šä¹‰:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;swift hljs&quot;&gt;&lt;span class=&quot;hljs-class&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;protocol&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;P&lt;/span&gt; &lt;/span&gt;{}    &lt;span class=&quot;hljs-comment&quot;&gt;//swift protocol without @objc&lt;/span&gt;

&lt;span class=&quot;hljs-class&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;A&lt;/span&gt; &lt;/span&gt;{}
&lt;span class=&quot;hljs-class&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;B&lt;/span&gt;: &lt;span class=&quot;hljs-title&quot;&gt;A&lt;/span&gt; &lt;/span&gt;{}

&lt;span class=&quot;hljs-class&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;AP&lt;/span&gt;: &lt;span class=&quot;hljs-title&quot;&gt;P&lt;/span&gt; &lt;/span&gt;{}
&lt;span class=&quot;hljs-class&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;BP&lt;/span&gt;: &lt;span class=&quot;hljs-title&quot;&gt;AP&lt;/span&gt; &lt;/span&gt;{}

&lt;span class=&quot;hljs-class&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;S&lt;/span&gt; &lt;/span&gt;{}
&lt;span class=&quot;hljs-class&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;SP&lt;/span&gt;: &lt;span class=&quot;hljs-title&quot;&gt;P&lt;/span&gt; &lt;/span&gt;{}

&lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; arrayA = [&lt;span class=&quot;hljs-type&quot;&gt;A&lt;/span&gt;()], arrayB = [&lt;span class=&quot;hljs-type&quot;&gt;B&lt;/span&gt;()], arrayS = [&lt;span class=&quot;hljs-type&quot;&gt;S&lt;/span&gt;()], arrayPA: [&lt;span class=&quot;hljs-type&quot;&gt;P&lt;/span&gt;] = [&lt;span class=&quot;hljs-type&quot;&gt;A&lt;/span&gt;()], arrayPS: [&lt;span class=&quot;hljs-type&quot;&gt;P&lt;/span&gt;] = [&lt;span class=&quot;hljs-type&quot;&gt;S&lt;/span&gt;()]&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&quot;as-is-ä»¥åŠ-Optional&quot;&gt;&lt;a href=&quot;#as-is-ä»¥åŠ-Optional&quot; class=&quot;headerlink&quot; title=&quot;as is, = ä»¥åŠ Optional&quot;&gt;&lt;/a&gt;as is, = ä»¥åŠ Optional&lt;/h2&gt;&lt;p&gt;ä¸‰è€…çš„å‘ç±»ä¼¼, ä¸»è¦æ˜¯arrayç±»å‹çš„æ¨æ–­. &lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;code&gt;as&lt;/code&gt;æ“ä½œç¬¦å°†ä¸€ä¸ªç±»å‹è½¬æ¢æˆå¹³çº§ç±»å‹æˆ–è€…çˆ¶ç±»å‹, ä¾‹å¦‚ &lt;code&gt;&amp;quot;abc&amp;quot; as NSString&lt;/code&gt;å¯ä»¥çœ‹æˆæ˜¯å¹³çº§è½¬æ¢, &lt;code&gt;b as A&lt;/code&gt; æ˜¯è½¬æ¢åˆ°çˆ¶ç±»å‹.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;as!&lt;/code&gt;å’Œ&lt;code&gt;as?&lt;/code&gt;æ˜¯ç”¨äºå°†çˆ¶ç±»å‹å˜é‡è½¬æ¢ä¸ºå­ç±»å‹.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;is&lt;/code&gt;æ˜¯checkçˆ¶ç±»å‹å˜é‡æ˜¯å¦ä¸ºå­ç±»å‹.&lt;/li&gt;
&lt;li&gt;æŸç§ç¨‹åº¦ä¸Š, &lt;code&gt;Optional&lt;/code&gt;å¯ä»¥çœ‹åšæ˜¯å…¶&lt;code&gt;T&lt;/code&gt;çš„çˆ¶ç±»å‹.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;æ™®é€šç±»å‹è¿›è¡Œå„ç§è½¬æ¢æ£€æŸ¥éƒ½æ²¡ä»€ä¹ˆé—®é¢˜, ä½†æ˜¯å½“æ™®é€šç±»å‹ç¢°ä¸Š&lt;strong&gt;é›†åˆ&lt;/strong&gt;å‘¢? &lt;/p&gt;
&lt;p&gt;å…ˆçœ‹code:&lt;/p&gt;
&lt;p&gt;as:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;swift hljs&quot;&gt;arrayA &lt;span class=&quot;hljs-keyword&quot;&gt;as&lt;/span&gt; [&lt;span class=&quot;hljs-type&quot;&gt;P&lt;/span&gt;]  &lt;span class=&quot;hljs-comment&quot;&gt;// runtime, fatal error: array cannot be bridged from Objective-C&lt;/span&gt;
arrayA &lt;span class=&quot;hljs-keyword&quot;&gt;as&lt;/span&gt; [&lt;span class=&quot;hljs-type&quot;&gt;Any&lt;/span&gt;]    &lt;span class=&quot;hljs-comment&quot;&gt;// runtime, fatal error: array cannot be bridged from Objective-C&lt;/span&gt;
arrayA &lt;span class=&quot;hljs-keyword&quot;&gt;as&lt;/span&gt; [&lt;span class=&quot;hljs-type&quot;&gt;AnyObject&lt;/span&gt;]    &lt;span class=&quot;hljs-comment&quot;&gt;// OK&lt;/span&gt;
arrayB &lt;span class=&quot;hljs-keyword&quot;&gt;as&lt;/span&gt; [&lt;span class=&quot;hljs-type&quot;&gt;A&lt;/span&gt;]            &lt;span class=&quot;hljs-comment&quot;&gt;// OK&lt;/span&gt;

arrayS &lt;span class=&quot;hljs-keyword&quot;&gt;as&lt;/span&gt; [&lt;span class=&quot;hljs-type&quot;&gt;P&lt;/span&gt;]    &lt;span class=&quot;hljs-comment&quot;&gt;// compiler, Cannot convert value of type &#39;[C]&#39; to type &#39;[P]&#39; in coercion&lt;/span&gt;
arrayS &lt;span class=&quot;hljs-keyword&quot;&gt;as&lt;/span&gt; [&lt;span class=&quot;hljs-type&quot;&gt;Any&lt;/span&gt;]    &lt;span class=&quot;hljs-comment&quot;&gt;// compiler, Cannot convert value of type &#39;[C]&#39; to type &#39;[Any]&#39; in coercion&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;is:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;swift hljs&quot;&gt;arrayPA &lt;span class=&quot;hljs-keyword&quot;&gt;is&lt;/span&gt; [&lt;span class=&quot;hljs-type&quot;&gt;A&lt;/span&gt;] &lt;span class=&quot;hljs-comment&quot;&gt;// OK&lt;/span&gt;
arrayPS &lt;span class=&quot;hljs-keyword&quot;&gt;is&lt;/span&gt; [&lt;span class=&quot;hljs-type&quot;&gt;S&lt;/span&gt;] &lt;span class=&quot;hljs-comment&quot;&gt;// runtime, fatal error: can&#39;t unsafeBitCast between types of different sizes&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;èµ‹å€¼:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;swift hljs&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; a: [&lt;span class=&quot;hljs-type&quot;&gt;P&lt;/span&gt;] = arrayA &lt;span class=&quot;hljs-comment&quot;&gt;// runtime, fatal error: array cannot be bridged from Objective-C&lt;/span&gt;
&lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; a: [&lt;span class=&quot;hljs-type&quot;&gt;Any&lt;/span&gt;] = arrayA &lt;span class=&quot;hljs-comment&quot;&gt;// runtime, fatal error: array cannot be bridged from Objective-C&lt;/span&gt;
&lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; a: [&lt;span class=&quot;hljs-type&quot;&gt;AnyObject&lt;/span&gt;] = arrayA &lt;span class=&quot;hljs-comment&quot;&gt;// OK&lt;/span&gt;

&lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; s: [&lt;span class=&quot;hljs-type&quot;&gt;P&lt;/span&gt;] = arrayS &lt;span class=&quot;hljs-comment&quot;&gt;// runtime, fatal error: array cannot be bridged from Objective-C&lt;/span&gt;
&lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; s: [&lt;span class=&quot;hljs-type&quot;&gt;Any&lt;/span&gt;] = arrayS &lt;span class=&quot;hljs-comment&quot;&gt;// runtime, fatal error: array cannot be bridged from Objective-C&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;å¤§æ¦‚æ˜¯å› ä¸ºOCçš„runtimeå§. å¯ä¸æ˜¯ä¹ˆ? æ–‡æ¡£æœ‰æåˆ°&lt;code&gt;@objc&lt;/code&gt; å°†æŒ‡å®šçš„æ–¹æ³•æˆ–è€…å±æ€§æš´éœ²ç»™OC, è€Œ&lt;code&gt;AnyObject&lt;/code&gt;æ˜¯å¸¦æœ‰è¿™ä¸ªæ ‡è®°çš„, å› æ­¤åœ¨ç±»å‹æ£€æŸ¥å’Œè½¬æ¢æ—¶è¡Œä¸ºè·Ÿ&lt;code&gt;NSArray&lt;/code&gt;å·®ä¸å¤š. &lt;code&gt;Any&lt;/code&gt;æ²¡æœ‰&lt;code&gt;@objc&lt;/code&gt;. &lt;code&gt;protocol&lt;/code&gt; ä¸å¸¦&lt;code&gt;@objc&lt;/code&gt;æ—¶å’Œ&lt;code&gt;Any&lt;/code&gt;ä¸€æ ·, å¸¦ä¸Šäº†&lt;code&gt;@objc&lt;/code&gt;å°±å’Œ&lt;code&gt;AnyObject&lt;/code&gt;ä¸€æ ·. &lt;code&gt;Optional&lt;/code&gt;ä¹Ÿæ˜¯swiftç‰¹æœ‰, å› æ­¤è¡Œä¸ºä¸Šå’ŒAnyç±»ä¼¼.&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;swift hljs&quot;&gt;arrayA &lt;span class=&quot;hljs-keyword&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;hljs-type&quot;&gt;NSArray&lt;/span&gt;    &lt;span class=&quot;hljs-comment&quot;&gt;// OK&lt;/span&gt;
arrayS &lt;span class=&quot;hljs-keyword&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;hljs-type&quot;&gt;NSArray&lt;/span&gt;     &lt;span class=&quot;hljs-comment&quot;&gt;// // compiler, Cannot convert value of type &#39;[S]&#39; to type &#39;NSArray&#39; in coercion&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;åªè¦ä¸ç‰µæ‰¯åˆ°swiftç‰¹æœ‰çš„ä¸œè¥¿(struct, ä¸å¸¦@objcçš„protocol, Optional), å¤§éƒ¨åˆ†çš„è½¬æ¢éƒ½å¯ä»¥çœ‹æˆæ˜¯åˆ°NSArrayçš„è½¬æ¢, å½“ç„¶swiftä¹Ÿæœ‰ç±»å‹æ£€æŸ¥, ä¸èƒ½ä¹±è½¬. &lt;/p&gt;
&lt;p&gt;ç„¶è€Œäº‹æƒ…æ€»æœ‰æ„å¤–...&lt;/p&gt;
&lt;p&gt;çœŸçš„åªèƒ½è¿™æ ·äº†ä¹ˆ? ä¸æ˜¯çš„. å­—é¢é‡æ•°ç»„å¯ä»¥èº²è¿‡ä¸€äº›åŠ«éš¾. å› ä¸ºç±»å‹æ¨æ–­çš„ç¼˜æ•…. ç»§ç»­çœ‹code:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;swift hljs&quot;&gt;[&lt;span class=&quot;hljs-type&quot;&gt;A&lt;/span&gt;()] &lt;span class=&quot;hljs-keyword&quot;&gt;as&lt;/span&gt; [&lt;span class=&quot;hljs-type&quot;&gt;P&lt;/span&gt;]
[&lt;span class=&quot;hljs-type&quot;&gt;A&lt;/span&gt;()] &lt;span class=&quot;hljs-keyword&quot;&gt;as&lt;/span&gt; [&lt;span class=&quot;hljs-type&quot;&gt;Any&lt;/span&gt;]
[&lt;span class=&quot;hljs-type&quot;&gt;A&lt;/span&gt;()] &lt;span class=&quot;hljs-keyword&quot;&gt;as&lt;/span&gt; [&lt;span class=&quot;hljs-type&quot;&gt;AnyObject&lt;/span&gt;]

[&lt;span class=&quot;hljs-type&quot;&gt;S&lt;/span&gt;()] &lt;span class=&quot;hljs-keyword&quot;&gt;as&lt;/span&gt; [&lt;span class=&quot;hljs-type&quot;&gt;P&lt;/span&gt;]
[&lt;span class=&quot;hljs-type&quot;&gt;S&lt;/span&gt;()] &lt;span class=&quot;hljs-keyword&quot;&gt;as&lt;/span&gt; [&lt;span class=&quot;hljs-type&quot;&gt;Any&lt;/span&gt;]&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ç±»å‹æ¨æ–­è‡³ä¸Šè€Œä¸‹, è¡¨è¾¾å¼çš„ç±»å‹æœ€ç»ˆä¸º[P], å€’æ¨å·¦å€¼éœ€è¦ä¸º[P], æ­¤æ—¶å·¦å€¼åªçŸ¥é“æ˜¯Array, æœªæ¨æ–­T, è¿›è€Œç»§ç»­æ¨æ–­å…¶Generator.Elementéœ€è¦ä¸ºP. è€ŒAå¯ä»¥è½¬æ¢ä¸ºP, æ‰€ä»¥å­—é¢é‡æ•°ç»„åˆ›å»ºå‡ºæ¥å°±æ˜¯[P]ç±»å‹è€Œä¸å­˜åœ¨è½¬æ¢. è¿™æ˜¯ç¼–è¯‘å™¨åšçš„.&lt;/p&gt;
&lt;p&gt;èµ‹å€¼çš„æ“ä½œç±»ä¼¼, åªè¦æŠŠå³å€¼æ¢æˆå¯¹åº”çš„å­—é¢é‡æ•°ç»„å°±å¯ä»¥æˆåŠŸèµ‹å€¼, è€Œ&lt;code&gt;is&lt;/code&gt;æ“ä½œå› ä¸ºç±»å‹æ¨æ–­, å­—é¢é‡æ•°ç»„æœ€ç»ˆçš„ç±»å‹å°±æ˜¯å³å€¼, æ²¡æœ‰æ„ä¹‰. &lt;/p&gt;
&lt;p&gt;å“¦, ç±»å‹æ¨æ–­å“ª...&lt;/p&gt;
&lt;h2 id=&quot;å‡½æ•°å‚æ•°-å’Œ-é—­åŒ…&quot;&gt;&lt;a href=&quot;#å‡½æ•°å‚æ•°-å’Œ-é—­åŒ…&quot; class=&quot;headerlink&quot; title=&quot;å‡½æ•°å‚æ•° å’Œ é—­åŒ…&quot;&gt;&lt;/a&gt;å‡½æ•°å‚æ•° å’Œ é—­åŒ…&lt;/h2&gt;&lt;p&gt;å‡½æ•°æœ‰å…¥å‚å’Œè¿”å›å€¼, è°ƒç”¨å‡½æ•°æ—¶ä¼ é€’å‚æ•°ä¹Ÿæ˜¯ä¸€ä¸ªèµ‹å€¼çš„è¿‡ç¨‹, å› æ­¤å¯ä»¥å‚è€ƒä¸Šæ–‡çš„ç°è±¡. ä¹Ÿå°±æ˜¯è¯´ä¼ é€’è¿›æ¥çš„å‚æ•°è¦èƒ½æ­£ç¡®è½¬æ¢æˆå‡½æ•°éœ€è¦çš„ç±»å‹, å‡½æ•°å†…éƒ¨çš„è¿”å›å€¼ä¹Ÿè¦èƒ½æ­£ç¡®è½¬æ¢ä¸ºå£°æ˜çš„ç±»å‹. åªè¦ç¬¦åˆè¿™äº›æ¡ä»¶, è°ƒç”¨å°±æ²¡æœ‰é—®é¢˜.&lt;/p&gt;
&lt;p&gt;é‚£ä¹ˆé—®é¢˜æ¥äº†, é—­åŒ…ä¹Ÿæ˜¯å‡½æ•°, é—­åŒ…çš„ç±»å‹å¦‚ä½•è½¬æ¢?&lt;/p&gt;
&lt;p&gt;åˆæ¥ä¸€ä»½code:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;swift hljs&quot;&gt;&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;test&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(f: A -&amp;gt; P)&lt;/span&gt;&lt;/span&gt; {}
&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;param&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(p: P)&lt;/span&gt;&lt;/span&gt; -&amp;gt; &lt;span class=&quot;hljs-type&quot;&gt;A&lt;/span&gt; {}

test(param)    &lt;span class=&quot;hljs-comment&quot;&gt;// OK&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;åŸç†å¹¶ä¸éš¾, å…ˆçœ‹é—­åŒ…çš„å…¥å‚, éœ€æ±‚ä¸ºAç±»å‹, ä¹Ÿå°±æ„å‘³ç€åœ¨&lt;code&gt;test&lt;/code&gt;æ–¹æ³•å†…éƒ¨ä¼šä¼ é€’ä¸€ä¸ªå˜é‡ç»™&lt;code&gt;f&lt;/code&gt;, è¿™ä¸ªå˜é‡ä¼šåœ¨ä¼ é€’ç»™&lt;code&gt;f&lt;/code&gt;æ—¶è½¬æ¢ä¸º&lt;code&gt;A&lt;/code&gt;ç±»å‹. ä¹Ÿå°±æ˜¯è¯´&lt;code&gt;f&lt;/code&gt;åº”è¯¥èƒ½å¤Ÿå¤„ç†&lt;code&gt;A&lt;/code&gt;ç±»å‹çš„å…¥å‚.å› æ­¤, å¦‚æœæˆ‘ä»¬ä¼ é€’çš„é—­åŒ…çš„å…¥å‚æ˜¯&lt;code&gt;A&lt;/code&gt;çš„çˆ¶ç±»å‹&lt;code&gt;P&lt;/code&gt;, å®ƒä¹Ÿèƒ½å¤„ç†ç±»å‹ä¸º&lt;code&gt;A&lt;/code&gt;çš„å‚æ•°, è€Œå¦‚æœæ˜¯å­ç±»å‹&lt;code&gt;B&lt;/code&gt;åˆ™å¯èƒ½å‡ºé”™. &lt;/p&gt;
&lt;p&gt;&lt;code&gt;A&lt;/code&gt;ä¸€å®šæ˜¯&lt;code&gt;P&lt;/code&gt;ä½†ä¸ä¸€å®šæ˜¯&lt;code&gt;B&lt;/code&gt;. &lt;/p&gt;
&lt;p&gt;åŒæ ·, å¯¹äºè¿”å›å€¼, &lt;code&gt;test&lt;/code&gt;æ–¹æ³•è¦è¿”å›&lt;code&gt;P&lt;/code&gt;ç±»å‹, å› æ­¤æˆ‘ä»¬å¯ä»¥è¿”å›&lt;code&gt;P&lt;/code&gt;ç±»å‹çš„å­ç±»å‹&lt;code&gt;A&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;å‰æ–‡æåˆ°, æŸç§ç¨‹åº¦ä¸Šå¯ä»¥å°†&lt;code&gt;Optional&lt;/code&gt;çœ‹åšæ˜¯å…¶&lt;code&gt;T&lt;/code&gt;çš„çˆ¶ç±»å‹, å› ä¸ºç¼–ç è¿‡ç¨‹ä¸­å‘ç°å®ƒåœ¨ç±»å‹è½¬æ¢ä¸Šçš„ç»“æœå’Œçˆ¶ç±»å‹å­ç±»å‹çš„ä¸€è‡´.å› æ­¤ä¸‹é¢çš„codeä¹Ÿä¸éœ€è¦ç‰¹åˆ«å¤„ç†:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;swift hljs&quot;&gt;&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;testNil&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;()&lt;/span&gt;&lt;/span&gt; -&amp;gt; &lt;span class=&quot;hljs-type&quot;&gt;A&lt;/span&gt;? {
    &lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; a = &lt;span class=&quot;hljs-type&quot;&gt;A&lt;/span&gt;()
    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; a         &lt;span class=&quot;hljs-comment&quot;&gt;// ç¼–è¯‘å™¨è‡ªåŠ¨wrap&lt;/span&gt;
}&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&quot;Tuple&quot;&gt;&lt;a href=&quot;#Tuple&quot; class=&quot;headerlink&quot; title=&quot;Tuple&quot;&gt;&lt;/a&gt;Tuple&lt;/h2&gt;&lt;p&gt;Tupleæ²¡æœ‰ä»€ä¹ˆç‰¹åˆ«çš„, å°±æ˜¯ç±»å‹è½¬æ¢çš„æ—¶å€™ä¸ç®¡ç±»å‹ç»§æ‰¿, å½“ç„¶, å­—é¢é‡æ–¹å¼é™¤å¤–. çœ‹èµ·æ¥å°±åƒæ˜¯å­—ç¬¦ä¸²æ¯”è¾ƒ:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;swift hljs&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; value = (&lt;span class=&quot;hljs-type&quot;&gt;A&lt;/span&gt;(), &lt;span class=&quot;hljs-type&quot;&gt;A&lt;/span&gt;()) &lt;span class=&quot;hljs-keyword&quot;&gt;as&lt;/span&gt; (&lt;span class=&quot;hljs-type&quot;&gt;P&lt;/span&gt;, &lt;span class=&quot;hljs-type&quot;&gt;P&lt;/span&gt;)    &lt;span class=&quot;hljs-comment&quot;&gt;// value æ˜¯ (P, P)ç±»å‹&lt;/span&gt;
&lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; value &lt;span class=&quot;hljs-keyword&quot;&gt;is&lt;/span&gt; (&lt;span class=&quot;hljs-type&quot;&gt;A&lt;/span&gt;, &lt;span class=&quot;hljs-type&quot;&gt;A&lt;/span&gt;) {

} &lt;span class=&quot;hljs-keyword&quot;&gt;else&lt;/span&gt; {
    &lt;span class=&quot;hljs-comment&quot;&gt;// will got here&lt;/span&gt;
}&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&quot;æ€»ç»“-5&quot;&gt;&lt;a href=&quot;#æ€»ç»“-5&quot; class=&quot;headerlink&quot; title=&quot;æ€»ç»“&quot;&gt;&lt;/a&gt;æ€»ç»“&lt;/h2&gt;&lt;p&gt;å†™çš„æ—¶å€™å°½é‡æ³¨æ„å§, ä¸è¦ä»¥ä¸ºbuildè¿‡äº†å°±æ²¡äº‹, ä¸€äº›è½¬æ¢çš„å‘åœ¨runtimeç­‰ä½ å‘¢(çœ‹ä¸Šè¾¹çš„æŠ¥é”™çš„æ³¨é‡Šå§). æ‹¿ä¸å‡†å°±ä¸»åŠ¨åšä¸ªmapå§.&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;XCodeå‡çº§åˆ°äº†7.3, swiftåˆ°äº†2.2. ä¹‹å‰å‘ç°çš„å‘åœ¨è¿™é‡ŒéªŒè¯äº†ä¸€ä¸‹, ä¾ç„¶æ²¡å•¥å˜åŒ–. ç‰¹æ­¤è®°å½•ä¸€ä¸‹.&lt;/p&gt;
&lt;p&gt;æœ¬æ–‡ä¸»è¦å¡«ä¸€ä¸‹ç±»å‹è½¬æ¢çš„å‘, åŒ…æ‹¬ &lt;code&gt;=&lt;/code&gt;, &lt;code&gt;as&lt;/code&gt;, &lt;code&gt;is&lt;/code&gt;, &lt;cod
    
    </summary>
    
      <category term="æŠ€æœ¯" scheme="/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
      <category term="iOS" scheme="/tags/iOS/"/>
    
      <category term="swift" scheme="/tags/swift/"/>
    
  </entry>
  
  <entry>
    <title>2016 å¹´åå°æ€»ç»“</title>
    <link href="/2016/03/15/%E5%B9%B4%E5%90%8E%E5%B0%8F%E6%80%BB%E7%BB%93/"/>
    <id>/2016/03/15/å¹´åå°æ€»ç»“/</id>
    <published>2016-03-15T07:00:00.000Z</published>
    <updated>2016-04-05T13:05:40.000Z</updated>
    
    <content type="html">&lt;p&gt;kaizeiçš„2015å°æ€»ç»“. æ€»ç®—ä¹Ÿæ˜¯å†™äº†æ€»ç»“äº†...&lt;/p&gt;
&lt;p&gt;é—®: ä¸åº”è¯¥å¹´å‰å†™æ€»ç»“ä¹ˆ?&lt;/p&gt;
&lt;p&gt;ç­”: æ˜¯çš„, ä½†æ˜¯... hehe
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;æ¯ä¸ªäººéƒ½æœ‰è‡ªå·±å¯ä»¥å¡«åœ¨ä½†æ˜¯åé¢çš„è¯, æˆ‘çš„æ˜¯ä»€ä¹ˆ? ä¸å‘Šè¯‰ä½ .&lt;/p&gt;
&lt;h2 id=&quot;æ­£æ–‡&quot;&gt;&lt;a href=&quot;#æ­£æ–‡&quot; class=&quot;headerlink&quot; title=&quot;æ­£æ–‡&quot;&gt;&lt;/a&gt;æ­£æ–‡&lt;/h2&gt;&lt;p&gt;è¿‡å®Œå¹´äº†, å—¯, ä¸ç”¨æé†’æˆ‘å·²ç»è¿‡äº†1ä¸ªå¤šæœˆäº†. å»å¹´ä¸€å¹´å¾ˆé¢ ç°¸, è·³äº†ä¸¤æ¬¡æ§½, 2æœˆä»½ç¦»å¼€äººäººå»äº†tango, ç„¶å8æœˆä»½ç¦»å¼€tangoæ¥åˆ°äº†ç°åœ¨çš„å…¬å¸--è´¢è¯´. &lt;/p&gt;
&lt;p&gt;æŠ€æœ¯ä¸Šè¿˜æ˜¯é‚£æ ·, iOSä¸ºä¸», å…¬å¸ä½¿ç”¨swiftå¼€å‘, ç»å†äº†1åˆ°2çš„è¿ç§», æˆ‘ä»¬çš„ä»£ç è´¨é‡è›®é«˜, ç»“æ„ä¹Ÿæ¯”è¾ƒåˆç†, å¾ˆå°‘çš„æ—¶é—´å°±å®Œæˆäº†. å¹´åº•ç”¨swiftå¼€å‘äº†å‡ ä¸ªåº“, &lt;a href=&quot;https://github.com/kaizeiyimi/XLYAnimatedImage&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;åŠ¨å›¾æ’­æ”¾&lt;/a&gt;, &lt;a href=&quot;https://github.com/kaizeiyimi/XAutoLayout&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;XAutoLayout&lt;/a&gt;,  &lt;a href=&quot;https://github.com/kaizeiyimi/XLYTextKitExtension&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;æ‰©å±•TextKit&lt;/a&gt;, &lt;a href=&quot;https://github.com/kaizeiyimi/Phantom&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Phantom&lt;/a&gt;, å‰ä¸¤ä¸ªçš„è´¨é‡é«˜ä¸€äº›, åé¢ä¸¤ä¸ªæ›´åƒæ˜¯è¯•éªŒå“. åæ§½ä¸€å¥: ç”¨swiftå¼€å‘å’Œåªæ˜¯ç«™åœ¨æ—è¾¹å­¦ä¹ æ˜¯å®Œå…¨ä¸ä¸€æ ·çš„. ğŸ˜›&lt;/p&gt;
&lt;p&gt; æœ‰ç©ºå€’è…¾äº†ä¸€ä¸‹webæŠ€æœ¯, æ„Ÿè§‰webæŠ€æœ¯æ‰æ˜¯æœªæ¥çš„éœ¸ä¸». æ–­æ–­ç»­ç»­çœ‹äº†ä¸€äº›jsçš„ä¹¦ç±, ä¹Ÿå€’è…¾äº†ä¸€äº›å·¥å…·, &lt;code&gt;gulp&lt;/code&gt;, &lt;code&gt;browser-sync&lt;/code&gt;ä¹‹ç±»çš„, è¿˜æŒºæœ‰æ„æ€çš„.&lt;/p&gt;
&lt;p&gt;ç”Ÿæ´»ä¸Šæœ‰ç‚¹å„¿æ‚²å‚¬. å·¥ä½œæ€§è´¨åŠ ä¸Šæˆ‘ä¸€èˆ¬æ¯”è¾ƒæŠ•å…¥, ä¹…åè¾ƒå¤š, äººèƒ–äº†, æ°”è‰²å·®äº†, å¤´å‘å°‘äº†, è„¾æ°”ä¹Ÿæ²¡ä»¥å‰å¥½äº†, æ€»ä¹‹æ•´ä¸ªäººéƒ½ä¸å¥½äº†. æ¬å®¶ä¹Ÿæ¬äº†ä¸¤æ¬¡, ç§Ÿæˆ¿ä½çš„æ‚²å“€. ç°åœ¨åˆå›åˆ°äº†æœ€å¼€å§‹çš„åœ°è’--ç«‹æ°´æ¡¥. ç«‹æ°´æ¡¥è¿˜æ˜¯é‚£ä¸ªç«‹æ°´æ¡¥, ä½†æ˜¯æˆ¿ç§Ÿå·²ç»ä¸æ˜¯é‚£ä¸ªä»·ä½çš„æˆ¿ç§Ÿäº†. å–æ–¹å¸‚åœºä¸‹çš„æˆ‘ä»¬ä¹Ÿåªèƒ½æŒ£æ‰å´æ— æ³•æ‘†è„±å¹´å¹´æ¶¨ç§Ÿçš„é—®é¢˜.&lt;/p&gt;
&lt;p&gt;ä»Šå¹´è¦å¤šå¤šé”»ç‚¼èº«ä½“, å¤šçœ‹ç‚¹å„¿æ–‡å­¦ä¹¦ç±. ç¯®çƒå·²ç»ç˜ªäº†, è¦æ‰“æ°”äº†. å‰ä»–ä¸Šçš„ç°å¾ˆå¤š, è¦æ“¦ä¸€ä¸‹äº†. &lt;/p&gt;
&lt;p&gt;&lt;span style=&quot;color:rgb(179,62,170)&quot;&gt;darling&lt;/span&gt;è¯´, èº«ä¸Šçš„è‚‰è‚¥äº†, å†ä¸é”»ç‚¼å°±è¯¥å‰²äº†!&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;kaizeiçš„2015å°æ€»ç»“. æ€»ç®—ä¹Ÿæ˜¯å†™äº†æ€»ç»“äº†...&lt;/p&gt;
&lt;p&gt;é—®: ä¸åº”è¯¥å¹´å‰å†™æ€»ç»“ä¹ˆ?&lt;/p&gt;
&lt;p&gt;ç­”: æ˜¯çš„, ä½†æ˜¯... hehe
    
    </summary>
    
      <category term="æ—¥å¸¸" scheme="/categories/%E6%97%A5%E5%B8%B8/"/>
    
    
      <category term="å¹´ç»ˆæ€»ç»“" scheme="/tags/%E5%B9%B4%E7%BB%88%E6%80%BB%E7%BB%93/"/>
    
  </entry>
  
  <entry>
    <title>XLYAutoLayoutEasy</title>
    <link href="/2014/12/08/XLYAutoLayoutEasy/"/>
    <id>/2014/12/08/XLYAutoLayoutEasy/</id>
    <published>2014-12-08T08:00:00.000Z</published>
    <updated>2016-04-04T10:07:09.000Z</updated>
    
    <content type="html">&lt;p&gt;å¼€å‘AutoLayoutEasyçš„ç›®çš„æ˜¯ä¸ºäº†è®©ä»£ç ç¼–å†™AutoLayoutæ›´åŠ æ–¹ä¾¿ç›´è§‚, æé«˜å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§. å› ä¸ºæˆ‘ä¸ªäººè§‰å¾—iOSæä¾›çš„åˆ›å»ºçº¦æŸçš„æ–¹å¼çœŸå¿ƒä¸æ•¢æ­ç»´, NSLayoutConstraintçš„ç±»æ–¹æ³•å†™èµ·æ¥å¥½é•¿, VFLåˆä¸å¥½æ“ä½œå…·ä½“çº¦æŸ, å†™å‡ºæ¥çš„ä»£ç å¯è¯»æ€§ä¹Ÿä¸æ˜¯å¾ˆé«˜.&lt;/p&gt;
&lt;h2 id=&quot;å¦‚ä½•åˆ›å»ºä¸€ä¸ªçº¦æŸ&quot;&gt;&lt;a href=&quot;#å¦‚ä½•åˆ›å»ºä¸€ä¸ªçº¦æŸ&quot; class=&quot;headerlink&quot; title=&quot;å¦‚ä½•åˆ›å»ºä¸€ä¸ªçº¦æŸ&quot;&gt;&lt;/a&gt;å¦‚ä½•åˆ›å»ºä¸€ä¸ªçº¦æŸ&lt;/h2&gt;&lt;p&gt;è‹¹æœåœ¨NSLayoutConstraintä¸­æä¾›äº†ä¸€ä¸ªç±»æ–¹æ³•&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;objc hljs&quot;&gt;+(instancetype)constraintWithItem:(&lt;span class=&quot;hljs-keyword&quot;&gt;id&lt;/span&gt;)view1 
                        attribute:(&lt;span class=&quot;hljs-built_in&quot;&gt;NSLayoutAttribute&lt;/span&gt;)attr1 
                        relatedBy:(&lt;span class=&quot;hljs-built_in&quot;&gt;NSLayoutRelation&lt;/span&gt;)relation
                           toItem:(&lt;span class=&quot;hljs-keyword&quot;&gt;id&lt;/span&gt;)view2 
                        attribute:(&lt;span class=&quot;hljs-built_in&quot;&gt;NSLayoutAttribute&lt;/span&gt;)attr2 
                       multiplier:(&lt;span class=&quot;hljs-built_in&quot;&gt;CGFloat&lt;/span&gt;)multiplier 
                         constant:(&lt;span class=&quot;hljs-built_in&quot;&gt;CGFloat&lt;/span&gt;)c;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ç”¨äºåˆ›å»ºä¸¤ä¸ªitemä¹‹é—´çš„çº¦æŸ, ä¸€æ¬¡åªèƒ½æè¿°æŸä¸¤ä¸ªå±æ€§çš„å…³ç³». æ¯”å¦‚éœ€è¦view1çš„leftå’Œview2çš„rightä¿æŒ10çš„åç§»é‡. é‚£ä¹ˆè¿™é‡Œçš„è°ƒç”¨å°±æ˜¯è¿™æ ·:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;objc hljs&quot;&gt;[&lt;span class=&quot;hljs-built_in&quot;&gt;NSLayoutConstraint&lt;/span&gt; constraintWithItem:view1 
                             attribute:&lt;span class=&quot;hljs-built_in&quot;&gt;NSLayoutAttributeLeft&lt;/span&gt;
                             relatedBy:&lt;span class=&quot;hljs-built_in&quot;&gt;NSLayoutRelationEqual&lt;/span&gt;
                                toItem:view2
                             attribute:&lt;span class=&quot;hljs-built_in&quot;&gt;NSLayoutAttributeRight&lt;/span&gt;
                            multiplier:&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;
                              constant:&lt;span class=&quot;hljs-number&quot;&gt;10&lt;/span&gt;];&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;å¥½é•¿æœ‰æœ¨æœ‰, ä½†æ˜¯å¾ˆæ¸…æ™°, è‡³å°‘æ˜ç¡®åœ°è¡¨è¾¾äº†ä¸¤ä¸ªviewçš„ä¸¤ä¸ªå±æ€§é—´çš„å…³ç³». VFLçš„æå†™æ–¹å¼å°±ä¸å†™äº†. è¿™é‡Œè·å–åˆ°äº†ä¸€ä¸ªconstraintå¯¹è±¡, ä¸‹ä¸€æ­¥æˆ‘éœ€è¦è®©å®ƒç”Ÿæ•ˆ, æˆ‘éœ€è¦æ‰¾åˆ°ä¸€ä¸ªviewå»è°ƒç”¨&lt;code&gt;[view addConstraint:constraint]&lt;/code&gt;, è¿™ä¸ªviewå¿…é¡»æ˜¯view1å’Œview2çš„ä¸€ä¸ªå…¬å…±çˆ¶view. å®Œæˆæ“ä½œå, ç­‰åˆ°ä¸‹ä¸€ä¸ªåˆ·æ–°å‘¨æœŸçº¦æŸå°±ä¼šç”Ÿæ•ˆäº†.&lt;/p&gt;
&lt;h2 id=&quot;XLYAutoLayoutEasy&quot;&gt;&lt;a href=&quot;#XLYAutoLayoutEasy&quot; class=&quot;headerlink&quot; title=&quot;XLYAutoLayoutEasy&quot;&gt;&lt;/a&gt;XLYAutoLayoutEasy&lt;/h2&gt;&lt;p&gt;è™½ç„¶åˆ›å»ºçº¦æŸçš„æ–¹æ³•å¾ˆç›´è§‚, ä½†æ˜¯æˆ‘ä»ç„¶è®¤ä¸ºå®ƒå¤ªå¤æ‚, å¤ªé•¿äº†. å±å¹•æ€æ‰‹. å…ˆçœ‹ä¸€çœ¼æˆ‘çš„libå¦‚ä½•æå†™ä¸€ä¸ªçº¦æŸ.&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;objc hljs&quot;&gt;  view1.layoutLeft.equalTo(view2.layoutRight).constant(&lt;span class=&quot;hljs-number&quot;&gt;10&lt;/span&gt;);&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;æ€ä¹ˆçœ‹éƒ½æ›´åŠ ç®€å•. &lt;strong&gt;ç®€åŒ–çº¦æŸçš„åˆ›å»ºæ˜¯XLYAutoLayoutEasyçš„æ ¸å¿ƒ&lt;/strong&gt;, æ‰€æœ‰çš„çº¦æŸåˆ›å»ºéƒ½ä½¿ç”¨ç±»ä¼¼çš„æ–¹æ³•. å¦‚æœfirstItemå’ŒsecondItemä½¿ç”¨ç›¸åŒçš„layoutå±æ€§, å¯ä»¥ä¸ç”¨ä¹¦å†™secondItemçš„layoutå±æ€§. å¦‚ä¸‹:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;objc hljs&quot;&gt;  &lt;span class=&quot;hljs-comment&quot;&gt;//view1çš„å®½åº¦ç­‰äºview2çš„å®½åº¦ä¹˜1å†åŠ ä¸Š10&lt;/span&gt;
  view1.layoutWidth.equalTo(view2).constant(&lt;span class=&quot;hljs-number&quot;&gt;10&lt;/span&gt;);&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;å¦‚æœæ˜¯æ ¹superViewçš„å¯¹åº”å±æ€§åšçº¦æŸ, ç”šè‡³å¯ä»¥å†™æˆè¿™æ ·:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;objc hljs&quot;&gt;  &lt;span class=&quot;hljs-comment&quot;&gt;//ç­‰åŒview1.layoutLeading.equalTo(superView.layoutLeading).constant(100);&lt;/span&gt;
  view1.layoutLeading.equalTo(&lt;span class=&quot;hljs-number&quot;&gt;100&lt;/span&gt;);&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ä¸Šé¢çš„å•è¡Œä»£ç åˆ›å»ºçš„æ˜¯XLYConstraintå¯¹è±¡, éœ€è¦è°ƒç”¨resultConstraintæ¥è·å–NSLayoutConstraintå¯¹è±¡.&lt;/p&gt;
&lt;p&gt;XLYAutoLayoutEasyè¿˜é¡ºå¸¦æä¾›äº†ä¸€äº›helperæ–¹æ³•, è¾…åŠ©æ¿€æ´», æ›´æ–°å’Œé‡å»ºçº¦æŸ. &lt;/p&gt;
&lt;h4 id=&quot;æ‰¹é‡åˆ›å»ºçº¦æŸ&quot;&gt;&lt;a href=&quot;#æ‰¹é‡åˆ›å»ºçº¦æŸ&quot; class=&quot;headerlink&quot; title=&quot;æ‰¹é‡åˆ›å»ºçº¦æŸ&quot;&gt;&lt;/a&gt;æ‰¹é‡åˆ›å»ºçº¦æŸ&lt;/h4&gt;&lt;pre&gt;&lt;code class=&quot;objc hljs&quot;&gt;[&lt;span class=&quot;hljs-built_in&quot;&gt;UIView&lt;/span&gt; makeConstraints:^{
  testView.layoutTop.equalTo(&lt;span class=&quot;hljs-keyword&quot;&gt;self&lt;/span&gt;.topLayoutGuideView.layoutBottom).constant(&lt;span class=&quot;hljs-number&quot;&gt;50&lt;/span&gt;);
  testView.layoutTrailing.equalTo(&lt;span class=&quot;hljs-keyword&quot;&gt;self&lt;/span&gt;.view).constant(&lt;span class=&quot;hljs-number&quot;&gt;-50&lt;/span&gt;);
  testView.layoutLeading.equalToConstant(&lt;span class=&quot;hljs-number&quot;&gt;50&lt;/span&gt;);
  testView.layoutHeight.equalToConstant(&lt;span class=&quot;hljs-number&quot;&gt;100&lt;/span&gt;);
}];&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ä½¿ç”¨makeConstraintçš„æ–¹æ³•ä¼šè‡ªåŠ¨å°†blocké‡Œé¢åˆ›å»ºçš„çº¦æŸæ¿€æ´», æ— éœ€å†è‡ªè¡Œå¯»æ‰¾å…¬å…±çˆ¶viewè¿›è¡Œæ·»åŠ .&lt;/p&gt;
&lt;h4 id=&quot;æ›´æ–°çº¦æŸ&quot;&gt;&lt;a href=&quot;#æ›´æ–°çº¦æŸ&quot; class=&quot;headerlink&quot; title=&quot;æ›´æ–°çº¦æŸ&quot;&gt;&lt;/a&gt;æ›´æ–°çº¦æŸ&lt;/h4&gt;&lt;pre&gt;&lt;code class=&quot;objc hljs&quot;&gt;[&lt;span class=&quot;hljs-built_in&quot;&gt;UIView&lt;/span&gt; updateConstraints:^{
  &lt;span class=&quot;hljs-keyword&quot;&gt;self&lt;/span&gt;.testView.layoutLeading.equalTo(&lt;span class=&quot;hljs-keyword&quot;&gt;self&lt;/span&gt;.view).constant(&lt;span class=&quot;hljs-number&quot;&gt;100&lt;/span&gt;);
  &lt;span class=&quot;hljs-keyword&quot;&gt;self&lt;/span&gt;.testView.layoutHeight.equalTo(&lt;span class=&quot;hljs-number&quot;&gt;50&lt;/span&gt;);
}];&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;æ‰€æœ‰åœ¨updateConstraintsé‡Œé¢åˆ›å»ºçš„çº¦æŸä¼šé¦–å…ˆæŸ¥æ‰¾æœ‰æ²¡æœ‰ä¸€ä¸ªçº¦æŸå’Œåˆ›å»ºå‡ºæ¥çš„çº¦æŸç›¸ä¼¼(åæ–‡ä¼šè§£é‡Šç›¸ä¼¼çš„åˆ¤å®š), å¦‚æœæœ‰, åˆ™ä¿®æ”¹constant, å¦åˆ™æ·»åŠ æ–°åˆ›å»ºçš„çº¦æŸ. 
å¦‚æœä½¿ç”¨iOSçš„æ–¹æ³•, åˆ™éœ€è¦è®°å½•ä¸‹ä¹‹å‰åˆ›å»ºçš„çº¦æŸæ¥ä¿®æ”¹constant. &lt;/p&gt;
&lt;h4 id=&quot;é‡å»ºçº¦æŸ&quot;&gt;&lt;a href=&quot;#é‡å»ºçº¦æŸ&quot; class=&quot;headerlink&quot; title=&quot;é‡å»ºçº¦æŸ&quot;&gt;&lt;/a&gt;é‡å»ºçº¦æŸ&lt;/h4&gt;&lt;pre&gt;&lt;code class=&quot;objc hljs&quot;&gt;[&lt;span class=&quot;hljs-built_in&quot;&gt;UIView&lt;/span&gt; remakeConstraints:^{  &lt;span class=&quot;hljs-keyword&quot;&gt;self&lt;/span&gt;.testView.layoutBottom.equalTo(&lt;span class=&quot;hljs-keyword&quot;&gt;self&lt;/span&gt;.bottomLayoutGuideView.layoutTop).constant(&lt;span class=&quot;hljs-number&quot;&gt;-100&lt;/span&gt;);
    &lt;span class=&quot;hljs-keyword&quot;&gt;self&lt;/span&gt;.testView.layoutWidth.equalTo(&lt;span class=&quot;hljs-number&quot;&gt;100&lt;/span&gt;);
    &lt;span class=&quot;hljs-keyword&quot;&gt;self&lt;/span&gt;.testView.layoutHeight.equalTo(&lt;span class=&quot;hljs-number&quot;&gt;100&lt;/span&gt;);
    &lt;span class=&quot;hljs-keyword&quot;&gt;self&lt;/span&gt;.testView.layoutLeading.equalTo(&lt;span class=&quot;hljs-keyword&quot;&gt;self&lt;/span&gt;.view.layoutLeading);
}];&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;æ–¹æ³•ä¼šè®°å½•æ‰€æœ‰åœ¨remakeConstraintsä¸­å‡ºç°çš„ä½œä¸ºfirstItemçš„view, å¹¶æŠŠè·Ÿè¿™äº›viewç›¸å…³çš„æ‰€æœ‰çº¦æŸå»æ‰(ä¸åŒ…å«hugging, compression resistance çš„çº¦æŸ), ç„¶åé‡æ–°æ¿€æ´»æ–°åˆ›å»ºçš„çº¦æŸ.&lt;/p&gt;
&lt;h2 id=&quot;çµæ„Ÿ&quot;&gt;&lt;a href=&quot;#çµæ„Ÿ&quot; class=&quot;headerlink&quot; title=&quot;çµæ„Ÿ&quot;&gt;&lt;/a&gt;çµæ„Ÿ&lt;/h2&gt;&lt;p&gt;å¤§å‰ææ˜¯&lt;code&gt;translatesAutoresizingMaskIntoConstraints = NO&lt;/code&gt;. å¦åˆ™æ— æ³•ç©è€äº†. æ—¢ç„¶ä½¿ç”¨äº†autoLayoutå°±ä¸è¦å†æ­ç€AutoResizingMaskäº†.&lt;/p&gt;
&lt;p&gt;ç®€å•æè¿°ä¸€ä¸‹XLYAutoLayoutEasyçš„è®¾è®¡çµæ„Ÿæ¥æº. åœ¨storyboardä¸­ç¼–è¾‘ä¸€ä¸ªçº¦æŸæ—¶, æˆ‘å‘ç°xcodeæ ‡æ³¨äº†firstItem, relation, secondItem, constant, priority, multiplier. å…¶ä¸­firstItemå’ŒsecondItemæ˜¾ç¤ºçš„æ˜¯view.widthè¿™æ ·çš„å½¢å¼, æ•´ä¸ªçº¦æŸçœ‹èµ·æ¥ååˆ†æ¸…æ™°. äºæ˜¯æƒ³åˆ°å¦‚æœèƒ½åœ¨ä»£ç é‡Œé¢ç”¨&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;null hljs&quot;&gt;view1&lt;span class=&quot;hljs-selector-class&quot;&gt;.width&lt;/span&gt; equalTo view2&lt;span class=&quot;hljs-selector-class&quot;&gt;.width&lt;/span&gt;, constant &lt;span class=&quot;hljs-number&quot;&gt;50&lt;/span&gt;, priority &lt;span class=&quot;hljs-number&quot;&gt;1000&lt;/span&gt;, multiplier &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è¿™æ ·çš„å½¢å¼æè¿°é‚£å¤šå¥½.ä¸€ä¸‹å°±çœ‹æ˜ç™½äº†. äºæ˜¯æƒ³åˆ°ç»™UIViewæ·»åŠ åˆ†ç±», æä¾›ç±»ä¼¼width, height, leadingè¿™æ ·çš„property. ä¸ºäº†å‡†ç¡®è¡¨è¾¾æ˜¯å¸ƒå±€çš„å±æ€§, åœ¨å‰é¢æ·»åŠ äº†layout, äºæ˜¯å°±æˆäº†layoutWidth, layoutHeight, layoutLeading. æ²¡æœ‰æ·»åŠ xly_çš„å‰ç¼€æ˜¯ä¸ºäº†ä¹¦å†™æ–¹ä¾¿.
 é¦–å…ˆå®šä¹‰äº†æœ€åŸºç¡€çš„API:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;objc hljs&quot;&gt;view.layoutWidth.equalTo(view2.layoutWidth);&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;å…³ç³»æœ‰ç­‰äº, å¤§äºç­‰äº, å°äºç­‰äº. constant, priorityä»¥åŠmultiplieréƒ½æœ‰é»˜è®¤å€¼, åˆ†åˆ«æ˜¯0, 1000, 1. å¦‚æœéœ€è¦ä¿®æ”¹çš„è¯, å°±åœ¨ä¸Šé¢çš„è¡¨è¾¾å¼åé¢ç»§ç»­ä¹¦å†™:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;objc hljs&quot;&gt;view.layoutWidth.equalTo(view2.layoutWidth).constant(&lt;span class=&quot;hljs-number&quot;&gt;100&lt;/span&gt;).priority(&lt;span class=&quot;hljs-number&quot;&gt;750&lt;/span&gt;).multiplier(&lt;span class=&quot;hljs-number&quot;&gt;1.5&lt;/span&gt;);&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è¿™ä¸‰ä¸ªå±æ€§ä¹¦å†™çš„é¡ºåºå¯ä»¥éšæ„äº¤æ¢.ä½†æ˜¯ä¸€å®šæ˜¯åœ¨å…³ç³»ä¹‹å.&lt;/p&gt;
&lt;p&gt;è¿™æ ·çš„å½¢å¼æ›´åƒcæˆ–è€…swiftçš„è¯­æ³•, OCé‡Œé¢æ€ä¹ˆåšå‘¢? ç”¨block. blockåœ¨è°ƒç”¨æ—¶æ˜¯block()çš„å½¢å¼. åªè¦è¿”å›å€¼å¯ä»¥ä½¿ç”¨&lt;code&gt;.&lt;/code&gt; è¿›è¡Œè°ƒç”¨çš„è¯è¿™æ ·çš„ä¹¦å†™å°±æ²¡æœ‰é—®é¢˜. å› æ­¤å°±è¯ç”Ÿäº†å¦‚ä¸‹çš„æ–¹æ³•:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;objc hljs&quot;&gt;    - (XLYConstraint *(^)(&lt;span class=&quot;hljs-keyword&quot;&gt;id&lt;/span&gt; attr))equalTo;
    - (XLYConstraint *(^)(&lt;span class=&quot;hljs-built_in&quot;&gt;CGFloat&lt;/span&gt; constant))constant;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ç”¨blockä½œä¸ºè¿”å›å€¼, ç„¶åç”¨()è¿›è¡Œè°ƒç”¨, å¾—åˆ°XLYConstraintçš„å¯¹è±¡, ç„¶åé‡å¤. è¿™æ ·å°±èƒ½å†™å‡ºä¸Šé¢æ‰€å±•ç¤ºçš„é‚£ç§ä»£ç äº†. æˆ‘è§‰å¾—è¿™é‡Œå¦‚æœç”¨&lt;code&gt;[]&lt;/code&gt; è¿›è¡Œæ–¹æ³•è°ƒç”¨çš„è¯, å¯è¯»æ€§ä¼šæ¯”è¾ƒå·®, æ‰€ä»¥...&lt;/p&gt;
&lt;p&gt;&lt;code&gt;view.layoutXXX&lt;/code&gt;è¿™æ ·çš„å±æ€§æ˜¯XLYViewAttributeç±»å‹, è°ƒç”¨equalToç­‰æè¿°å…³ç³»çš„æ–¹æ³•åæ‰äº§ç”ŸXLYConstraintå¯¹è±¡, è¿™æ ·åšä¸€æ–¹é¢æ˜¯ä¸ºäº†ä»æ¦‚å¿µä¸ŠåŒºåˆ†å‡ºçº¦æŸçš„itemå’Œå…¶ä»–å‚æ•°, å¦ä¸€æ–¹é¢ä¹Ÿæ–¹ä¾¿äº†ä»£ç çš„åˆ†å¸ƒ.&lt;/p&gt;
&lt;p&gt;é€šè¿‡è¿™æ ·çš„è°ƒç”¨æœ€ç»ˆç”Ÿæˆçš„XLYConstraintå¯¹è±¡è®°å½•äº†ä¸€ä¸ªçº¦æŸæ‰€éœ€è¦çš„8ä¸ªå‚æ•°. ç„¶åè°ƒç”¨å…¶&lt;code&gt;resultConstraint&lt;/code&gt;æ–¹æ³•å°†ç”Ÿæˆæ‰€å¯¹åº”çš„NSLayoutConstraintå¯¹è±¡.&lt;/p&gt;
&lt;h2 id=&quot;helperæ–¹æ³•&quot;&gt;&lt;a href=&quot;#helperæ–¹æ³•&quot; class=&quot;headerlink&quot; title=&quot;helperæ–¹æ³•&quot;&gt;&lt;/a&gt;helperæ–¹æ³•&lt;/h2&gt;&lt;p&gt;ä¸€ä¸ªçº¦æŸè¢«åˆ›å»ºåéœ€è¦æ¿€æ´». ios7åŠä»¥ä¸‹ç³»ç»Ÿéœ€è¦è‡ªå·±å¯»æ‰¾å…¬å…±çˆ¶viewå¹¶æ·»åŠ , å› æ­¤æˆ‘éœ€è¦ä¸€ä¸ªå¯»æ‰¾ä¸¤ä¸ªviewå…¬å…±çˆ¶viewçš„æ–¹æ³•. ios8åŠä»¥ä¸Šç³»ç»Ÿåªéœ€è¦è®¾ç½®activeä¸ºYESå³å¯.
åœ¨æ›´æ–°çº¦æŸæ—¶, æˆ‘éœ€è¦å¯»æ‰¾åˆ°å’Œå½“å‰çº¦æŸ&amp;#39;ç±»ä¼¼&amp;#39;çš„çº¦æŸ. 
åœ¨é‡å»ºçº¦æŸæ—¶, æˆ‘éœ€è¦æ‰¾åˆ°è·Ÿä¸€ä¸ªviewç›¸å…³è”çš„æ‰€æœ‰çº¦æŸ.&lt;/p&gt;
&lt;p&gt;ä»¥ä¸Šå°±æ˜¯make, updateå’Œremakeæ‰€ä¾èµ–çš„æ ¸å¿ƒæ–¹æ³•.&lt;/p&gt;
&lt;h4 id=&quot;æ¿€æ´»çº¦æŸ&quot;&gt;&lt;a href=&quot;#æ¿€æ´»çº¦æŸ&quot; class=&quot;headerlink&quot; title=&quot;æ¿€æ´»çº¦æŸ&quot;&gt;&lt;/a&gt;æ¿€æ´»çº¦æŸ&lt;/h4&gt;&lt;p&gt;ç»™NSLayoutConstraintæ·»åŠ äº†ä¸€ä¸ªåˆ†ç±», æä¾›äº†xly_install å’Œ xly_uninstallæ–¹æ³•æ¥è¿›è¡Œæ¿€æ´»å’Œç§»é™¤æ“ä½œ, æ–¹æ³•ä¸­æ ¹æ®ç³»ç»Ÿç‰ˆæœ¬è¿›è¡ŒåŒºåˆ«è°ƒç”¨. å¦‚æœæ˜¯ios8åŠä»¥ä¸Šåªéœ€è®¾ç½®activeå±æ€§, ios7åŠä»¥ä¸‹åˆ™éœ€è¦å¯»æ‰¾æœ€ä½å…¬å…±çˆ¶viewæ¥è¿›è¡Œæ·»åŠ .&lt;/p&gt;
&lt;h4 id=&quot;æ›´æ–°çº¦æŸ-1&quot;&gt;&lt;a href=&quot;#æ›´æ–°çº¦æŸ-1&quot; class=&quot;headerlink&quot; title=&quot;æ›´æ–°çº¦æŸ&quot;&gt;&lt;/a&gt;æ›´æ–°çº¦æŸ&lt;/h4&gt;&lt;p&gt;æ›´æ–°çº¦æŸæ—¶, é¦–å…ˆæ˜¯åˆ›å»ºäº†åœ¨blocké‡Œé¢ä¹¦å†™çš„çº¦æŸ, ç„¶åå»å¯»æ‰¾æ˜¯å¦æœ‰ä¸€ä¸ªç›¸ä¼¼çš„çº¦æŸ, å¦‚æœæ²¡æœ‰çš„è¯å°±ç›´æ¥æ¿€æ´»çº¦æŸ, å¦‚æœæœ‰å°±æ›¿æ¢constantçš„å€¼.&lt;/p&gt;
&lt;p&gt;ä»€ä¹ˆæ˜¯ç›¸ä¼¼? ä»NSLayoutConstraintä¸­èƒ½çœ‹å‡ºæ¥, åˆ›å»ºå®Œä¸€ä¸ªçº¦æŸåèƒ½ä¿®æ”¹çš„å€¼åªæœ‰priorityå’Œconstant, priorityè¿˜ä¸å»ºè®®åœ¨çº¦æŸæ¿€æ´»åå†ä¿®æ”¹. è™½ç„¶ç»è¿‡æµ‹è¯•å‘ç°åªè¦ä¼˜å…ˆçº§ä¸æ˜¯1000, å¹¶ä¸”æ”¹åŠ¨åçš„å€¼ä¹Ÿä¸æ˜¯1000å°±æ²¡æœ‰é—®é¢˜, å¦åˆ™å´©æºƒ. è¿™é‡Œå°Šé‡è‹¹æœçš„æ–‡æ¡£, æŠŠä¼˜å…ˆçº§ä¸åŒçš„çº¦æŸå½“æˆä¸åŒçš„çº¦æŸ. å› æ­¤,ç›¸ä¼¼çš„æ¦‚å¿µå°±æ˜¯é™¤äº†constantä»¥å¤–, å…¶ä»–çš„å€¼æ˜¯&lt;strong&gt;é€»è¾‘ç›¸ç­‰&lt;/strong&gt;çš„. ä¸ºä»€ä¹ˆä¸æ˜¯å®Œå…¨ç›¸ç­‰? å› ä¸ºçº¦æŸå¹¶ä¸æ˜¯å•å‘çš„, å®ƒæ˜¯ä¸€ä¸ªåŒå‘çš„é™åˆ¶, çº¦æŸçš„å…¬å¼å¦‚ä¸‹:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;null hljs&quot;&gt;view1.attr1 = view2.attr2 * multiplier + &lt;span class=&quot;hljs-built_in&quot;&gt;constant&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è¿™ä¸ªè®¡ç®—è§„åˆ™ç­‰åŒäºä¸‹é¢è¿™ä¸€ä¸ª:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;null hljs&quot;&gt;view2.attr2 = view1.attr1 * ( &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;/multiplier) - &lt;span class=&quot;hljs-built_in&quot;&gt;constant&lt;/span&gt;/multiplier&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;å› æ­¤, åœ¨å¯»æ‰¾ç›¸ä¼¼çš„çº¦æŸæ—¶å¿…é¡»è€ƒè™‘ç¬¬äºŒç§å½¢å¼. æˆ‘å®šä¹‰ç›¸ä¼¼çš„ç»“æœä¸º3ç§, ç›¸ä¼¼, é€†å‘ç›¸ä¼¼ä»¥åŠä¸ç›¸ä¼¼. æŸ¥æ‰¾æ—¶è¿˜å¾—å°å¿ƒä¸€ç§å¾ˆç‰¹åˆ«çš„çº¦æŸ, æ˜¯é€šè¿‡è®¾ç½®viewçš„huggingå’Œcompression resistanceç”Ÿæˆçš„. è¿™ç§çº¦æŸçš„ç±»æ˜¯&lt;code&gt;NSContentSizeLayoutConstraint&lt;/code&gt;, éœ€è¦è¿‡æ»¤æ‰. æœ€åä¸€ä¸ªç»†èŠ‚å°±æ˜¯ç›¸ä¼¼çš„çº¦æŸå¯èƒ½ä¸æ­¢ä¸€ä¸ª, è¿™ç§æƒ…å†µä¸‹å¤šåŠæ˜¯ä»£ç æœ‰é—®é¢˜, çº¦æŸåŠ å¤šäº†, ä½†æ˜¯ä¸ç®¡æ€ä¹ˆç€, æˆ‘åªå–æœ€æ–°çš„ä¸€ä¸ª, å³æœ€åæ·»åŠ çš„é‚£ä¸ª, å› æ­¤æˆ‘ä¼šå€’åºéå†constraintsæ•°ç»„æ¥è¿›è¡ŒæŸ¥æ‰¾.&lt;/p&gt;
&lt;h4 id=&quot;é‡å»ºçº¦æŸ-1&quot;&gt;&lt;a href=&quot;#é‡å»ºçº¦æŸ-1&quot; class=&quot;headerlink&quot; title=&quot;é‡å»ºçº¦æŸ&quot;&gt;&lt;/a&gt;é‡å»ºçº¦æŸ&lt;/h4&gt;&lt;p&gt;é‡å»º, å°±å¾—å…ˆæ¯ç­å†é‡ç”Ÿ. åº”è¯¥è¢«æ¯ç­çš„æ˜¯å“ªäº›å‘¢? æˆ‘å–„åšä¸»å¼ , å°†æ‰€æœ‰å…³è”çš„çº¦æŸå…¨éƒ¨å¹²æ‰. æ¯”å¦‚ä»£ç è¿™ä¹ˆå†™:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;objc hljs&quot;&gt;[&lt;span class=&quot;hljs-built_in&quot;&gt;UIView&lt;/span&gt; remakeConstraints:^{  
  &lt;span class=&quot;hljs-keyword&quot;&gt;self&lt;/span&gt;.testView.layoutBottom.equalTo(&lt;span class=&quot;hljs-keyword&quot;&gt;self&lt;/span&gt;.bottomLayoutGuideView.layoutTop).constant(&lt;span class=&quot;hljs-number&quot;&gt;-100&lt;/span&gt;);
  &lt;span class=&quot;hljs-keyword&quot;&gt;self&lt;/span&gt;.testView.layoutWidth.equalTo(&lt;span class=&quot;hljs-number&quot;&gt;100&lt;/span&gt;);
  &lt;span class=&quot;hljs-keyword&quot;&gt;self&lt;/span&gt;.testView.layoutHeight.equalTo(&lt;span class=&quot;hljs-number&quot;&gt;100&lt;/span&gt;);
  &lt;span class=&quot;hljs-keyword&quot;&gt;self&lt;/span&gt;.testView.layoutLeading.equalTo(&lt;span class=&quot;hljs-keyword&quot;&gt;self&lt;/span&gt;.view.layoutLeading);
  &lt;span class=&quot;hljs-comment&quot;&gt;//è¿™é‡Œä¸å†å¤šå†™äº†, view2ä¹Ÿè¿›è¡Œé‡å»º&lt;/span&gt;
  &lt;span class=&quot;hljs-keyword&quot;&gt;self&lt;/span&gt;.view2 ...
}];&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;blocké‡Œåˆ›å»ºäº†å¤šä¸ªçº¦æŸ, ä½œä¸ºfirstItemå‡ºç°çš„æ˜¯testViewå’Œview2, å› æ­¤æ‰€æœ‰å’ŒtestViewå’Œview2æœ‰å…³è”çš„çº¦æŸå…¨éƒ¨å¹²æ‰. çº¦æŸæ˜¯åŒå‘çš„, æœ‰å…³è”å°±æ˜¯çº¦æŸçš„firstItemæˆ–è€…secondItemç­‰äºè¿™ä¸ªview. åœ¨å¯»æ‰¾å…³è”çš„çº¦æŸæ—¶åªèƒ½ä»è‡ªå·±å¼€å§‹, é€æ­¥å¾€windowéå†æ‰€æœ‰çš„çº¦æŸ, å°†å…³è”çš„çº¦æŸè®°ä¸‹. è¿™é‡Œæœ¬æ¥æƒ³åˆ©ç”¨runtimeå»æ›¿æ¢addConstantå’ŒsetActiveæ–¹æ³•, åœ¨æ–¹æ³•ä¸­è¿›è¡Œè®°å½•çš„, ä½†æ˜¯å‘ç°äº†iOSçš„ä¸€äº›è¯¡å¼‚å¾—æ— æ³•è§£é‡Šçš„ç°è±¡, æ”¾å¼ƒäº†è¿™æ¡è·¯, åªèƒ½æ¯æ¬¡éå†æŸ¥æ‰¾äº†, æ•ˆç‡ç›¸å¯¹ä½ç‚¹å„¿. è¿™é‡ŒåŒæ ·è¦å»æ‰&lt;code&gt;NSContentSizeLayoutConstraint&lt;/code&gt;ç±»å‹çš„çº¦æŸ.&lt;/p&gt;
&lt;h2 id=&quot;å…¼é¡¾swift&quot;&gt;&lt;a href=&quot;#å…¼é¡¾swift&quot; class=&quot;headerlink&quot; title=&quot;å…¼é¡¾swift&quot;&gt;&lt;/a&gt;å…¼é¡¾swift&lt;/h2&gt;&lt;p&gt;ä»¥ä¸Šçš„ä»£ç å¦‚æœbridgeåˆ°swiftä½¿ç”¨å°†æ˜¾å¾—å¾ˆfunny. å› ä¸ºæ–¹æ³•è¿”å›çš„æ˜¯ä¸€ä¸ªé—­åŒ…, OCç›´æ¥ä½¿ç”¨()å°±å¯ä»¥è·Ÿåœ¨åé¢ç»§ç»­è°ƒç”¨, ä½†æ˜¯swiftä¼šå˜æˆè¿™æ ·:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;swift hljs&quot;&gt;  view1.layoutLeft.equalTo()(view2.layoutRight).constant()(&lt;span class=&quot;hljs-number&quot;&gt;10&lt;/span&gt;)&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;å› æ­¤, æˆ‘ä¸“é—¨ä¸ºswiftæ·»åŠ äº†ä¸¤ä¸ªå¤´æ–‡ä»¶, ä½¿å¾—swifté‡Œé¢ä¹Ÿèƒ½è·ŸOCçš„å†™æ³•ä¸€æ ·.&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;objc hljs&quot;&gt;&lt;span class=&quot;hljs-comment&quot;&gt;//å…¶ä¸­ä¸€ä¸ª, å¦ä¸€ä¸ªè§ä»£ç &lt;/span&gt;
- (XLYConstraint *)equalTo:(&lt;span class=&quot;hljs-keyword&quot;&gt;id&lt;/span&gt;)attr;
- (XLYConstraint *)greaterThanOrEqualTo:(&lt;span class=&quot;hljs-keyword&quot;&gt;id&lt;/span&gt;)attr;
- (XLYConstraint *)lessThanOrEqualTo:(&lt;span class=&quot;hljs-keyword&quot;&gt;id&lt;/span&gt;)attr;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ä¹Ÿä¸“é—¨å¼„äº†ä¸€ä¸ªç»™swift bridge headerç”¨çš„&lt;code&gt;XLYAutoLayoutEasy-swift.h&lt;/code&gt;ä»¥åŒºåˆ†importçš„å¤´æ–‡ä»¶.&lt;/p&gt;
&lt;h2 id=&quot;æ€»ç»“-3&quot;&gt;&lt;a href=&quot;#æ€»ç»“-3&quot; class=&quot;headerlink&quot; title=&quot;æ€»ç»“&quot;&gt;&lt;/a&gt;æ€»ç»“&lt;/h2&gt;&lt;p&gt;ç”¨helperæ–¹æ³•é…åˆç®€åŒ–çº¦æŸçš„å†™æ³•, å°±èƒ½ç”¨è¾ƒçŸ­çš„ä»£ç é‡å†™å‡ºæˆ‘è®¤ä¸ºæ›´åŠ æ¸…æ™°å¯è¯»çš„å¸ƒå±€ä»£ç . æ›´æ–°é‡å»ºçš„æ“ä½œä¹Ÿèƒ½æ›´åŠ å®¹æ˜“. &lt;/p&gt;
&lt;p&gt;å†™ä»£ç , å¤šæ€è€ƒ, æƒ³æ¸…æ¥šäº†éœ€è¦ä»€ä¹ˆå†å†™. å¤šç”»å›¾æœ‰åŠ©äºæ€è€ƒ.&lt;/p&gt;
&lt;p&gt;å¦å¤–, æ„Ÿè°¢æˆ‘çš„å¥¹å¯¹æˆ‘çš„åŒ…å®¹å’Œæ”¯æŒ.&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;å¼€å‘AutoLayoutEasyçš„ç›®çš„æ˜¯ä¸ºäº†è®©ä»£ç ç¼–å†™AutoLayoutæ›´åŠ æ–¹ä¾¿ç›´è§‚, æé«˜å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§. å› ä¸ºæˆ‘ä¸ªäººè§‰å¾—iOSæä¾›çš„åˆ›å»ºçº¦æŸçš„æ–¹å¼çœŸå¿ƒä¸æ•¢æ­ç»´, NSLayoutConstraintçš„ç±»æ–¹æ³•å†™èµ·æ¥å¥½é•¿, VFLåˆä¸å¥½æ“ä½œå…·ä½“çº¦æŸ, å†™å‡ºæ¥çš„ä»£ç å¯è¯»æ€§
    
    </summary>
    
      <category term="æŠ€æœ¯" scheme="/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
      <category term="iOS" scheme="/tags/iOS/"/>
    
      <category term="GitHub" scheme="/tags/GitHub/"/>
    
  </entry>
  
  <entry>
    <title>AutoLayoutçš„å°åæ§½</title>
    <link href="/2014/12/08/talk_about_autolayout/"/>
    <id>/2014/12/08/talk_about_autolayout/</id>
    <published>2014-12-08T03:00:00.000Z</published>
    <updated>2016-04-04T10:07:40.000Z</updated>
    
    <content type="html">&lt;p&gt;çªç„¶æœ‰ä¸€å¤©, è‹¹æœè¿˜åœ¨ios6çš„æ—¶å€™, å®ƒå‘å¸ƒäº†æ–°çš„å¸ƒå±€æ–¹å¼, å–åå«&lt;strong&gt;AutoLayout&lt;/strong&gt;, å¬ç€å¾ˆé«˜å¤§ä¸Š--è‡ªåŠ¨å¸ƒå±€. ä½†æ˜¯æˆ‘è¿™ç¯‡æ–‡ç« é™¤äº†ç®€å•ä»‹ç»ä¸€ä¸‹å®ƒä»¥å¤–æ›´å¤šçš„æ˜¯è¦åæ§½çš„, å…¶å®ä¹Ÿå°±ç¨å¾®åä¸€ç‚¹ç‚¹å®ƒçš„ä½¿ç”¨é—®é¢˜.&lt;/p&gt;
&lt;h2 id=&quot;AutoResizing-AutoLayoutä¹‹å‰çš„å¸ƒå±€&quot;&gt;&lt;a href=&quot;#AutoResizing-AutoLayoutä¹‹å‰çš„å¸ƒå±€&quot; class=&quot;headerlink&quot; title=&quot;AutoResizing -- AutoLayoutä¹‹å‰çš„å¸ƒå±€&quot;&gt;&lt;/a&gt;AutoResizing -- AutoLayoutä¹‹å‰çš„å¸ƒå±€&lt;/h2&gt;&lt;p&gt;åšappå¿…ç„¶æ¶‰åŠåˆ°å¸ƒå±€, ç°åœ¨æ”¹ä¸ºè‡ªåŠ¨å¸ƒå±€çš„è¯, é‚£ä¹ˆä»¥å‰çš„å¸ƒå±€æ˜¯ä»€ä¹ˆ, AutoLayoutè§£å†³äº†ä»€ä¹ˆé—®é¢˜?&lt;/p&gt;
&lt;p&gt; ä»¥å‰çš„å¸ƒå±€æ–¹å¼æˆ‘è§‰å¾—å¯ä»¥å«åšåŠè‡ªåŠ¨å¸ƒå±€. å› ä¸ºAutoResizingæ˜¯ä¸€ç§spring-strutæ–¹å¼, ä»…æè¿°äº†viewåœ¨å…¶superViewå¤§å°å˜åŒ–æ—¶è‡ªèº«å¦‚ä½•å˜åŒ–. å®ƒå¯ä»¥æè¿°ä¸€ä¸ªviewç›¸å¯¹äºsuperViewçš„ä¸Šä¸‹å·¦å³å››ä¸ªè¾¹è·æ˜¯å¦å›ºå®š, è‡ªèº«çš„å®½é«˜æ˜¯å¦å¯ä»¥æ‹‰ä¼¸è¿™ä¹ˆ6ä¸ªå±æ€§, å¯¹äºå¤§éƒ¨åˆ†çš„appæ¥è®²AutoResizingå·²ç»è¶³å¤Ÿæè¿°å¸ƒå±€è§„åˆ™äº†. &lt;/p&gt;
&lt;p&gt; ä½†æ˜¯å¦‚æœviewçš„å¤§å°ä¸å¥½è®¡ç®—(ä¾èµ–å†…å®¹)æˆ–è€…æœ‰å¤šä¸ªviewæœ‰ç›¸äº’ä¾èµ–çš„å…³ç³», AutoResizingå°±ä¸å¤Ÿç”¨äº†, å¹¶ä¸”å¸ƒå±€å°†å˜å¾—å¾ˆç¹çæ— èŠå®¹æ˜“å‡ºé”™.&lt;/p&gt;
&lt;p&gt; å¸ƒå±€çš„æ–¹å¼å¤§è‡´å¦‚ä¸‹:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ä½ å¯èƒ½éœ€è¦å¯¹viewè°ƒç”¨sizeToFit æˆ–è€…å…¶ä»–æ–¹æ³•æ¥å°†viewçš„frameè°ƒæ•´åˆ°ä¸€ä¸ªåˆé€‚çš„å¤§å°.&lt;/li&gt;
&lt;li&gt;ä¹Ÿå¯ä»¥åœ¨æŸä¸ªçˆ¶viewçš„layoutSubviewsæ–¹æ³•ä¸­æ ¹æ®éœ€æ±‚è°ƒæ•´è¿™äº›viewçš„å¤§å°å¹¶è®¡ç®—è¿™äº›viewçš„å„ç§ä½ç½®. &lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å…¶ä¸­æœ€éº»çƒ¦çš„å°±æ˜¯å­—ä½“ç›¸å…³çš„å¸ƒå±€è®¡ç®—, å› ä¸ºæ–‡å­—æ¸²æŸ“åçš„è¡Œé«˜éƒ½ç•¥å¤§äºå­—å·, æ²¡æ³•ç›´æ¥è®¾å®šlabelé«˜åº¦, å¿…é¡»ç”¨NSStringçš„ä¸€ä¸ªåˆ†ç±»æ–¹æ³•è®¡ç®—åœ¨ä¸€å®šæ¡ä»¶ä¸‹çš„æ¸²æŸ“å¤§å°, ç„¶åæ‰èƒ½å‚ä¸è®¡ç®—.&lt;/p&gt;
&lt;h2 id=&quot;AutoLayout-è§£å†³çš„é—®é¢˜&quot;&gt;&lt;a href=&quot;#AutoLayout-è§£å†³çš„é—®é¢˜&quot; class=&quot;headerlink&quot; title=&quot;AutoLayout è§£å†³çš„é—®é¢˜&quot;&gt;&lt;/a&gt;AutoLayout è§£å†³çš„é—®é¢˜&lt;/h2&gt;&lt;p&gt;AutoLayoutè¯•å›¾è§£å†³æ§ä»¶å¤§å°å˜åŒ–ä»¥åŠä½ç½®å˜åŒ–çš„é—®é¢˜. &lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;p&gt;æ§ä»¶å¤§å°çš„é—®é¢˜: æ¯”å¦‚labelæ§ä»¶é»˜è®¤æƒ…å†µä¸‹ä¼šæœ‰æ¯”è¾ƒä½çš„ä¼˜å…ˆçº§é˜»æ­¢è‡ªèº«å˜å¤§, ç›¸å¯¹è¾ƒé«˜çš„ä¼˜å…ˆçº§é˜»æ­¢è‡ªèº«è¢«å‹ç¼©, åœ¨ä¸å¼•èµ·å˜å¤§æˆ–è€…å‹ç¼©çš„æƒ…å†µä¸‹, labelä¼šä¿æŒå’Œå†…å®¹ä¸€æ ·å¤§. ä½ ä»ç„¶å¯ä»¥å›ºå®šå®ƒçš„å¤§å°, ä½†æ˜¯ä¸å»ºè®®. å½“ä½ æ”¹å˜äº†text, labelè‡ªåŠ¨å°±ä¼šè°ƒæ•´å¤§å°, ä¸éœ€è¦ä½ å†å»ä¸ºäº†labelçš„å®½é«˜æŠ“ç‹‚äº†. å½“ç„¶, æœ‰çš„åœºæ™¯ä»ç„¶éœ€è¦æ‰‹åŠ¨è®¡ç®—æ–‡å­—æ¸²æŸ“åå¤§å°.  å¦å¤–ä¸€ç§å¤§å°é—®é¢˜æ˜¯ç›¸å¯¹è®¡ç®—çš„, æ¯”å¦‚ä¸€ä¸ªviewçš„å¤§å°æˆ–è€…ä½ç½®ä¼šå½±å“åˆ°å¦ä¸€ä¸ªviewçš„å¤§å°, å½“è¿™ä¸ªviewå˜åŒ–æ—¶å¦ä¸€ä¸ªçš„å¤§å°ä¹Ÿä¼šç›¸åº”å˜åŒ–.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;æ§ä»¶ä½ç½®é—®é¢˜: AutoLayoutæœ€ç›´æ¥çš„è¡¨ç°å°±æ˜¯èƒ½å¤Ÿå®šä¹‰ä¸¤ä¸ªæ§ä»¶ä¹‹é—´çš„ç›¸å¯¹ä½ç½®. æ¯”å¦‚view1ç›¸å¯¹view2ä¿æŒ10çš„é—´è·, é‚£ä¹ˆå½“view1çš„originæ”¹å˜æ—¶, view2çš„originä¹Ÿä¼šéšä¹‹å˜åŒ–.&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;æ˜¾ç„¶ç”¨AutoLayoutè¿›è¡Œå¸ƒå±€çœ‹èµ·æ¥æ˜¯å¾ˆå¥½çš„, äº‹å®ä¸Šä¹Ÿæ˜¯å¾ˆå¥½çš„, å°½ç®¡ä¸æ˜¯é‚£ä¹ˆå®Œç¾. storyboardå’ŒAutoLayoutå¯ä»¥å¸®åŠ©å¼€å‘è€…å°†ç»å¤§éƒ¨åˆ†çš„UIé€»è¾‘å’Œä¸šåŠ¡é€»è¾‘åˆ†ç¦»å¼€, å¹¶ä¸”ä¿®æ”¹å’Œç»´æŠ¤çš„å¤æ‚æ€§ä¹Ÿè¿˜èƒ½æ¥å—, ä¹ æƒ¯äº†çš„è¯ä¹Ÿæ˜¯èƒ½å¾ˆè¾ƒå¿«é€Ÿåœ°è°ƒæ•´çº¦æŸçš„.&lt;/p&gt;
&lt;p&gt;AutoLayoutä¸­ä¸€æ¬¡åªèƒ½æè¿°ä¸€ä¸ªviewçš„å®½é«˜æˆ–è€…æè¿°ä¸¤ä¸ªviewä¹‹é—´çš„å…³ç³». èƒ½æè¿°çš„å±æ€§å¾ˆå¤š, ä½†æ˜¯ä¸æ˜¯éšä¾¿ç”¨çš„, æ¯”å¦‚ä¸èƒ½æè¿°ä¸€ä¸ªviewçš„å®½å’Œå¦ä¸€ä¸ªviewçš„leadingç›¸ç­‰, iOSç›´æ¥å´©æºƒå¹¶å‘Šè¯‰ä½ è¿™ä¸¤ä¸ªå±æ€§ä¸èƒ½é…å¯¹. å½“ä½ æè¿°å¥½äº†ä¸€ä¸ªçº¦æŸå, ä½ éœ€è¦å°†å…¶æ¿€æ´», æ€ä¹ˆæ¿€æ´»? UIViewæœ‰ä¸€ä¸ªaddConstraintçš„æ–¹æ³•, éœ€è¦ä½ è‡ªå·±æ·»åŠ . é‚£ä¹ˆè¯¥è®©è°æ¥addå‘¢? ç»è¿‡ä¸€äº›æµ‹è¯•å‘ç°, è¿™ä¸ªè°ƒç”¨addçš„viewå¿…é¡»æ˜¯çº¦æŸä¸­ä¸¤ä¸ªviewçš„å…¬å…±çˆ¶view, ä¸ä¸€å®šæ˜¯æœ€ä½çš„é‚£ä¸ª, åªè¦æ˜¯å…¬å…±çˆ¶viewå³å¯. ä½†æ˜¯å»ºè®®æ·»åŠ åœ¨æœ€ä½å…¬å…±çˆ¶viewä¸­. å¦‚æœä¸æƒ³è¦ä¸€ä¸ªçº¦æŸäº†æ€ä¹ˆåŠ? UIViewä¹Ÿæœ‰removeConstraintçš„æ–¹æ³•, å»æ‰ä½ ä¸æƒ³è¦çš„å³å¯.&lt;/p&gt;
&lt;h2 id=&quot;å¼€å§‹åæ§½&quot;&gt;&lt;a href=&quot;#å¼€å§‹åæ§½&quot; class=&quot;headerlink&quot; title=&quot;å¼€å§‹åæ§½&quot;&gt;&lt;/a&gt;å¼€å§‹åæ§½&lt;/h2&gt;&lt;p&gt;ç„¶åæˆ‘è¦å¼€å§‹åæ§½äº†. &lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;p&gt;æ¿€æ´»çš„é—®é¢˜.
 è¿™ç®—ä»€ä¹ˆ? æˆ‘è‡ªå·±å»æ‰¾å…¬å…±çˆ¶view? kidding me? è¿™ä¸ªè¿‡ç¨‹æ˜æ˜¾å¯ä»¥è‡ªåŠ¨æå®šå•Š. ç„¶åå‘ç°iOS8æ”¯æŒäº†æ–°çš„API. NSLayoutConstraintä¸­å¤šäº†ä¸€ä¸ªactiveå±æ€§, è®¾ç½®ä¸ºYESå³æ¿€æ´», NOå³å¹²æ‰. ä½†æ˜¯å¯¹äºiOS7åŠä»¥ä¸‹ç³»ç»Ÿä»ç„¶éœ€è¦è‡ªå·±æ‰¾viewå»addå’Œremove.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;NSLayoutConstraintç±»æ–¹æ³•åˆ›å»ºçº¦æŸ
NSLayoutConstraintæœ‰ä¸€ä¸ªç±»æ–¹æ³•ç”¨äºåˆ›å»ºä¸€ä¸ªçº¦æŸ, è¿™ä¸ªæ–¹æ³•æœ‰7ä¸ªå‚æ•°. è¿™7ä¸ªå‚æ•°ä¸åŒ…å«priority, å¦‚æœè¦è®¾ç½®è¦ä¼˜å…ˆçº§è¿˜éœ€è¦åœ¨åˆ›å»ºçº¦æŸåä¿®æ”¹. è¿™ä¸ªæ–¹æ³•å†™èµ·æ¥ç®€ç›´å°±æ˜¯å±å¹•æ€æ‰‹, å¦‚æœè¦è§„èŒƒä¸€ç‚¹ä¸€ä¸ªå‚æ•°ä¸€è¡Œ,é‚£ä¹ˆå°±æ˜¯7è¡Œ, å¤šå†™å‡ ä¸ªå°±è½»æ¾è¿‡ä¸€å±. å¦‚æœä¸æŠ˜è¡Œ, é‚£å †åœ¨ä¸€èµ·çš„ä»£ç ç®€ç›´è®©äººå—ä¸äº†. é‚£çœŸæ˜¯ä¸€å¨ä¸€å¨çš„.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;VFL
ä¹Ÿè®¸è‹¹æœä¹Ÿè§‰å¾—ç”¨ä¸€ä¸ªå¸¦7ä¸ªå‚æ•°çš„æ–¹æ³•å»åˆ›å»º1ä¸ªçº¦æŸçš„æ–¹å¼æœ‰ç‚¹å„¿ä¸é‚£ä¹ˆç¾è§‚å’Œæ–¹ä¾¿, äºæ˜¯å¼€å‘äº†Visual Format Language, ç›®çš„æ˜¯ä¸ºäº†å¸®åŠ©å¼€å‘è€…å¿«é€Ÿåˆ›å»ºçº¦æŸ. ä½†æ˜¯é—®é¢˜æ˜¯, è¿™çœŸçš„æœ‰æ•ˆä¹ˆ? ä½¿ç”¨VFLèƒ½ä¸€æ¬¡æ€§åœ¨ä¸€ä¸ªæ–¹å‘ä¸Šåˆ›å»ºå¤šä¸ªçº¦æŸ, ç„¶åè¿”å›ä¸€ä¸ªæ•°ç»„. ä½†æ˜¯, å¦‚æœæˆ‘éœ€è¦æ ¹æ®éœ€æ±‚è°ƒæ•´å…¶ä¸­ä¸€ä¸ªçº¦æŸå‘¢? æˆ‘æ€ä¹ˆè·å–åˆ°æˆ‘æƒ³è¦çš„é‚£ä¸ªçº¦æŸ? å¾ˆé—æ†¾, ä½ å¿…é¡»æŠŠVFLæ‹†æ•£, å¯¹äºä½ è¦çš„é‚£ä¸€ä¸ªçº¦æŸ, è¦ä¹ˆä½ ç”¨NSLayoutConstraintçš„ç±»æ–¹æ³•å»åˆ›å»º, è¦ä¹ˆä½ ç”¨VFLå»æè¿°ä½ è¦çš„é‚£ä¸€ä¸ªçº¦æŸ, ç„¶åæ•°ç»„é‡Œé¢åº”è¯¥å°±åªæœ‰é‚£ä¸€ä¸ªä½ è¦çš„çº¦æŸäº†.
å¦å¤–ä¸€ç‚¹, ç”¨VFLè¦æ³¨æ„çš„å°±æ˜¯metricså’Œviewsä¸¤ä¸ªå­—å…¸, ä¸€ä¸ªæ˜¯è®°å½•formaté‡Œé¢çš„å„ç§æ ‡é‡, å¦ä¸€ä¸ªè®°å½•å‡ºç°åœ¨formaté‡Œé¢çš„view, ä¹ŸæŒºéº»çƒ¦çš„.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;åŠ¨ç”»
è²Œä¼¼è‹¹æœè¿˜æ²¡æœ‰æƒ³å¥½æ€ä¹ˆæ¯”è¾ƒæ–¹ä¾¿åœ°å°†çº¦æŸå’ŒåŠ¨ç”»ç»“åˆèµ·æ¥. æ¯æ¬¡æƒ³åŠ¨ç”»å‘ˆç°çº¦æŸçš„å˜åŒ–, éƒ½éœ€è¦å…ˆæ”¹constant, ç„¶åå•ç‹¬å†™ä¸€ä¸ªåŠ¨ç”», åœ¨blocké‡Œé¢æ‰¾åˆ°ä¸€ä¸ªviewè°ƒç”¨layoutIfNeeded. â•®(â•¯â–½â•°)â•­, ä¸ºä»€ä¹ˆå°±ä¸èƒ½ç¨å¾®æ–¹ä¾¿ä¸€ç‚¹, åœ¨animationçš„blocké‡Œé¢ä¿®æ”¹çº¦æŸå°±è‡ªåŠ¨åŠ¨ç”»æèµ·å‘¢? æŠ€æœ¯ä¸Šå®Œå…¨å¯è¡Œçš„è¯´, å› ä¸ºä¿®æ”¹frame, alphaè¿™äº›å‚æ•°éƒ½æ˜¯OKçš„.&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;åæ§½çš„åŸºæœ¬ä¸Šéƒ½æ˜¯ä»£ç ä¸­ç¼–å†™AutoLayoutç›¸å…³ä»£ç çš„éƒ¨åˆ†, å®é™…é¡¹ç›®ä¸­ä¹Ÿç¡®å®æœ‰ä¸å°‘éœ€æ±‚æ˜¯éœ€è¦æ¯”è¾ƒåŠ¨æ€çš„å¸ƒå±€çš„. å¦‚æœappæ¯”è¾ƒç®€å•, ä½¿ç”¨storyboardå°±èƒ½å®Œæˆå¸ƒå±€æè¿°çš„è¯å°±æœ€å¥½äº†, é‚£æ ·å°†çœæ‰éå¸¸å¤šçš„ç¼–è¾‘å’Œè°ƒè¯•çº¦æŸçš„æ—¶é—´, å¹¶ä¸”ä»¥åçš„ç»´æŠ¤ä¹Ÿç›¸å¯¹æ–¹ä¾¿.&lt;/p&gt;
&lt;h2 id=&quot;æ€»ç»“-4&quot;&gt;&lt;a href=&quot;#æ€»ç»“-4&quot; class=&quot;headerlink&quot; title=&quot;æ€»ç»“&quot;&gt;&lt;/a&gt;æ€»ç»“&lt;/h2&gt;&lt;p&gt;AutoLayoutæ•´ä½“å¾ˆå¼ºå¤§, è€Œä¸”åœ¨iOSç¯å¢ƒä¸­å¾ˆæœ‰å¿…è¦. ç°åœ¨å·²ç»æœ‰å¤šç§å°ºå¯¸çš„è®¾å¤‡äº†, ä½¿ç”¨AutoLayoutä¼šå¤§å¤§å‡å°‘å¼€å‘è€…é€‚é…çš„å·¥ä½œ, æ˜¯æ—¶å€™äº†éªšå¹´.&lt;/p&gt;
&lt;p&gt;å¦å¤–, æœ¬äººå¼€å‘äº†ä¸€ä¸ªç”¨äºç®€åŒ–ä»£ç ç¼–å†™AutoLayoutçº¦æŸçš„å°åº“ &lt;a href=&quot;https://github.com/kaizeiyimi/XLYAutoLayoutEasy&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;XLYAutoLayoutEasy&lt;/a&gt;, ä¸ªäººæ„Ÿè§‰æ›´å…·æœ‰å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§, è¿˜æ”¯æŒswiftå“¦.&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;çªç„¶æœ‰ä¸€å¤©, è‹¹æœè¿˜åœ¨ios6çš„æ—¶å€™, å®ƒå‘å¸ƒäº†æ–°çš„å¸ƒå±€æ–¹å¼, å–åå«&lt;strong&gt;AutoLayout&lt;/strong&gt;, å¬ç€å¾ˆé«˜å¤§ä¸Š--è‡ªåŠ¨å¸ƒå±€. ä½†æ˜¯æˆ‘è¿™ç¯‡æ–‡ç« é™¤äº†ç®€å•ä»‹ç»ä¸€ä¸‹å®ƒä»¥å¤–æ›´å¤šçš„æ˜¯è¦åæ§½çš„, å…¶å®ä¹Ÿå°±ç¨å¾®åä¸€ç‚¹ç‚¹å®ƒçš„ä½¿ç”¨é—®é¢˜.&lt;/p&gt;
&lt;h2 id=&quot;A
    
    </summary>
    
      <category term="æŠ€æœ¯" scheme="/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
      <category term="iOS" scheme="/tags/iOS/"/>
    
  </entry>
  
  <entry>
    <title>iOS present åœºæ™¯åˆ‡æ¢çš„æ¼”åŒ–å’Œè¦ç‚¹</title>
    <link href="/2014/10/14/iOS_present_introduce_and_points/"/>
    <id>/2014/10/14/iOS_present_introduce_and_points/</id>
    <published>2014-10-14T06:30:00.000Z</published>
    <updated>2016-04-04T10:09:36.000Z</updated>
    
    <content type="html">&lt;p&gt;iOSä¸­çš„åœºæ™¯åˆ‡æ¢æœ‰å¤šç§æ–¹å¼, containerå†…éƒ¨çš„åˆ‡æ¢æœ‰UINavigationControllerçš„push popæ“ä½œ, UITabbarControllerçš„tabåˆ‡æ¢. å¤–éƒ¨çš„è½¬æ¢æœ‰popover(iPadä¸“ç”¨), å’Œéå¸¸å¸¸ç”¨çš„present. å½“ç„¶, UISplitViewControllerçš„replaceåœ¨storyboardä¹Ÿè¢«è®¤ä¸ºæ˜¯ä¸€ç§åˆ‡æ¢(iPadä¸“ç”¨, too). æœ¬æ–‡å°†è®¨è®ºpresentåœ¨ä¸åŒç‰ˆæœ¬çš„iOS SDKä¸­çš„å˜åŒ–ä»¥åŠpresentçš„ä¸€äº›éœ€è¦æ³¨æ„çš„é—®é¢˜. æœ¬æ–‡çš„æµ‹è¯•å’Œè®²è¿°éƒ½æ˜¯åœ¨xcode6.0.1ä¸­ä½¿ç”¨SDK8ç‰ˆæœ¬.&lt;/p&gt;
&lt;p&gt;presentæ˜¯åœ¨appä¸­å¯ä»¥å¸®åŠ©ç”¨æˆ·ç†è§£appè¡Œä¸º, åˆ’åˆ†appåŠŸèƒ½æ¨¡å—, æ˜¯ä¸€ç§æå…¶å¸¸ç”¨çš„åœºæ™¯åˆ‡æ¢æ–¹å¼. æœ€å¸¸ç”¨çš„æ–¹å¼å°±æ˜¯:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;objc hljs&quot;&gt;[ViewControllerA presentViewController:ViewControllerB animated:&lt;span class=&quot;hljs-literal&quot;&gt;YES&lt;/span&gt; completion:&lt;span class=&quot;hljs-literal&quot;&gt;nil&lt;/span&gt;];&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è°ƒç”¨åä¼šåœ¨Açš„ä¸Šæ–¹å±•ç¤ºB, ç”¨æˆ·éœ€è¦åœ¨Bä¸­è¿›è¡Œä¸€äº›æ“ä½œæ‰èƒ½ä¼šèƒ½å›åˆ°A, åœ¨Bå±•ç¤ºçš„æœŸé—´, Aä¸èƒ½ç›´æ¥ä¸ç”¨æˆ·äº¤äº’.&lt;/p&gt;
&lt;h2 id=&quot;segue-from-iOS5&quot;&gt;&lt;a href=&quot;#segue-from-iOS5&quot; class=&quot;headerlink&quot; title=&quot;segue from iOS5&quot;&gt;&lt;/a&gt;segue from iOS5&lt;/h2&gt;&lt;p&gt;åœ¨å¾ˆä¹…ä»¥å‰, presentèƒ½å¤Ÿå®šåˆ¶çš„åœ°æ–¹å¾ˆå°‘, å±•ç¤ºçš„æ–¹å¼åœ¨iPhoneå°ºå¯¸ä¸Šåªèƒ½å…¨å±, iPadæœ‰formSheetç­‰å¯ä»¥è¿›è¡Œéå…¨å±çš„å±•ç¤º. è€ŒåŠ¨ç”»åˆ™åªèƒ½åœ¨4ä¸ªé»˜è®¤è®¾ç½®ä¸­é€‰æ‹©(ç›´ä¸Šç›´ä¸‹, åè½¬, ç¿»é¡µ, æ·¡å…¥æ·¡å‡º). iOS5å¼€å§‹æä¾›äº†segueæ¥æŠ½è±¡ä¸€ä¸ªè·³è½¬, å¯ä»¥åˆ›å»ºè‡ªå®šä¹‰çš„segueå»åšåŠ¨ç”», ä½†æ˜¯è¿™æ ·çš„åšæ³•ä¼šå¯¼è‡´åœºæ™¯åˆ‡æ¢çš„åŠ¨ç”»å’Œåˆ‡æ¢çš„é€»è¾‘è¿‡ç¨‹æ˜¯åˆ†ç¦»çš„, viewWillAppearå’ŒviewDidAppearçš„è°ƒç”¨æ—¶æœºæ˜¯ä¸æ­£ç¡®çš„. ç®€å•æ¥è¯´å°±æ˜¯ç”¨åŠ¨ç”»æ¨¡æ‹Ÿäº†åˆ‡æ¢çš„è¿‡ç¨‹, ä½†å…¶å®åˆ‡æ¢æ˜¯ä¸€ç¬é—´, ä¸€èˆ¬å®ç°æ˜¯åœ¨åŠ¨ç”»ç»“æŸçš„completioné‡Œé¢è°ƒç”¨æ— åŠ¨ç”»çš„present. å…ˆçœ‹çœ‹è‹¹æœç»™å‡ºçš„ä»£ç :&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;objc hljs&quot;&gt;- (&lt;span class=&quot;hljs-keyword&quot;&gt;void&lt;/span&gt;)perform
{
&lt;span class=&quot;hljs-comment&quot;&gt;// Add your own animation code here.&lt;/span&gt;
    [[&lt;span class=&quot;hljs-keyword&quot;&gt;self&lt;/span&gt; sourceViewController] presentModalViewController:[&lt;span class=&quot;hljs-keyword&quot;&gt;self&lt;/span&gt; destinationViewController] animated:&lt;span class=&quot;hljs-literal&quot;&gt;NO&lt;/span&gt;];
}&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;å¦‚æœæŒ‰ç…§è‹¹æœæ–‡æ¡£ä¸Šç»™çš„ä»£ç å»å¡«ä¸ŠåŠ¨ç”»,  æ¯”å¦‚:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;objc hljs&quot;&gt;- (&lt;span class=&quot;hljs-keyword&quot;&gt;void&lt;/span&gt;)perform
{
    &lt;span class=&quot;hljs-built_in&quot;&gt;UIView&lt;/span&gt; *toView = [&lt;span class=&quot;hljs-keyword&quot;&gt;self&lt;/span&gt;.destinationViewController view];
    &lt;span class=&quot;hljs-built_in&quot;&gt;UIView&lt;/span&gt; *sourceView = [&lt;span class=&quot;hljs-keyword&quot;&gt;self&lt;/span&gt;.sourceViewController view];
    &lt;span class=&quot;hljs-comment&quot;&gt;//å¯»æ‰¾ä¸€ä¸ªä¸´æ—¶çš„viewä½œä¸ºsuperview, å¦åˆ™æ²¡æœ‰åŠ¨ç”»æ•ˆæœ, å› ä¸ºviewä¸åœ¨windowä¸Š&lt;/span&gt;
    [sourceView.superview addSubview:toView];
    toView.transform = &lt;span class=&quot;hljs-built_in&quot;&gt;CGAffineTransformMakeScale&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;0.5&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;0.5&lt;/span&gt;);
    [&lt;span class=&quot;hljs-built_in&quot;&gt;UIView&lt;/span&gt; animateWithDuration:&lt;span class=&quot;hljs-number&quot;&gt;0.5&lt;/span&gt; animations:^{
        toView.transform = &lt;span class=&quot;hljs-built_in&quot;&gt;CGAffineTransformIdentity&lt;/span&gt;;
    } completion:^{&lt;span class=&quot;hljs-comment&quot;&gt;/* ... */&lt;/span&gt;}];
    [&lt;span class=&quot;hljs-keyword&quot;&gt;self&lt;/span&gt;.sourceViewController presentViewController:&lt;span class=&quot;hljs-keyword&quot;&gt;self&lt;/span&gt;.destinationViewController animated:&lt;span class=&quot;hljs-literal&quot;&gt;NO&lt;/span&gt; completion:&lt;span class=&quot;hljs-literal&quot;&gt;nil&lt;/span&gt;];
}&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;å¾ˆä¸å¹¸, è¿™ä¸ªé€»è¾‘æ˜¯æœ‰é—®é¢˜çš„. é—®é¢˜å°±åœ¨addSubviewé‚£é‡Œ. ä¸ºäº†åšåŠ¨ç”», viewéœ€è¦åœ¨windowä¸Š, è€ŒaddSubviewçš„æ—¶å€™toViewè¿›å…¥window, ç„¶åviewWillAppearå’ŒviewDidAppearå°±ä¼šç«‹å³è¢«è°ƒç”¨, è¿™ä¸­è°ƒç”¨æ—¶æœºæ˜¯ä¸å¯¹çš„. ç„¶åä¸‹é¢åˆç«‹å³åšäº†present, SDK8ä¸­ä¼šå¾—åˆ°è¿™æ ·ä¸€ä¸ªwarning: &lt;code&gt;Unbalanced calls to begin/end appearance transitions for &amp;lt;YourViewController: 0x7fc46bd7e860&amp;gt;.&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;å¦‚æœæŠŠpresentçš„è¯­å¥æ”¾åˆ°åŠ¨ç”»çš„completionä¸­, æ²¡æœ‰warning, ä½†æ˜¯viewWillAppearå’ŒviewDidAppearä¼šåœ¨addSubviewå¤„è¿ç»­è°ƒç”¨ä¸€æ¬¡, ç„¶ååŠ¨ç”»ç»“æŸæ—¶è°ƒç”¨presentåˆè¢«è¿ç»­è°ƒç”¨ä¸€æ¬¡, å¯¼è‡´å„è¢«è°ƒç”¨ä¸¤æ¬¡. æ³¨æ„è¿™é‡Œ&lt;strong&gt;ä¸ä¼š&lt;/strong&gt;è°ƒç”¨disappearç›¸å…³çš„ä¸¤ä¸ªç”Ÿå‘½å‘¨æœŸæ–¹æ³•. æ˜¯ä¸æ˜¯å¾ˆæ— è¯­? è€Œå¦‚æœå»æ‰addSubviewçš„è°ƒç”¨, å°†æ²¡æœ‰åŠ¨ç”»æ•ˆæœ.&lt;/p&gt;
&lt;p&gt;ç½‘ä¸Šæœ‰ä¸€äº›å¸–å­é‡Œé¢çš„æ–¹æ³•ä¼šåœ¨completionä¸­, åœ¨presentä¹‹å‰å¤šä¸€ä¸ª&lt;code&gt;[toView removeFromSuperview]&lt;/code&gt;çš„è°ƒç”¨. å¾ˆä¸å¹¸, è¿™æ ·å¸¦æ¥çš„é—®é¢˜æ›´å¤šäº†, åœ¨SDK8ä¸­,ä¼šå¾—åˆ°willAppear, didAppear, åŠ¨ç”»ç»“æŸæ—¶å¾—åˆ°willDisappear, willAppear, æ²¡æœ‰didAppear! ç„¶ååˆå¾—åˆ°å‰æ–‡æåˆ°çš„warning. è¿™çœŸæ˜¯è®©äººæ²®ä¸§çš„äº‹æƒ….&lt;/p&gt;
&lt;p&gt;æ‰€ä»¥æˆ‘çš„å»ºè®®æ˜¯ä¸è¦ä½¿ç”¨è‡ªå®šä¹‰çš„segue, viewControllerçš„ç”Ÿå‘½å‘¨æœŸå®Œå…¨å¾—ä¸åˆ°ä¿éšœ. ä½¿ç”¨segueå»æ¨¡æ‹Ÿçš„æ–¹å¼ä¼šå¯¼è‡´ç”Ÿå‘½å‘¨æœŸæ–¹æ³•çš„è°ƒç”¨å’Œè§†è§‰è¿‡ç¨‹ä¸ä¸€è‡´. å¯¼è‡´å¼€å‘è€…åœ¨ä¸åŒç”Ÿå‘½å‘¨æœŸé‡Œé…ç½®çš„ä¸åŒçš„é€»è¾‘çš„æ‰§è¡Œé¡ºåºå’Œæ—¶æœºéƒ½ä¸æ­£ç¡®.&lt;/p&gt;
&lt;h2 id=&quot;Transitioning-from-iOS7&quot;&gt;&lt;a href=&quot;#Transitioning-from-iOS7&quot; class=&quot;headerlink&quot; title=&quot;Transitioning from iOS7&quot;&gt;&lt;/a&gt;Transitioning from iOS7&lt;/h2&gt;&lt;p&gt;ä¸€ä¸ªçœŸæ­£çš„åœºæ™¯åˆ‡æ¢å¯¹äºç›®æ ‡viewControlleræ¥è®²åº”è¯¥æ˜¯viewWillAppear, ç„¶ååŠ¨ç”», ç„¶åæ‰æ˜¯viewDidAppear.  iOS7ä¸­æä¾›äº†transitionçš„æ¦‚å¿µ, ç”¨äºç»™åœºæ™¯åˆ‡æ¢æä¾›è‡ªå®šä¹‰åŠ¨ç”». è¿™å¥—æœºåˆ¶æŠŠåœºæ™¯åˆ‡æ¢çš„è¿‡ç¨‹è¿›è¡Œäº†æ‹†åˆ†, å°†å…¶ä¸­çš„åŠ¨ç”»éƒ¨åˆ†äº¤ç”±å¼€å‘è€…æä¾›, presentè°ƒç”¨è¿˜å’Œä»¥å‰ä¸€æ ·, ä¹Ÿä»ç„¶å¯ä»¥ä½¿ç”¨ç³»ç»Ÿæä¾›çš„segue(ç³»ç»Ÿå†…éƒ¨æ˜¯æ­£ç¡®çš„, åªæ˜¯å¼€å‘è€…æ²¡æœ‰åŠæ³•), åªæ˜¯åœ¨çœŸæ­£å¼€å§‹presentæµç¨‹å‰è®¾ç½®ä¸€ä¸‹presentedViewController.transitioningDelegate = someDelegate. è¿™æ ·ä¿è¯äº†viewControlleråˆ‡æ¢æ—¶çš„ç”Ÿå‘½å‘¨æœŸè°ƒç”¨æ—¶æœº, è€Œä¸”ä¹Ÿå¯ä»¥åˆ›é€ å‡ºå„ç§å„æ ·çš„åŠ¨ç”»æ•ˆæœ. ç®€å•çœ‹çœ‹ä½¿ç”¨æ–¹å¼:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;objc hljs&quot;&gt;- (&lt;span class=&quot;hljs-keyword&quot;&gt;void&lt;/span&gt;)prepareForSegue:(&lt;span class=&quot;hljs-built_in&quot;&gt;UIStoryboardSegue&lt;/span&gt; *)segue sender:(&lt;span class=&quot;hljs-keyword&quot;&gt;id&lt;/span&gt;)sender
{
    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (![segue.identifier isEqualToString:&lt;span class=&quot;hljs-string&quot;&gt;@&quot;your present segue identifier&quot;&lt;/span&gt;]) {
        &lt;span class=&quot;hljs-built_in&quot;&gt;UIViewController&lt;/span&gt; *viewController = segue.destinationViewController;
        viewController.transitioningDelegate = someDelegate;        
        &lt;span class=&quot;hljs-comment&quot;&gt;//æ–‡æ¡£è¦æ±‚è®¾ç½®ä¸ºcustomæ‰ä¼šæ ¹æ®delegateå»è·å–è‡ªå®šä¹‰åŠ¨ç”»,å®é™…æµ‹è¯•ç»“æœæ˜¯ä¸éœ€è¦è®¾ç½®ä¹ŸOK. è€Œä¸”è®¾ç½®äº†åè€Œä¼šåœ¨ios8ä¸­äº§ç”Ÿå¦å¤–çš„é—®é¢˜, åæ–‡æè¿°&lt;/span&gt;
        viewController.modalPresentationStyle = &lt;span class=&quot;hljs-built_in&quot;&gt;UIModalPresentationCustom&lt;/span&gt;;
    }
}&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è‹¹æœçš„æ–‡æ¡£è¯´æ˜:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Discussion
  When this view controllerâ€™s &lt;em&gt;modalPresentationStyle&lt;/em&gt; property is &lt;em&gt;UIModalPresentationCustom&lt;/em&gt;, UIKit uses the object in this property to retrieve the objects needed to present this view controller onscreen. The transitioning delegate must conform to the &lt;em&gt;UIViewControllerTransitioningDelegate&lt;/em&gt; protocol. Its job is to vend the animator objects used to animate this view controllerâ€™s view onscreen &lt;strong&gt;and an optional presentation controller to provide any additional chrome and animations&lt;/strong&gt;.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;åŠ ç²—çš„æ˜¯ios8æ‰æœ‰çš„. ä¸‹é¢æ˜¯someDelegateå®ç°çš„æ–¹æ³•:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;objc hljs&quot;&gt;- (&lt;span class=&quot;hljs-keyword&quot;&gt;id&lt;/span&gt;&amp;lt;&lt;span class=&quot;hljs-built_in&quot;&gt;UIViewControllerAnimatedTransitioning&lt;/span&gt;&amp;gt;)animationControllerForPresentedController:(&lt;span class=&quot;hljs-built_in&quot;&gt;UIViewController&lt;/span&gt; *)presented presentingController:(&lt;span class=&quot;hljs-built_in&quot;&gt;UIViewController&lt;/span&gt; *)presenting sourceController:(&lt;span class=&quot;hljs-built_in&quot;&gt;UIViewController&lt;/span&gt; *)source
{
    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; [CustomPresentAnimation new];
}

- (&lt;span class=&quot;hljs-keyword&quot;&gt;id&lt;/span&gt;&amp;lt;&lt;span class=&quot;hljs-built_in&quot;&gt;UIViewControllerAnimatedTransitioning&lt;/span&gt;&amp;gt;)animationControllerForDismissedController:(&lt;span class=&quot;hljs-built_in&quot;&gt;UIViewController&lt;/span&gt; *)dismissed
{
    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; [CustomDismissAnimation new];
}&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è¿™é‡Œåªæ˜¯ç®€å•åˆ—ä¸¾ä¸€ä¸‹æ–¹æ³•, ä½¿ç”¨çš„åŠ¨ç”»å¯¹è±¡æ²¡æœ‰è‡ªå®šä¹‰çš„å±æ€§å› æ­¤å°±ç›´æ¥newäº†. åŠ¨ç”»å¯¹è±¡éœ€è¦å®ç°&lt;em&gt;UIViewControllerAnimatedTransitioning&lt;/em&gt; æˆ–è€… &lt;em&gt;UIViewControllerInteractiveTransitioning&lt;/em&gt; åè®®, åè€…ä»åå­—ä¸Šèƒ½çœ‹å‡ºæ¥æ˜¯äº¤äº’å¼åˆ‡æ¢. ä»å±å¹•å·¦è¾¹å¾€å³æ»‘åŠ¨å»è§¦å‘popæ“ä½œ, å¹¶ä¸”è®©UIè·Ÿéšæ‰‹æŒ‡è¿åŠ¨çš„åˆ‡æ¢æ–¹å¼å°±æ˜¯äº¤äº’å¼çš„.&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;objc hljs&quot;&gt;- (&lt;span class=&quot;hljs-keyword&quot;&gt;void&lt;/span&gt;)animateTransition:(&lt;span class=&quot;hljs-keyword&quot;&gt;id&lt;/span&gt;&amp;lt;&lt;span class=&quot;hljs-built_in&quot;&gt;UIViewControllerContextTransitioning&lt;/span&gt;&amp;gt;)transitionContext
{
    &lt;span class=&quot;hljs-built_in&quot;&gt;UIView&lt;/span&gt; *containerView = [transitionContext containerView];
    &lt;span class=&quot;hljs-built_in&quot;&gt;UIView&lt;/span&gt; *fromView = [transitionContext viewForKey:&lt;span class=&quot;hljs-built_in&quot;&gt;UITransitionContextFromViewKey&lt;/span&gt;];
    &lt;span class=&quot;hljs-built_in&quot;&gt;UIView&lt;/span&gt; *toView = [transitionContext viewForKey:&lt;span class=&quot;hljs-built_in&quot;&gt;UITransitionContextToViewKey&lt;/span&gt;];
    [containerView insertSubview:toView atIndex:&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;];
    toView.alpha = &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;;
    [&lt;span class=&quot;hljs-built_in&quot;&gt;UIView&lt;/span&gt; animateWithDuration:[&lt;span class=&quot;hljs-keyword&quot;&gt;self&lt;/span&gt; transitionDuration:transitionContext] animations:^{
        fromView.transform = &lt;span class=&quot;hljs-built_in&quot;&gt;CGAffineTransformMakeScale&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;1.5&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;1.5&lt;/span&gt;);
        fromView.alpha = &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;;
        toView.alpha = &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;;
    } completion:^(&lt;span class=&quot;hljs-built_in&quot;&gt;BOOL&lt;/span&gt; finished) {
        [transitionContext completeTransition:&lt;span class=&quot;hljs-literal&quot;&gt;YES&lt;/span&gt;];
    }];
}

- (&lt;span class=&quot;hljs-built_in&quot;&gt;NSTimeInterval&lt;/span&gt;)transitionDuration:(&lt;span class=&quot;hljs-keyword&quot;&gt;id&lt;/span&gt;&amp;lt;&lt;span class=&quot;hljs-built_in&quot;&gt;UIViewControllerContextTransitioning&lt;/span&gt;&amp;gt;)transitionContext
{
    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;1.0&lt;/span&gt;;
}&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ä¸Šé¢è¿™æ®µä»£ç å¯¹äºpresentæˆ–è€…dismisséƒ½å¯ä»¥ä½¿ç”¨, æ•ˆæœå°±æ˜¯å½“å‰fromViewä¼šå˜å¤§å¹¶å˜é€æ˜, toViewä¼šä»é€æ˜åˆ°å®Œå…¨ä¸é€æ˜. æ›´æ·±å…¥çš„ç”¨æ³•ä»¥åŠäº¤äº’å¼åŠ¨ç”»çš„æ§åˆ¶è¿™é‡Œä¸è®¨è®º, è‹¹æœçš„æ–‡æ¡£å’Œç¤ºä¾‹ä»£ç éƒ½æœ‰å¾ˆå¥½çš„è¯´æ˜. &lt;/p&gt;
&lt;p&gt;å…³äºæ˜¯å¦è®¾ç½®&lt;em&gt;UIModalPresentationCustom&lt;/em&gt;çš„é—®é¢˜, è™½ç„¶æ–‡æ¡£è¦æ±‚è®¾ç½®, ä½†æ˜¯æµ‹è¯•æ˜¯ä¸éœ€è¦. å¦‚æœè®¾ç½®äº†delegateå¹¶ä¸”ä½¿ç”¨&lt;em&gt;UIModalPresentationCurrentContext&lt;/em&gt;, ä¼šè¾¾åˆ°currentContextèµ·ä½œç”¨å¹¶ä¸”è‡ªå®šä¹‰åŠ¨ç”»ä¹Ÿèµ·ä½œç”¨çš„ç°è±¡. ç®—bugä¹ˆ? (å…³äºcurrentContextçš„ä½¿ç”¨åæ–‡æœ‰ä»‹ç»)&lt;/p&gt;
&lt;p&gt;å°½ç®¡åœ¨iOS7ä¸­å¼€æ”¾äº†åœºæ™¯åˆ‡æ¢çš„åŠ¨ç”»æ§åˆ¶, å¯¹äºpresentçš„ä¸€äº›éœ€æ±‚ä»ç„¶æ²¡æœ‰è¾¾åˆ°. ä¸¾ä¸€ä¸ªç®€å•çš„ä¾‹å­: æˆ‘ä¸æƒ³åœ¨presentè°ƒç”¨åå°†presenterçš„Viewä»windowä¸Šç§»é™¤, å› ä¸ºæˆ‘éœ€è¦å®ƒä½œä¸ºä¸€ä¸ªèƒŒæ™¯, å°±åƒiPadä¸Šçš„formSheetä¸€æ ·. ä½†æ˜¯å¾ˆé—æ†¾, iPhoneä¸Šä¸å¯ä»¥, presentingViewControllerçš„viewä¼šè¢«ç§»é™¤, å½“ç„¶ä½ å¯ä»¥æˆªå±, ä½†æ˜¯æ— æ³•åŒæ­¥å†…å®¹äº†, æˆ–è€…, å¯ä»¥åˆ›å»ºä¸€ä¸ªwindow, æŒ‡å®šä¸€ä¸ªç›¸å¯¹è¾ƒé«˜çš„windowLevel, å°†presentedControlleræ”¾åˆ°æ–°çš„windowä¸­æ¥è¾¾åˆ°éœ€æ±‚(è¿™ä¹Ÿæ˜¯æˆ‘ç°åœ¨çš„åšæ³•...). ä½†æ˜¯ç”¨windowçš„éº»çƒ¦å°±æ˜¯ä¸å®¹æ˜“æ§åˆ¶, appä¸­å…¶ä»–çš„éƒ¨åˆ†å’Œè¿™ä¸ªviewControlleråªæœ‰æ•°æ®äº¤äº’, viewControllerå’Œviewçš„å±‚çº§ç»“æ„è¢«å®Œå…¨å‰¥ç¦»äº†. ä¸æ˜¯å¾ˆå¥½çš„è§£å†³æ–¹æ³•.&lt;/p&gt;
&lt;h2 id=&quot;UIPresentation-from-iOS8&quot;&gt;&lt;a href=&quot;#UIPresentation-from-iOS8&quot; class=&quot;headerlink&quot; title=&quot;UIPresentation from iOS8&quot;&gt;&lt;/a&gt;UIPresentation from iOS8&lt;/h2&gt;&lt;h3 id=&quot;UIPresentationController&quot;&gt;&lt;a href=&quot;#UIPresentationController&quot; class=&quot;headerlink&quot; title=&quot;UIPresentationController&quot;&gt;&lt;/a&gt;UIPresentationController&lt;/h3&gt;&lt;p&gt;iOS8ä¸­å†æ¬¡å¼ºåŒ–äº†presentçš„ä½¿ç”¨. æ™®é€šçš„ä½¿ç”¨å½“ç„¶æ²¡æœ‰é—®é¢˜, ä½†æ˜¯å¦‚æœæƒ³æ›´å¥½åœ°æ§åˆ¶presentçš„è¿‡ç¨‹å’Œç»†èŠ‚, é‚£ä¹ˆiOS8ä¸­çš„UIPresentationControllerå°±æ˜¯å®Œæˆè¿™ä¸ªä»»åŠ¡çš„. å®ƒæè¿°çš„æ˜¯ä¸€ä¸ªpresentä»å¼€å§‹åˆ°ç»“æŸçš„å…¨è¿‡ç¨‹, è¿™é‡Œä¸åŒ…å«å¦‚ä½•åšè¿‡åœºåŠ¨ç”», ä½†æ˜¯æœ‰æ–¹æ³•å¯ä»¥åŒå…¶&lt;strong&gt;äº¤æµ&lt;/strong&gt;(åæ–‡ä¼šè§£é‡Š), è¿‡åœºåŠ¨ç”»ä»ç„¶ç”±iOS7çš„æ–¹å¼æ¥æ§åˆ¶. ä»å¼€å§‹åˆ°ç»“æŸæ˜¯ä¸€ä¸ªæ€æ ·çš„è¿‡ç¨‹? æ˜¯ä»æŸä¸€ä¸ªviewcontrollerè°ƒç”¨presentå¼€å§‹, ä¸€ç›´åˆ°dismissæ‰è¢«å±•ç¤ºçš„presentedViewController. æœŸé—´çš„å¤§å°å˜åŒ–, å¸ƒå±€ç­‰éƒ½å±äºè¿™ä¸ªè¿‡ç¨‹çš„ä¸€éƒ¨åˆ†. UIPresentationControlleræä¾›çš„ä¿¡æ¯å¾ˆå¤š, å¦‚:æ­£åœ¨å±•ç¤ºçš„å’Œè¢«å±•ç¤ºçš„viewController, å±•ç¤ºçš„æ–¹å¼, åœºæ™¯åˆ‡æ¢æ—¶çš„containerView, ç„¶åæ˜¯ä¸€äº›æ–¹æ³•æä¾›è¯¸å¦‚æ˜¯å¦éœ€è¦ç§»é™¤presentingView, æ˜¯å¦å…¨å±å±•ç¤º, è¿˜æœ‰å¸ƒå±€ç›¸å…³çš„ä¸€äº›å›è°ƒå’Œæ–¹æ³•. è¯¦ç»†çš„å†…å®¹å’Œç”¨æ³•è¿™é‡Œä¸èµ˜è¿°äº†, å¯ä»¥çœ‹å¤´æ–‡ä»¶ä»¥äº†è§£æ›´å¤š, å¦ä¸€ç¯‡åšå®¢ä¸­ä¼šå•ç‹¬ä»‹ç».&lt;/p&gt;
&lt;p&gt;è¦æƒ³ä½¿ç”¨UIPresentationControllerå»æ§åˆ¶presentè¿‡ç¨‹, å°±éœ€è¦å°†presentedViewControllerçš„&lt;em&gt;modalPresentationStyle&lt;/em&gt; è®¾ç½®ä¸º &lt;em&gt;UIModalPresentationCustom&lt;/em&gt;, å¦åˆ™å°†ä¸ä¼šå°è¯•è·å–UIPresentationControllerçš„å®ä¾‹. è€Œæ˜¯å¦æœ‰presentationControlleræ¥æ§åˆ¶presentè¿‡ç¨‹å¾—åˆ°çš„æ•ˆæœä¹Ÿä¸ä¸€æ ·, æœ€æ˜æ˜¾çš„ä¸€ä¸ªå°±æ˜¯é»˜è®¤ä¸ç§»é™¤presenterçš„view. åªéœ€è¦è®¾ç½®ä¸º&lt;em&gt;UIModalPresentationCustom&lt;/em&gt;, ä¸éœ€è¦è®¾ç½®transitionDelegateå°±å¯ä»¥çœ‹åˆ°æ•ˆæœ. ä½†æ˜¯å¦‚æœä¸è®¾ç½®transitionDelegateè€Œè·‘åœ¨ios7çš„è®¾å¤‡ä¸­ä¼šå¾—åˆ°å¦‚ä¸‹warning: &lt;em&gt;UIModalPresentationCustom presentation style can only be used with an animator or with unanimated presentations.&lt;/em&gt;  å¦‚æœè®¾ç½®äº†delegate, å¯ä»¥å¤šå®ç°ä¸€ä¸ªæ–¹æ³•å»è¿”å›è‡ªå®šä¹‰çš„presentationController, å¯ä»¥å®šåˆ¶ç‰¹åˆ«å¤šçš„ç»†èŠ‚, æ¯”å¦‚chromeå’Œcontentçš„å¤§å°, åœºæ™¯åˆ‡æ¢ç›¸å…³çš„é™„åŠ åŠ¨ç”». &lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;objc hljs&quot;&gt;    &lt;span class=&quot;hljs-built_in&quot;&gt;UIView&lt;/span&gt; *dimView = [[&lt;span class=&quot;hljs-built_in&quot;&gt;UIView&lt;/span&gt; alloc] initWithFrame:&lt;span class=&quot;hljs-keyword&quot;&gt;self&lt;/span&gt;.containerView.bounds];
    dimView.backgroundColor = [&lt;span class=&quot;hljs-built_in&quot;&gt;UIColor&lt;/span&gt; colorWithRed:&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt; green:&lt;span class=&quot;hljs-number&quot;&gt;170&lt;/span&gt; blue:&lt;span class=&quot;hljs-number&quot;&gt;170&lt;/span&gt; alpha:&lt;span class=&quot;hljs-number&quot;&gt;0.8&lt;/span&gt;];
    dimView.alpha = &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;;
    dimView.autoresizingMask = &lt;span class=&quot;hljs-built_in&quot;&gt;UIViewAutoresizingFlexibleWidth&lt;/span&gt; | &lt;span class=&quot;hljs-built_in&quot;&gt;UIViewAutoresizingFlexibleHeight&lt;/span&gt;;
    [&lt;span class=&quot;hljs-keyword&quot;&gt;self&lt;/span&gt;.containerView insertSubview:dimView atIndex:&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;];

[&lt;span class=&quot;hljs-keyword&quot;&gt;self&lt;/span&gt;.presentedViewController.transitionCoordinator animateAlongsideTransition:^(&lt;span class=&quot;hljs-keyword&quot;&gt;id&lt;/span&gt;&amp;lt;&lt;span class=&quot;hljs-built_in&quot;&gt;UIViewControllerTransitionCoordinatorContext&lt;/span&gt;&amp;gt; context) {
        dimView.alpha = &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;;
    } completion:&lt;span class=&quot;hljs-literal&quot;&gt;nil&lt;/span&gt;];&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;iPadä¸ŠformSheetå¼¹å‡ºæ—¶å‘¨å›´ä¸æ˜¯å˜é»‘ä¹ˆ? è¿™é‡Œçš„ä»£ç å°±æ˜¯å˜æˆå¤©è“è‰². æ³¨æ„é‚£ä¸ªanimateAlongSideTransitionæ–¹æ³•, è¿™ä¸ªæ–¹æ³•çš„æ„æ€æ˜¯blocké‡Œåœ°åŠ¨ç”»æ˜¯å’Œè¿‡åœºåŠ¨ç”»ä¸€èµ·æ‰§è¡Œçš„, æµ‹è¯•äº†ä¸€ä¸‹, æ•ˆæœæˆ–è€…è¯´å®é™…åšæ³•å°±æ˜¯æŠŠè¿™ä¸ªblockåŠ åˆ°äº†è¿‡åœºåŠ¨ç”»çš„blockåé¢åç»„æˆä¸€ä¸ªæ–°çš„blockæ¥åšåŠ¨ç”», è¿™å°±æ˜¯å‰æ–‡æ‰€è¿°çš„&amp;quot;äº¤æµ&amp;quot;. å¼€å‘ä¸­æˆ‘æœ‰æ—¶å€™ä¹Ÿä¼šè¿™æ ·æä¾›ä¸€äº›å›è°ƒå’Œè®¾ç½®æ¥è§£å†³ä¸€äº›åŠ¨ç”»çš„åŒæ­¥é—®é¢˜. è¿˜æœ‰ä¸€äº›å…³äºsizeæ§åˆ¶çš„å°±ä¸å¤šè¯´äº†.&lt;/p&gt;
&lt;p&gt; é™¤äº†å¼€å‘è€…å¯ä»¥å®šåˆ¶presentè¿‡ç¨‹, è‹¹æœè‡ªå·±ä¹Ÿå¯¹ç³»ç»Ÿæ§ä»¶åšäº†å¾ˆå¤šæ”¹é€ . UIPresentationControlleræ˜¯ä¸€ä¸ªçˆ¶ç±», iOSè‡ªå·±å®ç°äº†ä¸€äº›å­ç±»å¦‚ç§æœ‰çš„å…¨å±å±•ç¤ºControllerè¿˜æœ‰UIPopoverPresentationController, è€Œä¸”å°†å¾ˆå¤šä»¥å‰çš„æ§ä»¶è¿›è¡Œäº†æ”¹é€ , UIAlertView, UIActionSheet, popover, searchDisplayControlleréƒ½è¢«æ”¹é€ äº†. è‹¹æœçš„å·¥ç¨‹å¸ˆåº”è¯¥æ˜¯è¿™ä¹ˆè®¤ä¸ºçš„: è¿™äº›ä¸œè¥¿éƒ½æ˜¯åœ¨ç°æœ‰çš„viewControllerä¸Šå±•ç¤ºä¸€äº›æ–°çš„å†…å®¹, è®¤ä¸ºä»–ä»¬çš„è¡Œä¸ºå…¶å®å°±æ˜¯present. å› æ­¤ä»iOS8å¼€å§‹æˆ‘ä»¬å¤šäº†UIAlertControlleræ¥åŒ…å«alertå’ŒactionSheetçš„å±•ç¤º, å¹¶ä¸”æ˜¯åŸºäºblockçš„. popoverä¸æ˜¯æä¾›æ–°çš„viewController, è€Œæ˜¯æä¾›äº†ä¸€ç§å±•ç¤ºæ–¹å¼&lt;code&gt;UIModalPresentationPopover&lt;/code&gt; ä»¥åŠ UIPopoverPresentationControlleræ¥æä¾›ç®¡ç†,  UISearchDisplayControllerè¢«æ›¿æ¢ä¸ºUISearchController.(wwdcçš„è§†é¢‘é‡Œé¢, å·¥ç¨‹å¸ˆè‡ªå–·äº†ä¸€ä¸‹ä»¥å‰ä½¿ç”¨çš„æ˜¯view, é€šè¿‡addsubviewå»æ·»åŠ , å´è¦è£…å¾—å¥½åƒä¸€ä¸ªviewController, è¯´æ˜¯ä»˜å‡ºäº†å¾ˆå¤š, å›æŠ¥å¾ˆå°‘çš„æ ·å­...).&lt;/p&gt;
&lt;p&gt;çœ‹è‹¹æœçš„æ„æ€æ˜¯è¦ç”¨viewControlleræ¥åŒºåˆ†æ‰€æœ‰çš„åœºæ™¯, å¹¶ç”¨presentationæ¥ç®¡ç†åœºæ™¯åˆ‡æ¢(ä¸åŒ…å«å®¹å™¨å†…éƒ¨çš„åˆ‡æ¢). ä»¥å‰çš„alertå’ŒactionSheetçš„è‡ªå·±åˆ›å»ºwindow, ä»¥åŠUISearchDisplayControllerå»addsubviewçš„æ–¹å¼è¢«å¦å®šäº†. çš„ç¡®è¿™æ˜¯å¾ˆä¸å¥½çš„, å°±æ‹¿UIAlertViewæ¥è¯´, å› å…¶è‡ªå·±å¤„åœ¨ä¸€ä¸ªç‹¬ç«‹çš„windowä¸­, å¦‚æœè°ƒç”¨showçš„viewControlleræ¶ˆå¤±äº†, å´æ²¡æœ‰è®¾ç½®alertViewæ¶ˆå¤±, å°±ä¼šå¯¼è‡´ä¸€ä¸ªå¾ˆå°´å°¬çš„ç°è±¡, å†…å®¹éƒ½æ²¡äº†, ä½ alertä¸ªå•¥å‘¢? è€Œä¸”, å¦‚æœalertViewçš„delegateæ­£å¥½æ˜¯è¿™ä¸ªviewControllerçš„è¯, ç‚¹å‡»alertViewçš„æŒ‰é’®è¿˜ä¼šå¯¼è‡´å´©æºƒ, å› ä¸ºdelegateå±æ€§æ˜¯assignä¸æ˜¯weak (è¦æ³¨æ„, assignæ˜¯æ­£ç¡®çš„è®¾è®¡). å½“ç„¶å¯ä»¥åœ¨viewControllerçš„viewWillDisappearæˆ–è€…deallocç­‰åœ°æ–¹æ·»åŠ ä¸€ä¸‹å¹²æ‰alertViewçš„é€»è¾‘, ä½†æ˜¯è¿™æ ·å°±ä¼šç»™viewControlleræ·»åŠ å˜é‡äº†, å¹¶ä¸”æœ‰æ—¶å€™ä¼šæ·»åŠ å¾ˆå¤š... å¯¹äºUIAlertView, ç³»ç»Ÿè¿˜æœ‰ä¸€ä¸ªè¡Œä¸ºæ¯”è¾ƒæœ‰æ„æ€, alertViewå¯ä»¥åœ¨ä¸Šä¸€ä¸ªæ²¡æœ‰æ¶ˆå¤±çš„æƒ…å†µä¸‹ç»§ç»­å¼¹å‡º, å¼¹å‡ºæ—¶ä¼šæš‚æ—¶éšè—ä¸Šä¸€ä¸ª, å¾…è¿™ä¸€ä¸ªå¤„ç†å®Œæ¯•åå†é‡æ–°æ˜¾ç¤º. åœ¨å¼¹çª—æ­£åœ¨å±•ç¤ºçš„æœŸé—´å¦‚æœappåˆ‡åˆ°åå°, å†åˆ‡å›å‰å°, alertViewä¼šé‡æ–°ä»æ— åˆ°æœ‰çš„å±•ç¤ºä¸€æ¬¡. è€Œæ¢æˆalertControllerä»¥å, å±•ç¤ºçš„å…¶å®å°±æ˜¯ä¸€ä¸ªçœ‹èµ·æ¥è·ŸalertViewä¸€æ ·çš„viewController, ç³»ç»Ÿæ˜¯ä¸å…è®¸ä¸€ä¸ªpresentingViewControlleråŒæ—¶presentä¸¤ä¸ªviewControllerçš„, å› æ­¤alertViewçš„é‚£ç§å…è®¸è¿ç»­å¼¹å¤šä¸ªalertçš„æœ‰è¶£çš„ç°è±¡æ²¡æœ‰äº†, å¹¶ä¸”ä¹Ÿä¸ä¼šåœ¨å‰åå°åˆ‡æ¢æ—¶å‡ºç°å‰è¿°çš„é‡æ–°å±•ç¤ºçš„ç°è±¡. å¦‚æœæœ‰äººä»¥å‰ä¾èµ–äº†è¿™äº›é€»è¾‘å°±ä¸€å®šè¦å°å¿ƒäº†, UIAlertControlleréœ€è¦ä¾èµ–ä¸€ä¸ªviewControlleræ‰èƒ½è¿›è¡Œå±•ç¤º, ä¸èƒ½è‡ªè¡Œåˆ›å»ºwindowè¿›è¡Œå±•ç¤º. ä¹Ÿå°±ä¸å­˜åœ¨ç¼“å­˜ä¹‹å‰çš„alertä¸€è¯´äº†.&lt;/p&gt;
&lt;h3 id=&quot;adaptive-è‡ªé€‚åº”&quot;&gt;&lt;a href=&quot;#adaptive-è‡ªé€‚åº”&quot; class=&quot;headerlink&quot; title=&quot;adaptive è‡ªé€‚åº”&quot;&gt;&lt;/a&gt;adaptive è‡ªé€‚åº”&lt;/h3&gt;&lt;p&gt;è¿™é‡Œè¡¥å……è¯´ä¸€ç‚¹adaptive. è‹¹æœå¯¹iOS8ä¸­æ‰€ä½œçš„presentçš„æ”¹åŠ¨å’Œè‡ªé€‚åº”ä¸åŒå±å¹•å°ºå¯¸æ˜¯æœ‰éå¸¸å¤§å…³ç³»çš„. ä¸ºä»€ä¹ˆå…è®¸åœ¨iPhoneç¯å¢ƒä¸­ä¹Ÿèƒ½ä½¿ç”¨popoverå’Œsplit? å…¶å®åœ¨å¯ç”¨size classeså, è‹¹æœæœŸæœ›å¼€å‘è€…èƒ½æ›´å¤šåœ°å…³æ³¨ç°åœ¨çš„å°ºå¯¸ä¸­å®½åº¦å’Œé«˜åº¦æœ‰æ²¡æœ‰è¢«å‹ç¼©,  &lt;em&gt;UITraitCollection&lt;/em&gt; æè¿°äº†ç°åœ¨æ‰€å¤„çš„ç¯å¢ƒ, åŒ…å«å®½åº¦, é«˜åº¦çš„æƒ…å†µ, å±å¹•çš„scale, è®¾å¤‡.(æ›´å¤šåœ°ç»†èŠ‚çœ‹wwdcè§†é¢‘å’Œæ–‡æ¡£). åœ¨æœ‰size classesçš„æƒ…å†µä¸‹, æ‹¿popoveræ¥ä¸¾ä¾‹, åŒä¸€æ®µä»£ç å°±å¯èƒ½å…è®¸äºä¸åŒå°ºå¯¸çš„è®¾å¤‡ä¸­, iPadä¸­å®½åº¦å’Œé«˜åº¦éƒ½æ˜¯æ­£å¸¸, èƒ½åƒæœŸæœ›åœ°é‚£æ ·å¼¹å‡ºpopover, æ•ˆæœä¸å˜. è€Œåœ¨iPhoneä¸­ä¹Ÿå°±æ˜¯å®½åº¦æˆ–è€…é«˜åº¦è¢«å‹ç¼©æ—¶, popoverä¸èƒ½å±•ç¤º, ç³»ç»Ÿçš„UIPopoverPresentationControllerçš„é»˜è®¤è¡Œä¸ºæ˜¯å¸®ä½ æ”¹æˆå…¨å±present. å¦‚æœä½ æƒ³å†ç¨å¾®å®šåˆ¶ä¸‹å…¨å±å±•ç¤ºæ—¶çš„æ ·å¼æ¯”å¦‚æ·»åŠ ä¸€ä¸ªnavigationControlleræ¥åŒ…å«å°†è¦å±•ç¤ºçš„viewController, é‚£ä¹ˆå¯ä»¥å®ç°UIPresentationControllerçš„ä»£ç†æ–¹æ³•æ¥æä¾›è°ƒæ•´:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;objc hljs&quot;&gt;&lt;span class=&quot;hljs-comment&quot;&gt;//viewControllerä¸­&lt;/span&gt;
- (&lt;span class=&quot;hljs-keyword&quot;&gt;void&lt;/span&gt;)prepareForSegue:(&lt;span class=&quot;hljs-built_in&quot;&gt;UIStoryboardSegue&lt;/span&gt; *)segue sender:(&lt;span class=&quot;hljs-keyword&quot;&gt;id&lt;/span&gt;)sender
{
    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; ([segue.identifier isEqualToString:&lt;span class=&quot;hljs-string&quot;&gt;@&quot;popover&quot;&lt;/span&gt;]) {
        &lt;span class=&quot;hljs-built_in&quot;&gt;UIViewController&lt;/span&gt; *viewController = segue.destinationViewController;
        viewController.presentationController.delegate = &lt;span class=&quot;hljs-keyword&quot;&gt;self&lt;/span&gt;;
    }
}

&lt;span class=&quot;hljs-comment&quot;&gt;//ä»£ç†æ–¹æ³•&lt;/span&gt;
- (&lt;span class=&quot;hljs-built_in&quot;&gt;UIModalPresentationStyle&lt;/span&gt;)adaptivePresentationStyleForPresentationController:(&lt;span class=&quot;hljs-built_in&quot;&gt;UIPresentationController&lt;/span&gt; *)controller
{
&lt;span class=&quot;hljs-comment&quot;&gt;//ç³»ç»Ÿé»˜è®¤çš„åº”è¯¥æ˜¯UIModalPresentationFullScreen, æ²¡æœ‰overè¿™ä¸ªå•è¯&lt;/span&gt;
    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;UIModalPresentationOverFullScreen&lt;/span&gt;;
}

&lt;span class=&quot;hljs-comment&quot;&gt;//must implement the above one to give a chance to call this one...&lt;/span&gt;
- (&lt;span class=&quot;hljs-built_in&quot;&gt;UIViewController&lt;/span&gt; *)presentationController:(&lt;span class=&quot;hljs-built_in&quot;&gt;UIPresentationController&lt;/span&gt; *)controller viewControllerForAdaptivePresentationStyle:(&lt;span class=&quot;hljs-built_in&quot;&gt;UIModalPresentationStyle&lt;/span&gt;)style
{
    &lt;span class=&quot;hljs-built_in&quot;&gt;UINavigationController&lt;/span&gt; *navVC = [[&lt;span class=&quot;hljs-built_in&quot;&gt;UINavigationController&lt;/span&gt; alloc] initWithRootViewController:controller.presentedViewController];
    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; navVC;
}&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;å¦‚æœä¸å®ç°ç¬¬ä¸€ä¸ªæ–¹æ³•çš„è¯å°±ä¸ä¼šè°ƒç”¨ç¬¬äºŒä¸ªä»£ç†æ–¹æ³•, è™½ç„¶é»˜è®¤çš„ä¹Ÿæ˜¯å…¨å±, è€Œä¸”ä½ åªèƒ½è¿”å›å…¨å±(æœ‰ä¸¤ä¸ªå€¼éƒ½å¯ä»¥). ç„¶åä¹Ÿè¦æ³¨æ„: &lt;strong&gt;å¦‚æœæ²¡æœ‰ä½¿ç”¨size classes, åªä¿ç•™iPhone sizeæ—¶, ç¬¬ä¸€ä¸ªä»£ç†æ–¹æ³•è¿”å›UIModalPresentationFullScreen, åˆ™ä¸ä¼šè°ƒç”¨ç¬¬äºŒä¸ªä»£ç†æ–¹æ³•. éœ€è¦è¿”å›UIModalPresentationOverFullScreenæ‰è¡Œ&lt;/strong&gt;. æŸç§ç¨‹åº¦ä¸Šå¯ä»¥è®¤ä¸ºæ˜¯ä¸ªå°bug. ä¸è¿‡å¸¦overçš„å˜é‡æ˜¯iOS8æ‰æœ‰çš„, ç†è®ºä¸Šä¹Ÿåº”è¯¥ä½¿ç”¨æ–°çš„å˜é‡æ‰å¯¹. &lt;/p&gt;
&lt;p&gt;å¦å¤–å¯ä»¥å¼ºåˆ¶ä¸ä½¿ç”¨adaptive, åªéœ€è¦è¿”å›UIModalPresentationNoneå³å¯. åœ¨å‹ç¼©çš„ç©ºé—´å†…ä¹Ÿå¯ä»¥å±•ç¤ºä¸ºpopover. è¿™ç‚¹å¾ˆå¥½~&lt;/p&gt;
&lt;h1 id=&quot;Present-çš„ä¸€äº›è¦ç‚¹&quot;&gt;&lt;a href=&quot;#Present-çš„ä¸€äº›è¦ç‚¹&quot; class=&quot;headerlink&quot; title=&quot;Present çš„ä¸€äº›è¦ç‚¹&quot;&gt;&lt;/a&gt;Present çš„ä¸€äº›è¦ç‚¹&lt;/h1&gt;&lt;p&gt;å‰é¢è¯´äº†å¾ˆå¤špresentçš„æ¼”åŒ–, ä»segueåˆ°transitionå†åˆ°presentationController, éƒ½æ˜¯åœ¨åŠ å¼ºpresent, è¯•å›¾ç»™å¼€å‘è€…æ›´å¤šçš„ç©ºé—´. ä¸‹é¢è¯´ä¸€äº›presentçš„è¦ç‚¹, ä¸»è¦è¯´ä¸€ä¸‹presentä¸­viewControllerçš„å±‚çº§ç»“æ„ä»¥åŠå¦‚ä½•ä¿®æ”¹ç¡®å®šå±‚çº§å…³ç³».&lt;/p&gt;
&lt;p&gt;å½“ä¸€ä¸ªappè¿è¡Œèµ·æ¥, windowä¸Šæœ‰ä¸€ä¸ªrootViewController, å¯èƒ½æ˜¯ä¸€ä¸ªNavigationControlleræˆ–è€…ä¸€ä¸ªTabbarController, æˆ‘ä»¬å¯ä»¥è¿›è¡Œpushæ“ä½œæ·±å…¥åˆ°ä¸€ä¸ªChildViewControllerä¸­, å‡å¦‚A-&amp;gt;B-&amp;gt;C, Aæ˜¯navigationController, pushè¿›å…¥åˆ°C. è¿™æ—¶å€™æˆ‘ä»¬åœ¨Cä¸Šæœ‰ä¸€ä¸ªéœ€æ±‚éœ€è¦presentå±•ç¤ºD. è¿™ä¸ªè¿‡ç¨‹éœ€è¦çŸ¥é“ä¸€äº›viewControlleræ‰èƒ½çœŸæ­£å¼€å§‹. &lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;presentingViewController: è¿™ä¸ªpresentåˆ°åº•æ˜¯è°åœ¨åšæ”¯æŒ?&lt;/li&gt;
&lt;li&gt;presentedViewController: è¿™ä¸ªpresentä¸­è¢«å±•ç¤ºçš„æ˜¯è°?&lt;/li&gt;
&lt;li&gt;sourceViewController: è¿™ä¸ªpresentæ˜¯è°å‘èµ·çš„?
è¦æ³¨æ„, sourceå’Œpresentingå¾€å¾€æ˜¯ä¸ä¸€æ ·çš„. åœ¨æœ¬ä¾‹ä¸­, Aæœ€ç»ˆä¼šæˆä¸ºpresenting, Cæ˜¯source, è€ŒDæ˜¯presented. è¡¨ç¤ºå¦‚ä¸‹:&lt;pre&gt;
D
|
A-&gt;B-&gt;C
&lt;/pre&gt;

&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Dç°åœ¨æ˜¯å’ŒAè¿›è¡Œäº†å…³è”, å½¢æˆäº†presentingå’Œpresentedçš„å…³ç³». viewControlleræœ‰ä¸¤ä¸ªreadOnlyçš„å±æ€§, åˆ†åˆ«æ˜¯presentingViewControllerå’ŒpresentedViewController. å‰è€…æ˜¯æŒ‡å½“å‰viewControlleræ­£åœ¨è¢«è°å±•ç¤º, åè€…æ˜¯æŒ‡æ­£åœ¨è¢«å½“å‰viewControllerå±•ç¤ºçš„æ˜¯è°. è¿™ä¸¤ä¸ªå±æ€§å…¶å®æ˜¯è®¡ç®—å±æ€§, ä»–ä»¬éƒ½æ˜¯é€’å½’å¾€parentå¯»æ‰¾, ç›´åˆ°æ‰¾åˆ°çœŸæ­£åœ¨åšpresentçš„viewController. æœ¬ä¾‹ä¸­åœ¨Cçš„presentingViewControllerä¸ºnil, presentedViewControllerä¸ºD. è¿™ä¸ªç»“æœå¯¹äºA, B, Céƒ½æ˜¯ä¸€æ ·çš„, å› ä¸ºBå’ŒCéƒ½æ˜¯Açš„childViewController. Dçš„presentingViewcontrolleråˆ™æ˜¯A, presentedViewControlleræ˜¯nil. å¦‚æœDä¹Ÿæ˜¯ä¸€ä¸ªå®¹å™¨, å‡å¦‚ä»ç„¶æ˜¯navigationController, é‚£ä¹ˆDä¹Ÿpushåˆ°E.&lt;/p&gt;
&lt;pre&gt;
D-&gt;E
|
A-&gt;B-&gt;C
&lt;/pre&gt;
A, B, C, Dçš„é‚£ä¸¤ä¸ªå±æ€§çš„å€¼éƒ½æ²¡æœ‰å˜åŒ–, Eçš„presentingViewControlleræ˜¯A, presentedViewControlleræ˜¯nil. æˆ‘ä»¬å¯ä»¥åœ¨Eä¸Šç»§ç»­presentåˆ°F, Få†pushåˆ°G.
&lt;pre&gt;
F-&gt;G
|
D-&gt;E
|
A-&gt;B-&gt;C
&lt;/pre&gt;

&lt;p&gt;è¿™æ˜¯Dçš„presentedViewControllerå°±æ˜¯F. å…¶ä½™å€¼ä¹Ÿèƒ½å“åº”æ¨æ–­å‡ºæ¥. &lt;/p&gt;
&lt;p&gt;ä»å¦å¤–ä¸€ä¸ªæ–¹å¼æ¥ç†è§£, presentæ„å‘³ç€å±•ç¤ºæ–°çš„æ¨¡å—, æ–°æ¨¡å—åº”è¯¥åœ¨é€»è¾‘ä¸Šæ˜¯å¦å¤–ä¸€å±‚, é»˜è®¤æƒ…å†µä¸‹, presentæ–°çš„ä¸€å±‚ç”±å½“å‰å±‚çš„æ ¹å…ƒç´ æ¥æ“ä½œ. æ‰€ä»¥æ˜¯Aå±•ç¤ºäº†D, Då±•ç¤ºäº†F. ä¸ºä»€ä¹ˆè¯´æ˜¯é»˜è®¤æƒ…å†µ?  å› ä¸ºviewControllerè¿˜æœ‰ä¸€ä¸ªå±æ€§:&lt;em&gt;definesPresentationContext&lt;/em&gt;. é»˜è®¤å€¼ä¸ºNO. æ–‡æ¡£ä¸­æè¿°å¦‚æœå€¼ä¸ºYES, æ„å‘³ç€æœŸæœ›presentedViewControllerè¦†ç›–å½“å‰çš„viewçš„èŒƒå›´. ç›´è§‚åœ°æ¥è®², å°±æ˜¯viewControllerå‘Šè¯‰ç³»ç»Ÿ, å½“æˆ‘æˆ–è€…æˆ‘çš„childViewControlleråšpresentæ—¶, presentingæ˜¯æˆ‘, è¦†ç›–æˆ‘çš„æ˜¾ç¤ºèŒƒå›´. å¦‚æœçœŸçš„æƒ³è¦è¿™æ ·çš„æ•ˆæœ, è¿˜éœ€è¦ç»™presentedViewControllerè®¾ç½®&lt;em&gt;modalPresentationStyle&lt;/em&gt;çš„å€¼ä¸º&lt;em&gt;UIModalPresentationCurrentContext&lt;/em&gt;, æŒ‡å®špresentedViewControlleråœ¨å±•ç¤ºæ—¶ä½¿ç”¨å½“å‰çš„ä¸Šä¸‹æ–‡. &lt;/p&gt;
&lt;p&gt;å¦‚æœä¸¤ä¸ªå€¼éƒ½æ­£ç¡®è®¾ç½®äº†, å½“ä¸€ä¸ªchildViewControllerè°ƒç”¨presentæ—¶, å®ƒé¦–å…ˆæ£€æŸ¥è‡ªå·±, ç„¶åé€’å½’æ£€æŸ¥parentViewControlleræ˜¯å¦æœ‰è°çš„&lt;em&gt;definesPresentationContext&lt;/em&gt;æ˜¯YES. è¿™æ ·ä¼šæ‰¾åˆ°ä¸€ä¸ªviewControlleræ¥ä½œä¸ºpresenting, ç„¶åpresentå°±æ˜¯åœ¨è¿™ä¸ªviewControllerä¸Šåš. æ³¨æ„, å®ƒæœ‰å¯èƒ½ä¸æ˜¯å½“å‰å±‚çš„æ ¹, ä¹Ÿå°±æ„å‘³ç€æ ¹ä»ç„¶å¯ä»¥present. æ ¹presentçš„viewControllerçš„å±‚çº§åœ¨childä¹‹ä¸Š. &lt;/p&gt;
&lt;p&gt;å¦‚æœæ²¡æœ‰åŒæ—¶è¾¾æˆä¸Šè¿°çš„ä¸¤ä¸ªå˜é‡è®¾ç½®, å¾—åˆ°çš„ç»“æœå°±æ˜¯é»˜è®¤ç”±å½“å‰å±‚çš„æ ¹è¿›è¡Œpresent, å¹¶ä¸”ä¸ä»¥æ ¹çš„æ˜¾ç¤ºèŒƒå›´åšæ§åˆ¶. è¿™é‡Œæœ‰ä¸€ä¸ªéœ€è¦æ³¨æ„çš„: å¦‚æœåœ¨ä¸€ä¸ªviewController (X)ä¸Šè®¾å®šäº†&lt;em&gt;definesPresentationContext&lt;/em&gt;ä¸ºYES, å¹¶ä¸”presentedViewController (Y)è®¾ç½®äº†&lt;em&gt;modalPresentationStyle&lt;/em&gt;ä¸º&lt;em&gt;UIModalPresentationCurrentContext&lt;/em&gt;, åœ¨Yä¸Šå†æ¬¡è¿›è¡Œpresentæ—¶,  ä¸‹ä¸€ä¸ªpresentedViewController (Z)&lt;strong&gt;æ²¡æœ‰è®¾ç½®&lt;/strong&gt; ä¸º&lt;em&gt;UIModalPresentationCurrentContext&lt;/em&gt;çš„è¯, å±•ç¤ºä¼šå˜æˆå…¨å±, æ­¤æ—¶çš„Zçš„presentingViewControllerå˜æˆäº†X. æ›´å¥‡æ€ªçš„æ˜¯ç»‘å®šçš„unwindSegueä¼šè«åå¤±æ•ˆ, å…¶å®ƒäº‹ä»¶è¿˜èƒ½æ­£ç¡®å“åº”. å¦‚æœZè®¾ç½®äº†&lt;em&gt;UIModalPresentationCurrentContext&lt;/em&gt;, åˆ™presentè¦†ç›–çš„è¿˜æ˜¯Xçš„èŒƒå›´, presentingViewControllerå±æ€§æŒ‡å‘çš„æ˜¯Y.&lt;/p&gt;
&lt;h2 id=&quot;æ€»ç»“-2&quot;&gt;&lt;a href=&quot;#æ€»ç»“-2&quot; class=&quot;headerlink&quot; title=&quot;æ€»ç»“&quot;&gt;&lt;/a&gt;æ€»ç»“&lt;/h2&gt;&lt;p&gt;å¾ˆä¹±æœ‰æœ¨æœ‰? æˆ‘ä¹Ÿè§‰å¾—å¾ˆä¹±. ä½†äº‹å®å°±æ˜¯è¿™æ ·. è‹¹æœè¿™æ¬¡çš„iOS8å‡çº§å¸¦æ¥çš„é—®é¢˜ä¸å°‘, æ·»åŠ äº†size classæ¥æè¿°ç”¨æˆ·ç•Œé¢çš„å˜åŒ–, é¡ºä¾¿ä¸€æ, å› ä¸ºå¼•å…¥size classçš„æ¦‚å¿µ, è½¬å±çš„æ–¹æ³•ä¹Ÿå…¨éƒ¨åºŸå¼ƒ, æ”¹ä¸ºå“åº”å°ºå¯¸çš„å˜åŒ–. å¼•å…¥UIPresentationControllerè¿›è¡Œpresentç®¡ç†, ç³»ç»Ÿæ§ä»¶çš„å±•ç¤ºä¹ŸåŸºæœ¬ä¸Šéƒ½å˜æˆäº†presentå±•ç¤º, è¡Œä¸ºå‘ç”Ÿäº†å¤§å¹…å˜åŒ–. &lt;em&gt;UIModalPresentationCustom&lt;/em&gt;çš„è®¾ç½®ä¸å¦ä¼šå¯¼è‡´ä¸åŒçš„ç»“æœ. å…è®¸adaptiveç‰¹æ€§æ¥è°ƒæ•´ä¸åŒå°ºå¯¸ä¸‹åœ°æ˜¾ç¤ºç­–ç•¥, ä½†æ˜¯ä¸å…¼å®¹iOS7åŠä»¥å‰çš„ç³»ç»Ÿ, åŸºæœ¬ä¸Šéƒ½æ˜¯äº›æ–°çš„APIå’Œè®¾è®¡. &lt;/p&gt;
&lt;p&gt;ç¨å¾®åæ§½ä¸‹: autoLayoutçš„ä½¿ç”¨ä»ç„¶æœ‰äº›é—®é¢˜, æœ‰äº›è®¾ç½®ä¸æ˜¯åœ¨æ‰€æœ‰ç‰ˆæœ¬ä¸­éƒ½æ”¯æŒçš„, è™½ç„¶ç»™å‡ºäº†warning, ä½†æ˜¯æ²¡æœ‰å»ºè®®å¦‚ä½•ä¿®æ”¹. ä½¿ç”¨autoLayoutåçš„åŠ¨ç”»ä¹Ÿæœ‰å„ç§å„æ ·çš„é—®é¢˜, ç»™ä½¿ç”¨äº†autolayoutçš„viewControlleråšè¿‡åœºåŠ¨ç”», æ”¹å˜viewçš„transformæ¥å®Œæˆæ•ˆæœ. å¦‚æœä½¿ç”¨currentContextçš„æ–¹å¼present å¹¶ä¸”æœ€ç»ˆæ˜¾ç¤ºèŒƒå›´å’ŒviewControllerçš„åˆå§‹å¤§å°ä¸ä¸€è‡´æ—¶, ä¼šçœ‹åˆ°å¾ˆå¥½ç©çš„ç»“æœ. åŠ¨ç”»æ•ˆæœå®Œå…¨å°±æ˜¯æ‰“è„¸. ä¹Ÿå°è¯•è¿‡ç»™animationåŠ ä¸ŠlayoutSubViewsçš„option, ç„¶ååˆå¾—åˆ°äº†å¦å¤–ä¸€ä¸ªæ‰“è„¸çš„åŠ¨ç”»æ•ˆæœ. åˆ†æäº†ä¸€ä¸‹ä»£ç , å‘ç°ä¸Šè¿°çš„æ”¹åŠ¨æ€»ç»“èµ·æ¥å°±æ˜¯å…ˆæ”¹åŠ¨äº†transformè®©å…¶ç¼©æ”¾å˜å°, ç„¶ååŠ¨ç”»blockä¸­é‡è®¾transform, ç„¶åæ”¹å˜viewçš„frame. æ˜¯çš„, å°±æ˜¯å› ä¸ºæ”¹å˜äº†frameå¯¼è‡´äº†å„ç§å¥‡è‘©çš„æ•ˆæœ, æœ‰å…´è¶£çš„è‡ªå·±è¯•è¯•å°±çŸ¥é“äº†. è¿˜æœ‰å¾ˆå¤šå…¶ä»–çš„é—®é¢˜è¿™ç¯‡åšå®¢å°±ä¸åœ¨åæ§½äº†, å†å†™å°±å¤ªé•¿äº†.&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;iOSä¸­çš„åœºæ™¯åˆ‡æ¢æœ‰å¤šç§æ–¹å¼, containerå†…éƒ¨çš„åˆ‡æ¢æœ‰UINavigationControllerçš„push popæ“ä½œ, UITabbarControllerçš„tabåˆ‡æ¢. å¤–éƒ¨çš„è½¬æ¢æœ‰popover(iPadä¸“ç”¨), å’Œéå¸¸å¸¸ç”¨çš„present. å½“ç„¶, UIS
    
    </summary>
    
      <category term="æŠ€æœ¯" scheme="/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
      <category term="iOS" scheme="/tags/iOS/"/>
    
  </entry>
  
  <entry>
    <title>XLYMultiCastDelegate å¤šæ’­ä»£ç†</title>
    <link href="/2014/10/10/XLYMultiCastDelegate/"/>
    <id>/2014/10/10/XLYMultiCastDelegate/</id>
    <published>2014-10-10T08:00:00.000Z</published>
    <updated>2016-04-04T10:12:18.000Z</updated>
    
    <content type="html">&lt;p&gt;é€šçŸ¥ä¸­å¿ƒNSNotificationCenter, å¤§å®¶éƒ½çŸ¥é“æ€ä¹ˆç”¨. éœ€è¦add observer, æŒ‡å®šselector, æŒ‡å®šç›‘å¬çš„é€šçŸ¥(å­—ç¬¦ä¸²), åœ¨selectorå¯¹åº”çš„æ–¹æ³•ä¸­è·å–userInfoå­—å…¸, æ ¹æ®keyè·å–valueè¿›è¡Œæ“ä½œ, æœ€åè¿˜å¾—åœ¨æŸä¸ªæ—¶æœºremove observer. è™½ç„¶æŒ‰ç…§è§„èŒƒå»ç¼–å†™ä»£ç ä¸å®¹æ˜“å‡ºé”™, ä½†æ˜¯ä»ç„¶æœ‰å¾ˆå¤šéº»çƒ¦, selectorçš„ä½¿ç”¨é”™è¯¯ä¸å®¹æ˜“åœ¨ç¼–è¯‘æ—¶æ£€æŸ¥, é€šçŸ¥å’ŒuserInfoéƒ½æ˜¯ä½¿ç”¨å­—ç¬¦ä¸², éœ€è¦å¤§é‡å®šä¹‰å’Œç»´æŠ¤å­—ç¬¦ä¸²å¸¸é‡. è¿™ç‚¹æœ‰æ—¶å€™ç€å®ä¼šè®©äººå¾ˆçƒ¦æ¼. æœ¬æ–‡ä»‹ç»ä¸€ç§åˆ©ç”¨&lt;strong&gt;æ¶ˆæ¯è½¬å‘&lt;/strong&gt;å’Œ&lt;strong&gt;ä»£ç†&lt;/strong&gt;æ¥åšå¹¿æ’­çš„æƒ³æ³•.&lt;/p&gt;
&lt;p&gt;è®°å¾—åšç¬¬ä¸€ä¸ªé¡¹ç›®æ—¶(ä¸€å¹´å¤šå‰...), éœ€è¦åšèŠå¤©, å½“æ—¶å› ä¸ºå¾ˆå¤šåŸå› æ²¡æœ‰é‡æ–°å¼€å‘, è€Œæ˜¯ä½¿ç”¨äº†ä¹‹å‰é¡¹ç›®çš„èŠå¤©æ¨¡å—ä»£ç , ç»“æ„ååˆ†æ··ä¹±, å¤§é‡çš„ä½¿ç”¨äº†Notificationå¹¶ä¸”å¾ˆå¤šåœ°æ–¹çš„ç”¨æ³•æ˜¯é”™è¯¯çš„. è™½ç„¶å¼€å‘å¾—å¾ˆä¸çˆ½, æ€»ä¹‹æ˜¯ç¡¬æ‰›ä¸‹å»äº†, ä¸å ªå›é¦–. æœŸé—´ç§¯ç´¯äº†ä¸€äº›æƒ³æ³•, ä¹Ÿå†™è¿‡ä¸€äº›demoéªŒè¯äº†ä¸€äº›, å…¶ä¸­ä¸€ä¸ªå°±æ˜¯æœ¬æ–‡ä»‹ç»çš„&lt;code&gt;MultiCastDelegate&lt;/code&gt;. &lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬é‡åˆ°äº†ä¸€ç±»é—®é¢˜, å½“æŸä¸ªæ•°æ®å‘ç”Ÿå˜åŒ–æ—¶, å¯èƒ½æœ‰å¤šä¸ªå¯¹è±¡æœŸæœ›å¾—åˆ°é€šçŸ¥, ä½†æ˜¯å„è‡ªæ‰€å¤„çš„çº¿ç¨‹æˆ–è€…Queueæ˜¯ä¸ä¸€æ ·çš„. NSNotificationCenteré™¤äº†åœ¨å‘é€é€šçŸ¥æ—¶çš„ä¸€äº›å¸¸é‡å®šä¹‰çš„é—®é¢˜å¤–è¿˜æœ‰ä¸€ä¸ªé‡è¦çš„ç‰¹æ€§: é€šçŸ¥çš„è°ƒç”¨æ˜¯åœ¨postNotificationçš„è°ƒç”¨çº¿ç¨‹ä¸­åŒæ­¥æ‰§è¡Œ. å¦‚æœæˆ‘ä»¬æœ‰ä¸»çº¿ç¨‹å’Œåå°çš„å¯¹è±¡åŒæ—¶ç›‘å¬é€šçŸ¥, NSNotificationCenterå°±æ— æ³•æ»¡è¶³éœ€æ±‚äº†, æ€»æ˜¯è‡³å°‘æœ‰ä¸€ä¸ªobserverä¸æ˜¯åœ¨è‡ªå·±æ‰€å±çš„çº¿ç¨‹æˆ–è€…Queueè°ƒèµ·. éš¾é“è¿˜è¦è‡ªå·±å†æ¬¡dispatchä¸€ä¸‹?&lt;/p&gt;
&lt;h2 id=&quot;XLYMultiCastDelegate&quot;&gt;&lt;a href=&quot;#XLYMultiCastDelegate&quot; class=&quot;headerlink&quot; title=&quot;XLYMultiCastDelegate&quot;&gt;&lt;/a&gt;XLYMultiCastDelegate&lt;/h2&gt;&lt;h3 id=&quot;ä½¿ç”¨ç®€ä»‹&quot;&gt;&lt;a href=&quot;#ä½¿ç”¨ç®€ä»‹&quot; class=&quot;headerlink&quot; title=&quot;ä½¿ç”¨ç®€ä»‹&quot;&gt;&lt;/a&gt;ä½¿ç”¨ç®€ä»‹&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;&lt;a href=&quot;https://github.com/kaizeiyimi/XLYMultiCastDelegate&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;XLYMultiCastDelegate&lt;/a&gt;&lt;/strong&gt;æ¥æ‹¯æ•‘ä½ . å®ƒçš„ä¸­æ–‡åå­—å«å¤šæ’­ä»£ç†? å…¶å®æ˜¯å¹¿æ’­. å®ƒçš„ä½œç”¨è·Ÿé€šçŸ¥ä¸­å¿ƒNSNotificationCenterå¾ˆåƒ, è¦åšçš„äº‹æƒ…ä¹Ÿæ˜¯ä¸€å¯¹å¤šçš„é€šçŸ¥. å®ç°çš„æ€è·¯ä¸¥é‡ä¾èµ–Objective-Cçš„æ¶ˆæ¯è½¬å‘æœºåˆ¶. å®ƒä¸æ˜¯å®Œå…¨çš„é€šçŸ¥ä¸­å¿ƒçš„ä»£æ›¿å®ç°, multiCastDelegate å…¶å®éœ€è¦ä½¿ç”¨ä¸€ä¸ªprotocolæ¥åˆå§‹åŒ–. ä¹‹åæ·»åŠ çš„observeræˆ–è€…è¯´delegateå¿…é¡»è¦å®ç°è¿™ä¸ªprotocol, å¦åˆ™å°†ä¸èƒ½æ·»åŠ . å…ˆçœ‹çœ‹åŸºæœ¬ä½¿ç”¨, å†ç»§ç»­ä»‹ç».&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;objc hljs&quot;&gt;&lt;span class=&quot;hljs-class&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;@protocol&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;SimpleProtocol&lt;/span&gt; &amp;lt;&lt;span class=&quot;hljs-title&quot;&gt;NSObject&lt;/span&gt;&amp;gt;&lt;/span&gt;
&lt;span class=&quot;hljs-keyword&quot;&gt;@optional&lt;/span&gt;
- (&lt;span class=&quot;hljs-keyword&quot;&gt;void&lt;/span&gt;)someOptionalMethod;
&lt;span class=&quot;hljs-keyword&quot;&gt;@end&lt;/span&gt;

&lt;span class=&quot;hljs-comment&quot;&gt;//åˆ›å»º&lt;/span&gt;
XLYMultiCastDelegate *multiDelegate = [[XLYMultiCastDelegate alloc] initWithConformingProtocol:&lt;span class=&quot;hljs-class&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;@protocol&lt;/span&gt;(&lt;span class=&quot;hljs-title&quot;&gt;SimpleProtocol&lt;/span&gt;)];&lt;/span&gt;
&lt;span class=&quot;hljs-comment&quot;&gt;//æ·»åŠ ä»£ç†&lt;/span&gt;
[multiDelegate addDelegate:&lt;span class=&quot;hljs-keyword&quot;&gt;self&lt;/span&gt; dispatchQueue:dispatch_get_main_queue()];
&lt;span class=&quot;hljs-comment&quot;&gt;//éœ€è¦æœ‰ä¸€ä¸ªåœ°æ–¹æ¥ä¿å­˜multiCastDelegateå®ä¾‹&lt;/span&gt;
&lt;span class=&quot;hljs-keyword&quot;&gt;self&lt;/span&gt;.multiDelegate = (&lt;span class=&quot;hljs-keyword&quot;&gt;id&lt;/span&gt;&amp;lt;SimpleProtocol&amp;gt;)multiDelegate;
&lt;span class=&quot;hljs-comment&quot;&gt;//å¯ä»¥æ£€æŸ¥æ˜¯å¦å®ç°äº†åè®®&lt;/span&gt;
&lt;span class=&quot;hljs-built_in&quot;&gt;BOOL&lt;/span&gt; result = [&lt;span class=&quot;hljs-keyword&quot;&gt;self&lt;/span&gt;.multiDelegate conformsToProtocol:&lt;span class=&quot;hljs-class&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;@protocol&lt;/span&gt;(&lt;span class=&quot;hljs-title&quot;&gt;SimpleProtocol&lt;/span&gt;)];&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è°ƒç”¨å…¶å®å¾ˆç®€å•, é¦–å…ˆéœ€è¦åˆ›å»ºä¸€ä¸ªmultiDelegateå¯¹è±¡, SimpleProtocolçœŸçš„å¾ˆsimple, åªæœ‰ä¸€ä¸ªå¯é€‰æ–¹æ³•. æ·»åŠ ä»£ç†æ—¶å¯ä»¥æŒ‡å®šdispatchQueueå‚æ•°, è¿™ä¸ªQueueå°†æ˜¯ä»£ç†æ–¹æ³•è¢«è°ƒèµ·çš„Queue, è§£å†³äº†é€šçŸ¥ä¸­å¿ƒä¸èƒ½å¾€ä¸åŒçš„çº¿ç¨‹æˆ–Queueå‘é€é€šçŸ¥çš„é—®é¢˜. åˆ›å»ºäº†multiDelegateå¯¹è±¡å½“ç„¶éœ€è¦æ‰¾ä¸ªåœ°æ–¹å­˜èµ·æ¥. ä»¥åä¹Ÿå¯ä»¥éšæ—¶æ·»åŠ æˆ–è€…ç§»é™¤delegate. å½“ç„¶ä½ å¯ä»¥æ£€æŸ¥multiDelegateæ˜¯å¦å®ç°äº†åè®®, ç»“æœæ˜¯YES.&lt;/p&gt;
&lt;h3 id=&quot;åŸç†è¯´æ˜&quot;&gt;&lt;a href=&quot;#åŸç†è¯´æ˜&quot; class=&quot;headerlink&quot; title=&quot;åŸç†è¯´æ˜&quot;&gt;&lt;/a&gt;åŸç†è¯´æ˜&lt;/h3&gt;&lt;p&gt;ä¸‹é¢è¯¦ç»†è¯´æ˜ä¸€ä¸‹å®ç°çš„ç»†èŠ‚å’Œéœ€è¦æ³¨æ„çš„é—®é¢˜, ä¼šæ¶‰åŠåˆ°ä¸€äº›runtimeçš„çŸ¥è¯†, è¿™é‡Œä¸åšè¯¦ç»†çš„ä»‹ç», éœ€è¦äº†è§£çš„è¯·å‚é˜…&lt;a href=&quot;https://developer.apple.com/library/ios/documentation/Cocoa/Conceptual/ObjCRuntimeGuide/Introduction/Introduction.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;è‹¹æœçš„æ–‡æ¡£&lt;/a&gt;. è¿™é‡Œå…ˆä»…å¯¹OCç¯å¢ƒè¿›è¡Œè¯´æ˜, swiftçš„åé¢å•ç‹¬è¯´æ˜.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;åè®®æ£€æŸ¥&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;åè®®æ˜¯ä¸€ä¸ª&lt;code&gt;Protocol *&lt;/code&gt;ç±»å‹. ä»£ç ä¸­å¯ä»¥è¿™æ ·å£°æ˜å˜é‡å’Œè·å–åè®®:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;objc hljs&quot;&gt;&lt;span class=&quot;hljs-comment&quot;&gt;//å£°æ˜ä¸ºproperty&lt;/span&gt;
&lt;span class=&quot;hljs-keyword&quot;&gt;@property&lt;/span&gt; (&lt;span class=&quot;hljs-keyword&quot;&gt;nonatomic&lt;/span&gt;, &lt;span class=&quot;hljs-keyword&quot;&gt;strong&lt;/span&gt;) Protocol *protocol;

&lt;span class=&quot;hljs-comment&quot;&gt;//è·å–&lt;/span&gt;
&lt;span class=&quot;hljs-built_in&quot;&gt;NSString&lt;/span&gt; *protocolName = &lt;span class=&quot;hljs-string&quot;&gt;@&quot;SimpleProtocol&quot;&lt;/span&gt;;
Protocol *protocol = objc_getProtocol(protocolName.UTF8String);

&lt;span class=&quot;hljs-comment&quot;&gt;//æˆ–è€…&lt;/span&gt;
Protocol *protocol = &lt;span class=&quot;hljs-class&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;@protocol&lt;/span&gt;(&lt;span class=&quot;hljs-title&quot;&gt;SimpleProtocol&lt;/span&gt;);&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;æˆ‘ä»¬éœ€è¦è®°å½•ä¸‹å½“å‰å¤šæ’­ä»£ç†æ‰€æ”¯æŒçš„åè®®, åè®®åœ¨runtimeç¯å¢ƒé‡Œé¢åº”è¯¥æ˜¯å•ä¾‹çš„å½¢å¼å­˜åœ¨çš„. åœ¨æ·»åŠ æ–°çš„delegateåˆ°å¤šæ’­ä»£ç†ä¸­æ—¶è¿›è¡Œçš„æ£€æŸ¥å¾ˆç®€å• &lt;code&gt;[delegate conformsToProtocol:self.protocol]&lt;/code&gt;, å¦‚æœé€šè¿‡åˆ™å…è®¸æ·»åŠ . å†…éƒ¨ä¼šåˆ›å»ºä¸€ä¸ªdelegateNodeå¯¹è±¡æ¥weakæŒæœ‰æ·»åŠ çš„delegate, å¹¶è®°å½•å¯¹åº”çš„delegateQueue. è¿˜æœ‰ä¸€äº›æ·»åŠ åˆ é™¤çš„ç®¡ç†delegateçš„æ–¹æ³•å°±ä¸å¤šè¯´, éƒ½æ˜¯äº›ç®€å•é€»è¾‘.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;runtimeæ”¯æŒ&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;é‡å†™ &lt;code&gt;-[NSObject conformsToProtocol:]&lt;/code&gt;æ–¹æ³•, åˆ¤å®šæ˜¯å¦å®ç°äº†æŸä¸ªåè®®. &lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;é‡å†™ &lt;code&gt;-[NSObject respondsToSelector:]&lt;/code&gt;æ–¹æ³•, éå†ç°æœ‰çš„ä»£ç†, åªè¦ä»»ä½•ä¸€ä¸ªèƒ½å¤Ÿå“åº”åˆ™è®¤ä¸ºèƒ½å¤Ÿå“åº”.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;é‡å†™ &lt;code&gt;-[NSObject methodSignatureForSelector:]&lt;/code&gt;æ–¹æ³•, è¯¦ç»†æ–‡æ¡£è¯´æ˜å‚è€ƒappleçš„runtimeæ–‡æ¡£, æˆ‘ä»¬è¿™é‡Œçš„åœºæ™¯æ˜¯multiDelegateè‡ªå·±ä¸èƒ½å“åº”æ–¹æ³•è°ƒç”¨, å› æ­¤éœ€è¦åšè°ƒç”¨è½¬å‘, è¿™ä¸ªæ—¶å€™è¯¥æ–¹æ³•ä¼šè¢«è°ƒç”¨æ¥ç»™&lt;code&gt;NSInvocation&lt;/code&gt;å¯¹è±¡è®¾ç½®æ–¹æ³•ç­¾å. æ˜¯ä¸ºè‡ªå·±ä¸èƒ½å“åº”çš„æ–¹æ³•å¯»æ‰¾æ–¹æ³•ç­¾å, ä»ç„¶éå†ç°æœ‰çš„ä»£ç†, æ‰¾åˆ°ä¸€ä¸ªæ­£ç¡®åœ°ç­¾åå³å¯. ç­¾åè®°å½•äº†è¿™ä¸ªæ–¹æ³•çš„è¿”å›å€¼ç±»å‹, receiverçš„ç±»å‹, ä»¥åŠå‚æ•°ä¸ªæ•°ç­‰ä¿¡æ¯. å¦‚æœæ²¡æœ‰delegateèƒ½å¤Ÿæä¾›ç­¾å, åˆ™é»˜è®¤æä¾›doNothingçš„æ–¹æ³•ç­¾å, æ­£å¦‚å…¶å, å•¥ä¹Ÿä¸åš, åªæ˜¯ä¸ºäº†ä¸å´©æºƒ. è¿™ä¸ªè¡Œä¸ºä¹Ÿå¯ä»¥ç†è§£ä¸ºæ¶ˆæ¯æ²¡æœ‰æ¥å—è€…åˆ™ä¸¢å¼ƒ.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;é‡å†™ &lt;code&gt;-[NSObject forwardInvocation:]&lt;/code&gt;æ–¹æ³•, è¿™é‡Œå°±æ˜¯æœ€é‡è¦çš„åœ°æ–¹. å½“ä¸€ä¸ªå¯¹è±¡ä¸èƒ½ç›¸åº”ä¸€ä¸ªselectorè°ƒç”¨æ—¶, æ»¡è¶³ä¸€äº›æ¡ä»¶çš„æƒ…å†µä¸‹æœ€ç»ˆä¼šèµ°åˆ°è¿™é‡Œ, æ¡ä»¶å¦‚ä½•è¾¾æˆè¯·å‚é˜…&lt;a href=&quot;https://developer.apple.com/library/ios/documentation/Cocoa/Conceptual/ObjCRuntimeGuide/Introduction/Introduction.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;è‹¹æœæ–‡æ¡£&lt;/a&gt;, å½“ç„¶æˆ‘ä»¬è¿™é‡Œæ˜¯è¾¾æˆäº†, ç°åœ¨æˆ‘ä»¬å¾—åˆ°äº†ä¸€ä¸ªinvocationå¯¹è±¡, å®ƒåŒ…å«äº†æ–¹æ³•ç­¾å, å‚æ•°ç­‰ä¿¡æ¯, æ˜¯å¯¹ä¸€ä¸ªå¯¹è±¡è¿›è¡Œæ–¹æ³•è°ƒç”¨çš„ä¸€ä¸ªå°è£…. NSInvocationå¯¹è±¡æœ‰ä¸€ä¸ªæ–¹æ³•&lt;code&gt;-[NSInvocation invokeWithTarget:]&lt;/code&gt;, å…¶ä½œç”¨å°±æ˜¯å°†targetä½œä¸ºæ–¹æ³•è°ƒç”¨çš„receiverè¿›è¡Œè°ƒç”¨, å‚æ•°ä¸å˜. æ‰€ä»¥æˆ‘ä»¬å°†éå†æ‰€æœ‰çš„delegate, å¹¶åœ¨å®ƒä»¬çš„delegateQueueé‡Œé¢è¿›è¡Œè°ƒç”¨, è¿™æ ·å°±å®Œæˆäº†æ¶ˆæ¯è°ƒç”¨çš„è½¬å‘.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;éœ€è¦æ³¨æ„çš„é—®é¢˜&quot;&gt;&lt;a href=&quot;#éœ€è¦æ³¨æ„çš„é—®é¢˜&quot; class=&quot;headerlink&quot; title=&quot;éœ€è¦æ³¨æ„çš„é—®é¢˜&quot;&gt;&lt;/a&gt;éœ€è¦æ³¨æ„çš„é—®é¢˜&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;åˆ›å»ºXLYMultiCastDelegateå®ä¾‹, æ·»åŠ ç§»é™¤delegateç­‰ç®¡ç†æ“ä½œéƒ½æ˜¯çº¿ç¨‹ä¸å®‰å…¨çš„, éœ€è¦ä½¿ç”¨è€…ç»´æŠ¤.&lt;/li&gt;
&lt;li&gt;æœ¬è´¨ä¸Šæ˜¯æƒ³ç”¨ä»£ç†æ–¹æ³•è°ƒç”¨æ¥å®Œæˆé€šçŸ¥, å› æ­¤åº”è¯¥å°†å…¶åº”ç”¨äºæ²¡æœ‰è¿”å›å€¼çš„ä»£ç†æ–¹æ³•. å¦‚æœä¸€å®šè¦å‘é€å¸¦è¿”å›å€¼çš„æ–¹æ³•è°ƒç”¨, å†…éƒ¨é€»è¾‘ä¼šåœ¨å‘é€è°ƒç”¨çš„çº¿ç¨‹ä¸­åŒæ­¥å¯»æ‰¾ç¬¬ä¸€ä¸ªèƒ½å¤Ÿå“åº”æ­¤æ–¹æ³•çš„delegateå¹¶è°ƒç”¨. è¿™é‡Œä¸èƒ½ä½¿ç”¨dispatch_async, å¿…é¡»åŒæ­¥è°ƒç”¨, å¦åˆ™è°ƒç”¨è€…ä¼šç«‹å³å¾—åˆ°nilçš„è¿”å›å€¼.&lt;/li&gt;
&lt;li&gt;éå†delegateå¹¶è¿›è¡Œæ–¹æ³•è°ƒç”¨çš„forå¾ªç¯ä½¿ç”¨äº†ä¿¡å·é‡æ¥è¿›è¡ŒåŒæ­¥. Invocationä¸æ”¯æŒcopy, å¹¶ä¸”æœ‰ä¸€ä¸ªé—®é¢˜: å¦‚æœåœ¨ä¸åŒçš„çº¿ç¨‹åŒæ—¶å¯¹åŒä¸€ä¸ªinvocationå¯¹è±¡è°ƒç”¨&lt;code&gt;-[NSInvocation invokeWithTarget:]&lt;/code&gt;, å¯èƒ½ä¼šå‡ºé”™, è¿™ä¸ªé”™è¯¯ä¸æ˜¯å´©æºƒ, è€Œæ˜¯targetçš„å¤„ç†é”™è¯¯. æ¯”å¦‚å¯¹A,BåŒæ—¶è¿›è¡Œè°ƒç”¨, invokeè°ƒç”¨æ—¶åº”è¯¥ä¼šè®°å½•å½“å‰çš„receiver(æ ¹æ®ç»“æœç°è±¡æ¨æ–­çš„), ä¸­é—´è¿˜ä¼šç»è¿‡ä¸€äº›æ­¥éª¤æ‰ä¼šçœŸæ­£å‘èµ·è°ƒç”¨, Aå…ˆè¢«è®°å½•, åœ¨å‘èµ·è°ƒç”¨å‰, Båˆè¢«è®°å½•, åˆ™ä¸¤æ¬¡è°ƒç”¨çš„ç»“æœä¼šæ˜¯è°ƒç”¨äº†ä¸¤æ¬¡B. å› æ­¤éœ€è¦åŒæ­¥ä¸€ä¸‹, ä¿è¯invocationå¯¹è±¡çš„ä¸²è¡Œä½¿ç”¨.&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&quot;swiftæ”¯æŒ&quot;&gt;&lt;a href=&quot;#swiftæ”¯æŒ&quot; class=&quot;headerlink&quot; title=&quot;swiftæ”¯æŒ&quot;&gt;&lt;/a&gt;swiftæ”¯æŒ&lt;/h3&gt;&lt;p&gt;å¾ˆä¸å·§, è‹¹æœå‘å¸ƒçš„æ–°çš„ç¼–ç¨‹è¯­è¨€swiftå¯¹runtime, KVO, KVCçš„æ”¯æŒå¾ˆä¸å‹å¥½. swiftåŠ å…¥äº†æ¨¡å—çš„æ¦‚å¿µæ¥è§£å†³OCå¤šå¹´çš„å…¨å±€ç¬¦å·è¡¨çš„ç—›, è¿˜æœ‰å¯é€‰å€¼ä»€ä¹ˆçš„ä¸€äº›æ–°æ¦‚å¿µ. å…¶ä»–çš„ç‰¹æ€§å°±æ˜¯5ä»æœˆé¥¼. å¦‚æœèƒ½å¤Ÿä¹ æƒ¯OCä¸­çš„block, é—­åŒ…, é‚£ä¹ˆswifté‡Œé¢çš„ä¸œè¥¿å°±æ²¡å•¥é—®é¢˜äº†, éƒ½æ˜¯äº›è¯­è¨€ç»†èŠ‚, åº•å±‚ä¾ç„¶æ˜¯runtimeæ¥æ”¯æ’‘, å¯ä»¥å’ŒOCæ··åˆç¼–è¯‘. ç»†èŠ‚è¯·å‚é˜…&lt;a href=&quot;https://developer.apple.com/library/ios/documentation/Swift/Conceptual/Swift_Programming_Language/index.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;swift&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;æœ¬æ¥æƒ³ç›´æ¥ç”¨swifté‡æ–°å®ç°çš„, ç»“æœè¢«ç›´æ¥æ‹’ç»äº†. swiftä¸­ä¸å…è®¸ä½¿ç”¨NSInvocationå¯¹è±¡, åªèƒ½æ··ç¼–äº†. è·å–åè®®å¯¹è±¡æ—¶éœ€è¦æ³¨æ„æ˜¯å¦æ˜¯swiftä¸­å®šä¹‰çš„åè®®:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;null hljs&quot;&gt;&lt;span class=&quot;hljs-comment&quot;&gt;//ä½¿ç”¨ocä¸­å®šä¹‰çš„åè®®æ²¡æœ‰æ¨¡å—&lt;/span&gt;
&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-title&quot;&gt;XLYMultiCastDelegate&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(protocolName: &lt;span class=&quot;hljs-string&quot;&gt;&quot;SimpleProtocol&quot;&lt;/span&gt;)&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;hljs-comment&quot;&gt;//ä½¿ç”¨ swiftå®šä¹‰çš„åè®®éœ€è¦åŠ ä¸Šæ¨¡å—ä¿¡æ¯, å¦åˆ™æ— æ³•è·å–&lt;/span&gt;
&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-title&quot;&gt;XLYMultiCastDelegate&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(protocolName: &lt;span class=&quot;hljs-string&quot;&gt;&quot;XLYMultiCastDelegateDemo.SimpleSwiftProtocol&quot;&lt;/span&gt;)&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ç„¶ååœ¨è°ƒç”¨æ—¶éœ€è¦ç”¨asè¿›è¡Œç±»å‹è½¬æ¢æ‰èƒ½è°ƒç”¨æ–¹æ³•. &lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;null hljs&quot;&gt;&lt;span class=&quot;hljs-symbol&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;multiDelegate &lt;/span&gt;= &lt;span class=&quot;hljs-keyword&quot;&gt;multiDelegateUsingOCProtocol &lt;/span&gt;as SimpleProtocol&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è¿è¡Œæ—¶ä¼šä½¿ç”¨&lt;code&gt;-[NSObject respondsToSelector:]&lt;/code&gt;æ¥è¿›è¡Œæ£€æŸ¥æ˜¯å¦å¯ä»¥è½¬æ¢. è½¬æ¢æˆåŠŸåå°±å¯ä»¥è¿›è¡Œè°ƒç”¨äº†.&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;null hljs&quot;&gt;&lt;span class=&quot;hljs-selector-tag&quot;&gt;multiDelegate&lt;/span&gt;&lt;span class=&quot;hljs-selector-class&quot;&gt;.someOptionalMethod&lt;/span&gt;!()&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&quot;æ€»ç»“-1&quot;&gt;&lt;a href=&quot;#æ€»ç»“-1&quot; class=&quot;headerlink&quot; title=&quot;æ€»ç»“&quot;&gt;&lt;/a&gt;æ€»ç»“&lt;/h3&gt;&lt;p&gt;æ¶ˆæ¯è½¬å‘æœºåˆ¶ç”±è¯­è¨€æ”¯æŒ, åº”è¯¥æ˜¯å—åˆ°äº†smalltalkçš„å½±å“, rubyä¹Ÿæœ‰ç±»ä¼¼çš„æœºåˆ¶. swiftæƒ³è¦åšæˆä¸€ä¸ªç±»å‹å®‰å…¨çš„è¯­è¨€, æ”¯æŒå¤ªå¤šåŠ¨æ€çš„ç‰¹æ€§ä¼šè®©å¾ˆå¤šä¸œè¥¿å¤±å»ä¿è¯. æ€»ä¹‹, å·¥æ¬²å–„å…¶äº‹, å¿…å…ˆåˆ©å…¶å™¨. å¤šäº†è§£ä¸€äº›è¯­è¨€çš„ç‰¹æ€§, èƒ½å¤Ÿå­¦åˆ°ä¸€äº›æŠ€æœ¯çš„è®¾è®¡æ€è·¯, è¿˜èƒ½å¸®åŠ©ç®€åŒ–ç¨‹åºè®¾è®¡, åŒæ—¶æé«˜é€¼æ ¼ğŸ˜œ.&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;é€šçŸ¥ä¸­å¿ƒNSNotificationCenter, å¤§å®¶éƒ½çŸ¥é“æ€ä¹ˆç”¨. éœ€è¦add observer, æŒ‡å®šselector, æŒ‡å®šç›‘å¬çš„é€šçŸ¥(å­—ç¬¦ä¸²), åœ¨selectorå¯¹åº”çš„æ–¹æ³•ä¸­è·å–userInfoå­—å…¸, æ ¹æ®keyè·å–valueè¿›è¡Œæ“ä½œ, æœ€åè¿˜å¾—åœ¨æŸä¸ªæ—¶æœºrem
    
    </summary>
    
      <category term="æŠ€æœ¯" scheme="/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
      <category term="iOS" scheme="/tags/iOS/"/>
    
      <category term="GitHub" scheme="/tags/GitHub/"/>
    
  </entry>
  
</feed>
